(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const ds=!1;var _n=Array.isArray,yu=Array.prototype.indexOf,vn=Array.from,gu=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,ha=Object.getOwnPropertyDescriptors,Ru=Object.prototype,Su=Array.prototype,Cs=Object.getPrototypeOf,Ao=Object.isExtensible;function Tu(e){return typeof e=="function"}const wr=()=>{};function Au(e){return e()}function hs(e){for(var t=0;t<e.length;t++)e[t]()}function ma(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const J=2,Bs=4,pn=8,Fu=1<<24,Oe=16,et=32,Dt=64,xn=128,Ae=512,Q=1024,he=2048,Fe=4096,ve=8192,je=16384,bn=32768,ft=65536,Fo=1<<17,_a=1<<18,hr=1<<19,va=1<<20,We=1<<25,Pt=32768,ms=1<<21,Is=1<<22,it=1<<23,Qe=Symbol("$state"),wu=Symbol("legacy props"),Pu=Symbol(""),nr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ds(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Cu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Bu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Iu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Du(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Mu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nu(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ku(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Gu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Lu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ou(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Uu=1,Vu=2,pa=4,zu=8,Hu=16,Xu=1,$u=2,qu=4,Yu=8,Ku=16,Wu=4,ju=2,re=Symbol(),Qu="http://www.w3.org/1999/xhtml";function Zu(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ju(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function xa(e){return e===this.v}function ec(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ba(e){return!ec(e,this.v)}let mr=!1,tc=!1;function rc(){mr=!0}let $=null;function ur(e){$=e}function pe(e,t=!1,r){$={p:$,i:!1,c:null,e:null,s:e,x:null,l:mr&&!t?{s:null,u:null,$:[]}:null}}function xe(e){var t=$,r=t.e;if(r!==null){t.e=null;for(var n of r)Ia(n)}return e!==void 0&&(t.x=e),t.i=!0,$=t.p,e??{}}function Vr(){return!mr||$!==null&&$.l===null}let sr=[];function nc(){var e=sr;sr=[],hs(e)}function Mt(e){if(sr.length===0){var t=sr;queueMicrotask(()=>{t===sr&&nc()})}sr.push(e)}function Ea(e){var t=V;if(t===null)return k.f|=it,e;if((t.f&bn)===0){if((t.f&xn)===0)throw e;t.b.error(e)}else cr(e,t)}function cr(e,t){for(;t!==null;){if((t.f&xn)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const qr=new Set;let H=null,en=null,ge=null,Ie=[],Ms=null,_s=!1;class De{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#o=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Ie=[],en=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const n of t)this.#i(n,r);this.is_fork||this.#c(),this.is_deferred()?(this.#a(r.effects),this.#a(r.render_effects)):(en=this,H=null,wo(r.render_effects),wo(r.effects),en=null,this.#l?.resolve()),ge=null}#i(t,r){t.f^=Q;for(var n=t.first;n!==null;){var s=n.f,o=(s&(et|Dt))!==0,a=o&&(s&Q)!==0,i=a||(s&ve)!==0||this.skipped_effects.has(n);if((n.f&xn)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[]}),!i&&n.fn!==null){o?n.f^=Q:(s&Bs)!==0?r.effects.push(n):vr(n)&&((n.f&Oe)!==0&&this.#o.add(n),fr(n));var l=n.first;if(l!==null){n=l;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)u===r.effect&&(this.#a(r.effects),this.#a(r.render_effects),r=r.parent),n=u.next,u=u.parent}}#a(t){for(const r of t)(r.f&he)!==0?this.#o.add(r):(r.f&Fe)!==0&&this.#s.add(r),this.#u(r.deps),Z(r,Q)}#u(t){if(t!==null)for(const r of t)(r.f&J)===0||(r.f&Pt)===0||(r.f^=Pt,this.#u(r.deps))}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&it)===0&&(this.current.set(t,t.v),ge?.set(t,t.v))}activate(){H=this,this.apply()}deactivate(){H===this&&(H=null,ge=null)}flush(){if(this.activate(),Ie.length>0){if(sc(),H!==null&&H!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#f()}#f(){if(qr.size>1){this.previous.clear();var t=ge,r=!0,n={parent:null,effect:null,effects:[],render_effects:[]};for(const o of qr){if(o===this){r=!1;continue}const a=[];for(const[l,u]of this.current){if(o.current.has(l))if(r&&u!==o.current.get(l))o.current.set(l,u);else continue;a.push(l)}if(a.length===0)continue;const i=[...o.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){var s=Ie;Ie=[];const l=new Set,u=new Map;for(const f of a)ya(f,i,l,u);if(Ie.length>0){H=o,o.apply();for(const f of Ie)o.#i(f,n);o.deactivate()}Ie=s}}H=null,ge=t}this.committed=!0,qr.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#o)this.#s.delete(t),Z(t,he),Ct(t);for(const t of this.#s)Z(t,Fe),Ct(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ma()).promise}static ensure(){if(H===null){const t=H=new De;qr.add(H),De.enqueue(()=>{H===t&&t.flush()})}return H}static enqueue(t){Mt(t)}apply(){}}function sc(){var e=Ft;_s=!0;var t=null;try{var r=0;for(an(!0);Ie.length>0;){var n=De.ensure();if(r++>1e3){var s,o;oc()}n.process(Ie),at.clear()}}finally{_s=!1,an(e),Ms=null}}function oc(){try{Mu()}catch(e){cr(e,Ms)}}let Ye=null;function wo(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(je|ve))===0&&vr(n)&&(Ye=new Set,fr(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Na(n):n.fn=null),Ye?.size>0)){at.clear();for(const s of Ye){if((s.f&(je|ve))!==0)continue;const o=[s];let a=s.parent;for(;a!==null;)Ye.has(a)&&(Ye.delete(a),o.push(a)),a=a.parent;for(let i=o.length-1;i>=0;i--){const l=o[i];(l.f&(je|ve))===0&&fr(l)}}Ye.clear()}}Ye=null}}function ya(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&J)!==0?ya(s,t,r,n):(o&(Is|Oe))!==0&&(o&he)===0&&ga(s,t,n)&&(Z(s,he),Ct(s))}}function ga(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&J)!==0&&ga(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function Ct(e){for(var t=Ms=e;t.parent!==null;){t=t.parent;var r=t.f;if(_s&&t===V&&(r&Oe)!==0&&(r&_a)===0)return;if((r&(Dt|et))!==0){if((r&Q)===0)return;t.f^=Q}}Ie.push(t)}function ic(e){let t=0,r=Bt(0),n;return()=>{kr()&&(p(r),gn(()=>(t===0&&(n=we(()=>e(()=>Mr(r)))),t+=1,()=>{Mt(()=>{t-=1,t===0&&(n?.(),n=void 0,Mr(r))})})))}}var ac=ft|hr|xn;function lc(e,t,r){new uc(e,t,r)}class uc{parent;#e=!1;#t;#n=null;#r;#l;#o;#s=null;#i=null;#a=null;#u=null;#c=null;#f=0;#d=0;#m=!1;#h=null;#b=ic(()=>(this.#h=Bt(this.#f),()=>{this.#h=null}));constructor(t,r,n){this.#t=t,this.#r=r,this.#l=n,this.parent=V.b,this.#e=!!this.#r.pending,this.#o=Rn(()=>{V.b=this;{var s=this.#p();try{this.#s=ye(()=>n(s))}catch(o){this.error(o)}this.#d>0?this.#v():this.#e=!1}return()=>{this.#c?.remove()}},ac)}#E(){try{this.#s=ye(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#i=ye(()=>t(this.#t)),De.enqueue(()=>{var r=this.#p();this.#s=this.#_(()=>(De.ensure(),ye(()=>this.#l(r)))),this.#d>0?this.#v():(At(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#p(){var t=this.#t;return this.#e&&(this.#c=lt(),this.#t.before(this.#c),t=this.#c),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#_(t){var r=V,n=k,s=$;Ne(this.#o),fe(this.#o),ur(this.#o.ctx);try{return t()}catch(o){return Ea(o),null}finally{Ne(r),fe(n),ur(s)}}#v(){const t=this.#r.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),La(this.#s,this.#u)),this.#i===null&&(this.#i=ye(()=>t(this.#t)))}#x(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&At(this.#i,()=>{this.#i=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(t){this.#x(t),this.#f+=t,this.#h&&It(this.#h,this.#f)}get_effect_pending(){return this.#b(),p(this.#h)}error(t){var r=this.#r.onerror;let n=this.#r.failed;if(this.#m||!r&&!n)throw t;this.#s&&(de(this.#s),this.#s=null),this.#i&&(de(this.#i),this.#i=null),this.#a&&(de(this.#a),this.#a=null);var s=!1,o=!1;const a=()=>{if(s){Ju();return}s=!0,o&&Ou(),De.ensure(),this.#f=0,this.#a!==null&&At(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#s=this.#_(()=>(this.#m=!1,ye(()=>this.#l(this.#t)))),this.#d>0?this.#v():this.#e=!1};var i=k;try{fe(null),o=!0,r?.(t,a),o=!1}catch(l){cr(l,this.#o&&this.#o.parent)}finally{fe(i)}n&&Mt(()=>{this.#a=this.#_(()=>{De.ensure(),this.#m=!0;try{return ye(()=>{n(this.#t,()=>t,()=>a)})}catch(l){return cr(l,this.#o.parent),null}finally{this.#m=!1}})})}}function cc(e,t,r,n){const s=Vr()?En:st;if(r.length===0&&e.length===0){n(t.map(s));return}var o=H,a=V,i=fc();function l(){Promise.all(r.map(u=>dc(u))).then(u=>{i();try{n([...t.map(s),...u])}catch(f){(a.f&je)===0&&cr(f,a)}o?.deactivate(),on()}).catch(u=>{cr(u,a)})}e.length>0?Promise.all(e).then(()=>{i();try{return l()}finally{o?.deactivate(),on()}}):l()}function fc(){var e=V,t=k,r=$,n=H;return function(o=!0){Ne(e),fe(t),ur(r),o&&n?.activate()}}function on(){Ne(null),fe(null),ur(null)}function En(e){var t=J|he,r=k!==null&&(k.f&J)!==0?k:null;return V!==null&&(V.f|=hr),{ctx:$,deps:null,effects:null,equals:xa,f:t,fn:e,reactions:null,rv:0,v:re,wv:0,parent:r??V,ac:null}}function dc(e,t){let r=V;r===null&&Cu();var n=r.b,s=void 0,o=Bt(re),a=!k,i=new Map;return Rc(()=>{var l=ma();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{u===H&&u.committed&&u.deactivate(),on()})}catch(c){l.reject(c),on()}var u=H;if(a){var f=!n.is_pending();n.update_pending_count(1),u.increment(f),i.get(u)?.reject(nr),i.delete(u),i.set(u,l)}const h=(c,d=void 0)=>{if(u.activate(),d)d!==nr&&(o.f|=it,It(o,d));else{(o.f&it)!==0&&(o.f^=it),It(o,c);for(const[m,_]of i){if(i.delete(m),m===u)break;_.reject(nr)}}a&&(n.update_pending_count(-1),u.decrement(f))};l.promise.then(h,c=>h(null,c||"unknown"))}),yn(()=>{for(const l of i.values())l.reject(nr)}),new Promise(l=>{function u(f){function h(){f===s?l(o):u(s)}f.then(h,h)}u(s)})}function st(e){const t=En(e);return t.equals=ba,t}function Ra(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)de(t[r])}}function hc(e){for(var t=e.parent;t!==null;){if((t.f&J)===0)return(t.f&je)===0?t:null;t=t.parent}return null}function Ns(e){var t,r=V;Ne(hc(e));try{e.f&=~Pt,Ra(e),t=za(e)}finally{Ne(r)}return t}function Sa(e){var t=Ns(e);if(e.equals(t)||(H?.is_fork||(e.v=t),e.wv=Ua()),!Gt)if(ge!==null)(kr()||H?.is_fork)&&ge.set(e,t);else{var r=(e.f&Ae)===0?Fe:Q;Z(e,r)}}let vs=new Set;const at=new Map;let Ta=!1;function Bt(e,t){var r={f:0,v:e,reactions:null,equals:xa,rv:0,wv:0};return r}function tt(e,t){const r=Bt(e);return Fc(r),r}function I(e,t=!1,r=!0){const n=Bt(e);return t||(n.equals=ba),mr&&r&&$!==null&&$.l!==null&&($.l.s??=[]).push(n),n}function g(e,t,r=!1){k!==null&&(!Me||(k.f&Fo)!==0)&&Vr()&&(k.f&(J|Oe|Is|Fo))!==0&&!Ze?.includes(e)&&Lu();let n=r?or(t):t;return It(e,n)}function It(e,t){if(!e.equals(t)){var r=e.v;Gt?at.set(e,t):at.set(e,r),e.v=t;var n=De.ensure();n.capture(e,r),(e.f&J)!==0&&((e.f&he)!==0&&Ns(e),Z(e,(e.f&Ae)!==0?Q:Fe)),e.wv=Ua(),Aa(e,he),Vr()&&V!==null&&(V.f&Q)!==0&&(V.f&(et|Dt))===0&&(Ee===null?wc([e]):Ee.push(e)),!n.is_fork&&vs.size>0&&!Ta&&mc()}return t}function mc(){Ta=!1;var e=Ft;an(!0);const t=Array.from(vs);try{for(const r of t)(r.f&Q)!==0&&Z(r,Fe),vr(r)&&fr(r)}finally{an(e)}vs.clear()}function Mr(e){g(e,e.v+1)}function Aa(e,t){var r=e.reactions;if(r!==null)for(var n=Vr(),s=r.length,o=0;o<s;o++){var a=r[o],i=a.f;if(!(!n&&a===V)){var l=(i&he)===0;if(l&&Z(a,t),(i&J)!==0){var u=a;ge?.delete(u),(i&Pt)===0&&(i&Ae&&(a.f|=Pt),Aa(u,Fe))}else l&&((i&Oe)!==0&&Ye!==null&&Ye.add(a),Ct(a))}}}function or(e){if(typeof e!="object"||e===null||Qe in e)return e;const t=Cs(e);if(t!==Ru&&t!==Su)return e;var r=new Map,n=_n(e),s=tt(0),o=wt,a=i=>{if(wt===o)return i();var l=k,u=wt;fe(null),Mo(o);var f=i();return fe(l),Mo(u),f};return n&&r.set("length",tt(e.length)),new Proxy(e,{defineProperty(i,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ku();var f=r.get(l);return f===void 0?f=a(()=>{var h=tt(u.value);return r.set(l,h),h}):g(f,u.value,!0),!0},deleteProperty(i,l){var u=r.get(l);if(u===void 0){if(l in i){const f=a(()=>tt(re));r.set(l,f),Mr(s)}}else g(u,re),Mr(s);return!0},get(i,l,u){if(l===Qe)return e;var f=r.get(l),h=l in i;if(f===void 0&&(!h||Tt(i,l)?.writable)&&(f=a(()=>{var d=or(h?i[l]:re),m=tt(d);return m}),r.set(l,f)),f!==void 0){var c=p(f);return c===re?void 0:c}return Reflect.get(i,l,u)},getOwnPropertyDescriptor(i,l){var u=Reflect.getOwnPropertyDescriptor(i,l);if(u&&"value"in u){var f=r.get(l);f&&(u.value=p(f))}else if(u===void 0){var h=r.get(l),c=h?.v;if(h!==void 0&&c!==re)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(i,l){if(l===Qe)return!0;var u=r.get(l),f=u!==void 0&&u.v!==re||Reflect.has(i,l);if(u!==void 0||V!==null&&(!f||Tt(i,l)?.writable)){u===void 0&&(u=a(()=>{var c=f?or(i[l]):re,d=tt(c);return d}),r.set(l,u));var h=p(u);if(h===re)return!1}return f},set(i,l,u,f){var h=r.get(l),c=l in i;if(n&&l==="length")for(var d=u;d<h.v;d+=1){var m=r.get(d+"");m!==void 0?g(m,re):d in i&&(m=a(()=>tt(re)),r.set(d+"",m))}if(h===void 0)(!c||Tt(i,l)?.writable)&&(h=a(()=>tt(void 0)),g(h,or(u)),r.set(l,h));else{c=h.v!==re;var _=a(()=>or(u));g(h,_)}var v=Reflect.getOwnPropertyDescriptor(i,l);if(v?.set&&v.set.call(f,u),!c){if(n&&typeof l=="string"){var b=r.get("length"),E=Number(l);Number.isInteger(E)&&E>=b.v&&g(b,E+1)}Mr(s)}return!0},ownKeys(i){p(s);var l=Reflect.ownKeys(i).filter(h=>{var c=r.get(h);return c===void 0||c.v!==re});for(var[u,f]of r)f.v!==re&&!(u in i)&&l.push(u);return l},setPrototypeOf(){Gu()}})}function Po(e){try{if(e!==null&&typeof e=="object"&&Qe in e)return e[Qe]}catch{}return e}function _c(e,t){return Object.is(Po(e),Po(t))}var Co,Fa,wa,Pa;function vc(){if(Co===void 0){Co=window,Fa=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;wa=Tt(t,"firstChild").get,Pa=Tt(t,"nextSibling").get,Ao(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ao(r)&&(r.__t=void 0)}}function lt(e=""){return document.createTextNode(e)}function ks(e){return wa.call(e)}function zr(e){return Pa.call(e)}function O(e,t){return ks(e)}function ie(e,t=!1){{var r=ks(e);return r instanceof Comment&&r.data===""?zr(r):r}}function L(e,t=1,r=!1){let n=e;for(;t--;)n=zr(n);return n}function pc(e){e.textContent=""}function Ca(){return!1}let Bo=!1;function xc(){Bo||(Bo=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function _r(e){var t=k,r=V;fe(null),Ne(null);try{return e()}finally{fe(t),Ne(r)}}function bc(e,t,r,n=r){e.addEventListener(t,()=>_r(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),xc()}function Ba(e){V===null&&(k===null&&Du(),Iu()),Gt&&Bu()}function Ec(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ue(e,t,r){var n=V;n!==null&&(n.f&ve)!==0&&(e|=ve);var s={ctx:$,deps:null,nodes:null,f:e|he|Ae,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{fr(s),s.f|=bn}catch(i){throw de(s),i}else t!==null&&Ct(s);var o=s;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&hr)===0&&(o=o.first,(e&Oe)!==0&&(e&ft)!==0&&o!==null&&(o.f|=ft)),o!==null&&(o.parent=n,n!==null&&Ec(o,n),k!==null&&(k.f&J)!==0&&(e&Dt)===0)){var a=k;(a.effects??=[]).push(o)}return s}function kr(){return k!==null&&!Me}function yn(e){const t=Ue(pn,null,!1);return Z(t,Q),t.teardown=e,t}function ps(e){Ba();var t=V.f,r=!k&&(t&et)!==0&&(t&bn)===0;if(r){var n=$;(n.e??=[]).push(e)}else return Ia(e)}function Ia(e){return Ue(Bs|va,e,!1)}function yc(e){return Ba(),Ue(pn|va,e,!0)}function gc(e){De.ensure();const t=Ue(Dt|hr,e,!0);return(r={})=>new Promise(n=>{r.outro?At(t,()=>{de(t),n(void 0)}):(de(t),n(void 0))})}function Gs(e){return Ue(Bs,e,!1)}function Nt(e,t){var r=$,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=gn(()=>{e(),!n.ran&&(n.ran=!0,we(t))})}function kt(){var e=$;gn(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&Q)!==0&&Z(r,Fe),vr(r)&&fr(r),t.ran=!1}})}function Rc(e){return Ue(Is|hr,e,!0)}function gn(e,t=0){return Ue(pn|t,e,!0)}function Te(e,t=[],r=[],n=[]){cc(n,t,r,s=>{Ue(pn,()=>e(...s.map(p)),!0)})}function Rn(e,t=0){var r=Ue(Oe|t,e,!0);return r}function ye(e){return Ue(et|hr,e,!0)}function Da(e){var t=e.teardown;if(t!==null){const r=Gt,n=k;Do(!0),fe(null);try{t.call(null)}finally{Do(r),fe(n)}}}function Ma(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&_r(()=>{s.abort(nr)});var n=r.next;(r.f&Dt)!==0?r.parent=null:de(r,t),r=n}}function Sc(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&et)===0&&de(t),t=r}}function de(e,t=!0){var r=!1;(t||(e.f&_a)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Tc(e.nodes.start,e.nodes.end),r=!0),Ma(e,t&&!r),ln(e,0),Z(e,je);var n=e.nodes&&e.nodes.t;if(n!==null)for(const o of n)o.stop();Da(e);var s=e.parent;s!==null&&s.first!==null&&Na(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Tc(e,t){for(;e!==null;){var r=e===t?null:zr(e);e.remove(),e=r}}function Na(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function At(e,t,r=!0){var n=[];ka(e,n,!0);var s=()=>{r&&de(e),t&&t()},o=n.length;if(o>0){var a=()=>--o||s();for(var i of n)i.out(a)}else s()}function ka(e,t,r){if((e.f&ve)===0){e.f^=ve;var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)(i.is_global||r)&&t.push(i);for(var s=e.first;s!==null;){var o=s.next,a=(s.f&ft)!==0||(s.f&et)!==0&&(e.f&Oe)!==0;ka(s,t,a?r:!1),s=o}}}function Ls(e){Ga(e,!0)}function Ga(e,t){if((e.f&ve)!==0){e.f^=ve,(e.f&Q)===0&&(Z(e,he),Ct(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&ft)!==0||(r.f&et)!==0;Ga(r,s?t:!1),r=n}var o=e.nodes&&e.nodes.t;if(o!==null)for(const a of o)(a.is_global||t)&&a.in()}}function La(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var s=r===n?null:zr(r);t.append(r),r=s}}let rr=null;function Ac(e){var t=rr;try{if(rr=new Set,we(e),t!==null)for(var r of rr)t.add(r);return rr}finally{rr=t}}function Io(e){for(var t of Ac(e))It(t,t.v)}let Ft=!1;function an(e){Ft=e}let Gt=!1;function Do(e){Gt=e}let k=null,Me=!1;function fe(e){k=e}let V=null;function Ne(e){V=e}let Ze=null;function Fc(e){k!==null&&(Ze===null?Ze=[e]:Ze.push(e))}let le=null,_e=0,Ee=null;function wc(e){Ee=e}let Oa=1,Gr=0,wt=Gr;function Mo(e){wt=e}function Ua(){return++Oa}function vr(e){var t=e.f;if((t&he)!==0)return!0;if(t&J&&(e.f&=~Pt),(t&Fe)!==0){var r=e.deps;if(r!==null)for(var n=r.length,s=0;s<n;s++){var o=r[s];if(vr(o)&&Sa(o),o.wv>e.wv)return!0}(t&Ae)!==0&&ge===null&&Z(e,Q)}return!1}function Va(e,t,r=!0){var n=e.reactions;if(n!==null&&!Ze?.includes(e))for(var s=0;s<n.length;s++){var o=n[s];(o.f&J)!==0?Va(o,t,!1):t===o&&(r?Z(o,he):(o.f&Q)!==0&&Z(o,Fe),Ct(o))}}function za(e){var t=le,r=_e,n=Ee,s=k,o=Ze,a=$,i=Me,l=wt,u=e.f;le=null,_e=0,Ee=null,k=(u&(et|Dt))===0?e:null,Ze=null,ur(e.ctx),Me=!1,wt=++Gr,e.ac!==null&&(_r(()=>{e.ac.abort(nr)}),e.ac=null);try{e.f|=ms;var f=e.fn,h=f(),c=e.deps;if(le!==null){var d;if(ln(e,_e),c!==null&&_e>0)for(c.length=_e+le.length,d=0;d<le.length;d++)c[_e+d]=le[d];else e.deps=c=le;if(kr()&&(e.f&Ae)!==0)for(d=_e;d<c.length;d++)(c[d].reactions??=[]).push(e)}else c!==null&&_e<c.length&&(ln(e,_e),c.length=_e);if(Vr()&&Ee!==null&&!Me&&c!==null&&(e.f&(J|Fe|he))===0)for(d=0;d<Ee.length;d++)Va(Ee[d],e);return s!==null&&s!==e&&(Gr++,Ee!==null&&(n===null?n=Ee:n.push(...Ee))),(e.f&it)!==0&&(e.f^=it),h}catch(m){return Ea(m)}finally{e.f^=ms,le=t,_e=r,Ee=n,k=s,Ze=o,ur(a),Me=i,wt=l}}function Pc(e,t){let r=t.reactions;if(r!==null){var n=yu.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&J)!==0&&(le===null||!le.includes(t))&&(Z(t,Fe),(t.f&Ae)!==0&&(t.f^=Ae,t.f&=~Pt),Ra(t),ln(t,0))}function ln(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Pc(e,r[n])}function fr(e){var t=e.f;if((t&je)===0){Z(e,Q);var r=V,n=Ft;V=e,Ft=!0;try{(t&(Oe|Fu))!==0?Sc(e):Ma(e),Da(e);var s=za(e);e.teardown=typeof s=="function"?s:null,e.wv=Oa;var o;ds&&tc&&(e.f&he)!==0&&e.deps}finally{Ft=n,V=r}}}function p(e){var t=e.f,r=(t&J)!==0;if(rr?.add(e),k!==null&&!Me){var n=V!==null&&(V.f&je)!==0;if(!n&&!Ze?.includes(e)){var s=k.deps;if((k.f&ms)!==0)e.rv<Gr&&(e.rv=Gr,le===null&&s!==null&&s[_e]===e?_e++:le===null?le=[e]:le.includes(e)||le.push(e));else{(k.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[k]:o.includes(k)||o.push(k)}}}if(Gt){if(at.has(e))return at.get(e);if(r){var a=e,i=a.v;return((a.f&Q)===0&&a.reactions!==null||Xa(a))&&(i=Ns(a)),at.set(a,i),i}}else r&&(!ge?.has(e)||H?.is_fork&&!kr())&&(a=e,vr(a)&&Sa(a),Ft&&kr()&&(a.f&Ae)===0&&Ha(a));if(ge?.has(e))return ge.get(e);if((e.f&it)!==0)throw e.v;return e.v}function Ha(e){if(e.deps!==null){e.f^=Ae;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&J)!==0&&(t.f&Ae)===0&&Ha(t)}}function Xa(e){if(e.v===re)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(at.has(t)||(t.f&J)!==0&&Xa(t))return!0;return!1}function we(e){var t=Me;try{return Me=!0,e()}finally{Me=t}}const Cc=-7169;function Z(e,t){e.f=e.f&Cc|t}function ke(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Qe in e)xs(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Qe in r&&xs(r)}}}function xs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{xs(e[n],t)}catch{}const r=Cs(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=ha(r);for(let s in n){const o=n[s].get;if(o)try{o.call(e)}catch{}}}}}const Bc=["touchstart","touchmove"];function Ic(e){return Bc.includes(e)}const Dc=new Set,No=new Set;function Mc(e,t,r,n={}){function s(o){if(n.capture||Ir.call(t,o),!o.cancelBubble)return _r(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Mt(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function ir(e,t,r,n,s){var o={capture:n,passive:s},a=Mc(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&yn(()=>{t.removeEventListener(e,a,o)})}let ko=null;function Ir(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;ko=e;var a=0,i=ko===e&&e.__root;if(i){var l=s.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;l<=u&&(a=l)}if(o=s[a]||e.target,o!==t){gu(e,"currentTarget",{configurable:!0,get(){return o||r}});var f=k,h=V;fe(null),Ne(null);try{for(var c,d=[];o!==null;){var m=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+n];_!=null&&(!o.disabled||e.target===o)&&_.call(o,e)}catch(v){c?d.push(v):c=v}if(e.cancelBubble||m===t||m===null)break;o=m}if(c){for(let v of d)queueMicrotask(()=>{throw v});throw c}}finally{e.__root=t,delete e.currentTarget,fe(f),Ne(h)}}}function Nc(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function $a(e,t){var r=V;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function ee(e,t){var r=(t&ju)!==0,n,s=!e.startsWith("<!>");return()=>{n===void 0&&(n=Nc(s?e:"<!>"+e),n=ks(n));var o=r||Fa?document.importNode(n,!0):n.cloneNode(!0);return $a(o,o),o}}function ae(){var e=document.createDocumentFragment(),t=document.createComment(""),r=lt();return e.append(t,r),$a(t,r),e}function G(e,t){e!==null&&e.before(t)}let bs=!0;function Je(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function kc(e,t){return Gc(e,t)}const Qt=new Map;function Gc(e,{target:t,anchor:r,props:n={},events:s,context:o,intro:a=!0}){vc();var i=new Set,l=h=>{for(var c=0;c<h.length;c++){var d=h[c];if(!i.has(d)){i.add(d);var m=Ic(d);t.addEventListener(d,Ir,{passive:m});var _=Qt.get(d);_===void 0?(document.addEventListener(d,Ir,{passive:m}),Qt.set(d,1)):Qt.set(d,_+1)}}};l(vn(Dc)),No.add(l);var u=void 0,f=gc(()=>{var h=r??t.appendChild(lt());return lc(h,{pending:()=>{}},c=>{if(o){pe({});var d=$;d.c=o}s&&(n.$$events=s),bs=a,u=e(c,n)||{},bs=!0,o&&xe()}),()=>{for(var c of i){t.removeEventListener(c,Ir);var d=Qt.get(c);--d===0?(document.removeEventListener(c,Ir),Qt.delete(c)):Qt.set(c,d)}No.delete(l),h!==r&&h.parentNode?.removeChild(h)}});return Lc.set(u,f),u}let Lc=new WeakMap;class qa{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(t,r=!0){this.anchor=t,this.#l=r}#o=()=>{var t=H;if(this.#e.has(t)){var r=this.#e.get(t),n=this.#t.get(r);if(n)Ls(n),this.#r.delete(r);else{var s=this.#n.get(r);s&&(this.#t.set(r,s.effect),this.#n.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===t)break;const i=this.#n.get(a);i&&(de(i.effect),this.#n.delete(a))}for(const[o,a]of this.#t){if(o===r||this.#r.has(o))continue;const i=()=>{if(Array.from(this.#e.values()).includes(o)){var u=document.createDocumentFragment();La(a,u),u.append(lt()),this.#n.set(o,{effect:a,fragment:u})}else de(a);this.#r.delete(o),this.#t.delete(o)};this.#l||!n?(this.#r.add(o),At(a,i,!1)):i()}}};#s=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[n,s]of this.#n)r.includes(n)||(de(s.effect),this.#n.delete(n))};ensure(t,r){var n=H,s=Ca();if(r&&!this.#t.has(t)&&!this.#n.has(t))if(s){var o=document.createDocumentFragment(),a=lt();o.append(a),this.#n.set(t,{effect:ye(()=>r(a)),fragment:o})}else this.#t.set(t,ye(()=>r(this.anchor)));if(this.#e.set(n,t),s){for(const[i,l]of this.#t)i===t?n.skipped_effects.delete(l):n.skipped_effects.add(l);for(const[i,l]of this.#n)i===t?n.skipped_effects.delete(l.effect):n.skipped_effects.add(l.effect);n.oncommit(this.#o),n.ondiscard(this.#s)}else this.#o()}}function ne(e,t,r=!1){var n=new qa(e),s=r?ft:0;function o(a,i){n.ensure(a,i)}Rn(()=>{var a=!1;t((i,l=!0)=>{a=!0,o(l,i)}),a||o(!1,null)},s)}function Oc(e,t,r){for(var n=[],s=t.length,o,a=t.length,i=0;i<s;i++){let h=t[i];At(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var c=e.outrogroups;Es(vn(o.done)),c.delete(o),c.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=n.length===0&&r!==null;if(l){var u=r,f=u.parentNode;pc(f),f.append(u),e.items.clear()}Es(t,!l)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Es(e,t=!0){for(var r=0;r<e.length;r++)de(e[r],t)}var Go;function ys(e,t,r,n,s,o=null){var a=e,i=new Map,l=(t&pa)!==0;if(l){var u=e;a=u.appendChild(lt())}var f=null,h=st(()=>{var b=r();return _n(b)?b:b==null?[]:vn(b)}),c,d=!0;function m(){v.fallback=f,Uc(v,c,a,t,n),f!==null&&(c.length===0?(f.f&We)===0?Ls(f):(f.f^=We,Dr(f,null,a)):At(f,()=>{f=null}))}var _=Rn(()=>{c=p(h);for(var b=c.length,E=new Set,y=H,R=Ca(),x=0;x<b;x+=1){var S=c[x],F=n(S,x),P=d?null:i.get(F);P?(P.v&&It(P.v,S),P.i&&It(P.i,x),R&&y.skipped_effects.delete(P.e)):(P=Vc(i,d?a:Go??=lt(),S,F,x,s,t,r),d||(P.e.f|=We),i.set(F,P)),E.add(F)}if(b===0&&o&&!f&&(d?f=ye(()=>o(a)):(f=ye(()=>o(Go??=lt())),f.f|=We)),!d)if(R){for(const[A,C]of i)E.has(A)||y.skipped_effects.add(C.e);y.oncommit(m),y.ondiscard(()=>{})}else m();p(h)}),v={effect:_,items:i,outrogroups:null,fallback:f};d=!1}function Uc(e,t,r,n,s){var o=(n&zu)!==0,a=t.length,i=e.items,l=e.effect.first,u,f=null,h,c=[],d=[],m,_,v,b;if(o)for(b=0;b<a;b+=1)m=t[b],_=s(m,b),v=i.get(_).e,(v.f&We)===0&&(v.nodes?.a?.measure(),(h??=new Set).add(v));for(b=0;b<a;b+=1){if(m=t[b],_=s(m,b),v=i.get(_).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(v),C.done.delete(v);if((v.f&We)!==0)if(v.f^=We,v===l)Dr(v,null,r);else{var E=f?f.next:l;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),rt(e,f,v),rt(e,v,E),Dr(v,E,r),f=v,c=[],d=[],l=f.next;continue}if((v.f&ve)!==0&&(Ls(v),o&&(v.nodes?.a?.unfix(),(h??=new Set).delete(v))),v!==l){if(u!==void 0&&u.has(v)){if(c.length<d.length){var y=d[0],R;f=y.prev;var x=c[0],S=c[c.length-1];for(R=0;R<c.length;R+=1)Dr(c[R],y,r);for(R=0;R<d.length;R+=1)u.delete(d[R]);rt(e,x.prev,S.next),rt(e,f,x),rt(e,S,y),l=y,f=S,b-=1,c=[],d=[]}else u.delete(v),Dr(v,l,r),rt(e,v.prev,v.next),rt(e,v,f===null?e.effect.first:f.next),rt(e,f,v),f=v;continue}for(c=[],d=[];l!==null&&l!==v;)(u??=new Set).add(l),d.push(l),l=l.next;if(l===null)continue}(v.f&We)===0&&c.push(v),f=v,l=v.next}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(Es(vn(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||u!==void 0){var F=[];if(u!==void 0)for(v of u)(v.f&ve)===0&&F.push(v);for(;l!==null;)(l.f&ve)===0&&l!==e.fallback&&F.push(l),l=l.next;var P=F.length;if(P>0){var A=(n&pa)!==0&&a===0?r:null;if(o){for(b=0;b<P;b+=1)F[b].nodes?.a?.measure();for(b=0;b<P;b+=1)F[b].nodes?.a?.fix()}Oc(e,F,A)}}o&&Mt(()=>{if(h!==void 0)for(v of h)v.nodes?.a?.apply()})}function Vc(e,t,r,n,s,o,a,i){var l=(a&Uu)!==0?(a&Hu)===0?I(r,!1,!1):Bt(r):null,u=(a&Vu)!==0?Bt(s):null;return{v:l,i:u,e:ye(()=>(o(t,l??r,u??s,i),()=>{e.delete(n)}))}}function Dr(e,t,r){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end,o=t&&(t.f&We)===0?t.nodes.start:r;n!==null;){var a=zr(n);if(o.before(n),n===s)return;n=a}}function rt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Et(e,t,r){var n=new qa(e);Rn(()=>{var s=t()??null;n.ensure(s,s&&(o=>r(o,s)))},ft)}const zc=()=>performance.now(),Ke={tick:e=>requestAnimationFrame(e),now:()=>zc(),tasks:new Set};function Ya(){const e=Ke.now();Ke.tasks.forEach(t=>{t.c(e)||(Ke.tasks.delete(t),t.f())}),Ke.tasks.size!==0&&Ke.tick(Ya)}function Hc(e){let t;return Ke.tasks.size===0&&Ke.tick(Ya),{promise:new Promise(r=>{Ke.tasks.add(t={c:e,f:r})}),abort(){Ke.tasks.delete(t)}}}function Yr(e,t){_r(()=>{e.dispatchEvent(new CustomEvent(t))})}function Xc(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Lo(e){const t={},r=e.split(";");for(const n of r){const[s,o]=n.split(":");if(!s||o===void 0)break;const a=Xc(s.trim());t[a]=o.trim()}return t}const $c=e=>e;function qc(e,t,r,n){var s=(e&Wu)!==0,o="both",a,i=t.inert,l=t.style.overflow,u,f;function h(){return _r(()=>a??=r()(t,n?.()??{},{direction:o}))}var c={is_global:s,in(){t.inert=i,Yr(t,"introstart"),u=gs(t,h(),f,1,()=>{Yr(t,"introend"),u?.abort(),u=a=void 0,t.style.overflow=l})},out(v){t.inert=!0,Yr(t,"outrostart"),f=gs(t,h(),u,0,()=>{Yr(t,"outroend"),v?.()})},stop:()=>{u?.abort(),f?.abort()}},d=V;if((d.nodes.t??=[]).push(c),bs){var m=s;if(!m){for(var _=d.parent;_&&(_.f&ft)!==0;)for(;(_=_.parent)&&(_.f&Oe)===0;);m=!_||(_.f&bn)!==0}m&&Gs(()=>{we(()=>c.in())})}}function gs(e,t,r,n,s){var o=n===1;if(Tu(t)){var a,i=!1;return Mt(()=>{if(!i){var v=t({direction:o?"in":"out"});a=gs(e,v,r,n,s)}}),{abort:()=>{i=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r?.deactivate(),!t?.duration)return s(),{abort:wr,deactivate:wr,reset:wr,t:()=>n};const{delay:l=0,css:u,tick:f,easing:h=$c}=t;var c=[];if(o&&r===void 0&&(f&&f(0,1),u)){var d=Lo(u(0,1));c.push(d,d)}var m=()=>1-n,_=e.animate(c,{duration:l,fill:"forwards"});return _.onfinish=()=>{_.cancel();var v=r?.t()??1-n;r?.abort();var b=n-v,E=t.duration*Math.abs(b),y=[];if(E>0){var R=!1;if(u)for(var x=Math.ceil(E/16.666666666666668),S=0;S<=x;S+=1){var F=v+b*h(S/x),P=Lo(u(F,1-F));y.push(P),R||=P.overflow==="hidden"}R&&(e.style.overflow="hidden"),m=()=>{var A=_.currentTime;return v+b*h(A/E)},f&&Hc(()=>{if(_.playState!=="running")return!1;var A=m();return f(A,1-A),!0})}_=e.animate(y,{duration:E,fill:"forwards"}),_.onfinish=()=>{m=()=>n,f?.(n,1-n),s()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=wr)},deactivate:()=>{s=wr},reset:()=>{n===0&&f?.(1,0)},t:()=>m()}}const Oo=[...` 	
\r\fÂ \v\uFEFF`];function Yc(e,t,r){var n=e==null?"":""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,a=0;(a=n.indexOf(s,a))>=0;){var i=a+o;(a===0||Oo.includes(n[a-1]))&&(i===n.length||Oo.includes(n[i]))?n=(a===0?"":n.substring(0,a))+n.substring(i+1):a=i}}return n===""?null:n}function Rs(e,t,r,n,s,o){var a=e.__className;if(a!==r||a===void 0){var i=Yc(r,n,o);i==null?e.removeAttribute("class"):e.className=i,e.__className=r}else if(o&&s!==o)for(var l in o){var u=!!o[l];(s==null||u!==!!s[l])&&e.classList.toggle(l,u)}return o}function Ka(e,t,r=!1){if(e.multiple){if(t==null)return;if(!_n(t))return Zu();for(var n of e.options)n.selected=t.includes(Nr(n));return}for(n of e.options){var s=Nr(n);if(_c(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Kc(e){var t=new MutationObserver(()=>{Ka(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),yn(()=>{t.disconnect()})}function Uo(e,t,r=t){var n=new WeakSet,s=!0;bc(e,"change",o=>{var a=o?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(a),Nr);else{var l=e.querySelector(a)??e.querySelector("option:not([disabled])");i=l&&Nr(l)}r(i),H!==null&&n.add(H)}),Gs(()=>{var o=t();if(e===document.activeElement){var a=en??H;if(n.has(a))return}if(Ka(e,o,s),s&&o===void 0){var i=e.querySelector(":checked");i!==null&&(o=Nr(i),r(o))}e.__value=o,s=!1}),Kc(e)}function Nr(e){return"__value"in e?e.__value:e.value}const Wc=Symbol("is custom element"),jc=Symbol("is html");function Qc(e,t){var r=Os(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Zc(e,t){var r=Os(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function tn(e,t,r,n){var s=Os(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Pu]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Jc(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Os(e){return e.__attributes??={[Wc]:e.nodeName.includes("-"),[jc]:e.namespaceURI===Qu}}var Vo=new Map;function Jc(e){var t=e.getAttribute("is")||e.nodeName,r=Vo.get(t);if(r)return r;Vo.set(t,r=[]);for(var n,s=e,o=Element.prototype;o!==s;){n=ha(s);for(var a in n)n[a].set&&r.push(a);s=Cs(s)}return r}function ef(e,t,r){var n=Tt(e,t);n&&n.set&&(e[t]=r,yn(()=>{e[t]=null}))}function zo(e,t){return e===t||e?.[Qe]===t}function os(e={},t,r,n){return Gs(()=>{var s,o;return gn(()=>{s=o,o=[],we(()=>{e!==r(...o)&&(t(e,...o),s&&zo(r(...s),e)&&t(null,...s))})}),()=>{Mt(()=>{o&&zo(r(...o),e)&&t(null,...o)})}}),e}function Ve(e=!1){const t=$,r=t.l.u;if(!r)return;let n=()=>ke(t.s);if(e){let s=0,o={};const a=En(()=>{let i=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],i=!0);return i&&s++,s});n=()=>p(a)}r.b.length&&yc(()=>{Ho(t,n),hs(r.b)}),ps(()=>{const s=we(()=>r.m.map(Au));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&ps(()=>{Ho(t,n),hs(r.a)})}function Ho(e,t){if(e.l.s)for(const r of e.l.s)p(r);t()}let Kr=!1;function tf(e){var t=Kr;try{return Kr=!1,[e(),Kr]}finally{Kr=t}}function Y(e,t,r,n){var s=!mr||(r&$u)!==0,o=(r&Yu)!==0,a=(r&Ku)!==0,i=n,l=!0,u=()=>(l&&(l=!1,i=a?we(n):n),i),f;if(o){var h=Qe in e||wu in e;f=Tt(e,t)?.set??(h&&t in e?y=>e[t]=y:void 0)}var c,d=!1;o?[c,d]=tf(()=>e[t]):c=e[t],c===void 0&&n!==void 0&&(c=u(),f&&(s&&Nu(),f(c)));var m;if(s?m=()=>{var y=e[t];return y===void 0?u():(l=!0,y)}:m=()=>{var y=e[t];return y!==void 0&&(i=void 0),y===void 0?i:y},s&&(r&qu)===0)return m;if(f){var _=e.$$legacy;return(function(y,R){return arguments.length>0?((!s||!R||_||d)&&f(R?m():y),y):m()})}var v=!1,b=((r&Xu)!==0?En:st)(()=>(v=!1,m()));o&&p(b);var E=V;return(function(y,R){if(arguments.length>0){const x=R?p(b):s&&o?or(y):y;return g(b,x),v=!0,i!==void 0&&(i=x),y}return Gt&&v||(E.f&je)!==0?b.v:p(b)})}function Wa(e){$===null&&Ds(),mr&&$.l!==null?sf($).m.push(e):ps(()=>{const t=we(e);if(typeof t=="function")return t})}function rf(e){$===null&&Ds(),Wa(()=>()=>we(e))}function nf(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Us(){const e=$;return e===null&&Ds(),(t,r,n)=>{const s=e.s.$$events?.[t];if(s){const o=_n(s)?s.slice():[s],a=nf(t,r,n);for(const i of o)i.call(e.x,a);return!a.defaultPrevented}return!0}}function sf(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const of="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(of);rc();let Vs=Float32Array;function zs(e,t,r){const n=new Vs(3);return e&&(n[0]=e),t&&(n[1]=t),r&&(n[2]=r),n}function af(e,t,r){return r=r||new Vs(3),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function lf(e,t,r){return r=r||new Vs(3),r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}let ja=Float32Array;function uf(e){return e=e||new ja(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cf(e,t){t=t||new ja(16);const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],u=e[7],f=e[8],h=e[9],c=e[10],d=e[11],m=e[12],_=e[13],v=e[14],b=e[15],E=c*b,y=v*d,R=l*b,x=v*u,S=l*d,F=c*u,P=s*b,A=v*o,C=s*d,U=c*o,oe=s*u,j=l*o,me=f*_,be=m*h,Ce=a*_,Xe=m*i,$e=a*h,qe=f*i,pt=r*_,Ut=m*n,Vt=r*h,zt=f*n,xt=r*i,bt=a*n,br=E*i+x*h+S*_-(y*i+R*h+F*_),Er=y*n+P*h+U*_-(E*n+A*h+C*_),Ht=R*n+A*i+oe*_-(x*n+P*i+j*_),$r=F*n+C*i+j*h-(S*n+U*i+oe*h),W=1/(r*br+a*Er+f*Ht+m*$r);return t[0]=W*br,t[1]=W*Er,t[2]=W*Ht,t[3]=W*$r,t[4]=W*(y*a+R*f+F*m-(E*a+x*f+S*m)),t[5]=W*(E*r+A*f+C*m-(y*r+P*f+U*m)),t[6]=W*(x*r+P*a+j*m-(R*r+A*a+oe*m)),t[7]=W*(S*r+U*a+oe*f-(F*r+C*a+j*f)),t[8]=W*(me*u+Xe*d+$e*b-(be*u+Ce*d+qe*b)),t[9]=W*(be*o+pt*d+zt*b-(me*o+Ut*d+Vt*b)),t[10]=W*(Ce*o+Ut*u+xt*b-(Xe*o+pt*u+bt*b)),t[11]=W*(qe*o+Vt*u+bt*d-($e*o+zt*u+xt*d)),t[12]=W*(Ce*c+qe*v+be*l-($e*v+me*l+Xe*c)),t[13]=W*(Vt*v+me*s+Ut*c-(pt*c+zt*v+be*s)),t[14]=W*(pt*l+bt*v+Xe*s-(xt*v+Ce*s+Ut*l)),t[15]=W*(xt*c+$e*s+zt*l-(Vt*l+bt*c+qe*s)),t}function ff(e,t,r){r=r||zs();const n=t[0],s=t[1],o=t[2],a=n*e[3]+s*e[7]+o*e[11]+e[15];return r[0]=(n*e[0]+s*e[4]+o*e[8]+e[12])/a,r[1]=(n*e[1]+s*e[5]+o*e[9]+e[13])/a,r[2]=(n*e[2]+s*e[6]+o*e[10]+e[14])/a,r}function df(e,t,r){r=r||zs();const n=t[0],s=t[1],o=t[2];return r[0]=n*e[0]+s*e[4]+o*e[8],r[1]=n*e[1]+s*e[5]+o*e[9],r[2]=n*e[2]+s*e[6]+o*e[10],r}const Hs=5120,Lr=5121,Xs=5122,$s=5123,qs=5124,Ys=5125,Ks=5126,hf=32819,mf=32820,_f=33635,vf=5131,pf=33640,xf=35899,bf=35902,Ef=36269,yf=34042,Qa={};{const e=Qa;e[Hs]=Int8Array,e[Lr]=Uint8Array,e[Xs]=Int16Array,e[$s]=Uint16Array,e[qs]=Int32Array,e[Ys]=Uint32Array,e[Ks]=Float32Array,e[hf]=Uint16Array,e[mf]=Uint16Array,e[_f]=Uint16Array,e[vf]=Uint16Array,e[pf]=Uint32Array,e[xf]=Uint32Array,e[bf]=Uint32Array,e[Ef]=Uint32Array,e[yf]=Uint32Array}function Sn(e){if(e instanceof Int8Array)return Hs;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Lr;if(e instanceof Int16Array)return Xs;if(e instanceof Uint16Array)return $s;if(e instanceof Int32Array)return qs;if(e instanceof Uint32Array)return Ys;if(e instanceof Float32Array)return Ks;throw new Error("unsupported typed array type")}function Za(e){if(e===Int8Array)return Hs;if(e===Uint8Array||e===Uint8ClampedArray)return Lr;if(e===Int16Array)return Xs;if(e===Uint16Array)return $s;if(e===Int32Array)return qs;if(e===Uint32Array)return Ys;if(e===Float32Array)return Ks;throw new Error("unsupported typed array type")}function Ja(e){const t=Qa[e];if(!t)throw new Error("unknown gl type");return t}const Or=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function gf(e,t,r){e.forEach(function(n){const s=t[n];s!==void 0&&(r[n]=s)})}function el(...e){console.error(...e)}const Xo=new Map;function Tn(e,t){if(!e||typeof e!="object")return!1;let r=Xo.get(t);r||(r=new WeakMap,Xo.set(t,r));let n=r.get(e);if(n===void 0){const s=Object.prototype.toString.call(e);n=s.substring(8,s.length-1)===t,r.set(e,n)}return n}function Rf(e,t){return typeof WebGLBuffer<"u"&&Tn(t,"WebGLBuffer")}function tl(e,t){return typeof WebGLRenderbuffer<"u"&&Tn(t,"WebGLRenderbuffer")}function An(e,t){return typeof WebGLTexture<"u"&&Tn(t,"WebGLTexture")}function Sf(e,t){return typeof WebGLSampler<"u"&&Tn(t,"WebGLSampler")}const rl=35044,ut=34962,nl=34963,Tf=34660,Af=5120,Ff=5121,wf=5122,Pf=5123,Cf=5124,Bf=5125,sl=5126,ol={attribPrefix:""};function If(e,t,r,n,s){e.bindBuffer(t,r),e.bufferData(t,n,s||rl)}function Ws(e,t,r,n){if(Rf(e,t))return t;r=r||ut;const s=e.createBuffer();return If(e,r,s,t,n),s}function il(e){return e==="indices"}function Df(e){return e===Int8Array||e===Uint8Array}function js(e){return e.length?e:e.data}const Mf=/coord|texture/i,Nf=/color|colour/i;function kf(e,t){let r;if(Mf.test(e)?r=2:Nf.test(e)?r=4:r=3,t%r>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function Qs(e,t,r){return e.numComponents||e.size||kf(t,r||js(e).length)}function Fn(e,t){if(Or(e))return e;if(Or(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type?Zs(e.type):void 0;return r||(il(t)?r=Uint16Array:r=Float32Array),new r(e.data)}function Gf(e){return typeof e=="number"?e:e?Za(e):sl}function Zs(e){return typeof e=="number"?Ja(e):e||Float32Array}function Lf(e,t){return{buffer:t.buffer,numValues:24,type:Gf(t.type),arrayType:Zs(t.type)}}function Of(e,t){const r=t.data||t,n=Zs(t.type),s=r*n.BYTES_PER_ELEMENT,o=e.createBuffer();return e.bindBuffer(ut,o),e.bufferData(ut,s,t.drawType||rl),{buffer:o,numValues:r,type:Za(n),arrayType:n}}function Uf(e,t,r){const n=Fn(t,r);return{arrayType:n.constructor,buffer:Ws(e,n,void 0,t.drawType),type:Sn(n),numValues:0}}function Vf(e,t){const r={};return Object.keys(t).forEach(function(n){if(!il(n)){const s=t[n],o=s.attrib||s.name||s.attribName||ol.attribPrefix+n;if(s.value){if(!Array.isArray(s.value)&&!Or(s.value))throw new Error("array.value is not array or typedarray");r[o]={value:s.value}}else{let a;s.buffer&&s.buffer instanceof WebGLBuffer?a=Lf:typeof s=="number"||typeof s.data=="number"?a=Of:a=Uf;const{buffer:i,type:l,numValues:u,arrayType:f}=a(e,s,n),h=s.normalize!==void 0?s.normalize:Df(f),c=Qs(s,n,u);r[o]={buffer:i,numComponents:c,type:l,normalize:h,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),e.bindBuffer(ut,null),r}function zf(e,t){return t===Af||t===Ff?1:t===wf||t===Pf?2:t===Cf||t===Bf||t===sl?4:0}const ar=["position","positions","a_position"];function Hf(e){let t,r;for(r=0;r<ar.length&&(t=ar[r],!(t in e));++r);r===ar.length&&(t=Object.keys(e)[0]);const n=e[t],s=js(n).length;if(s===void 0)return 1;const o=Qs(n,t),a=s/o;if(s%o>0)throw new Error(`numComponents ${o} not correct for length ${s}`);return a}function Xf(e,t){let r,n;for(n=0;n<ar.length&&(r=ar[n],!(r in t||(r=ol.attribPrefix+r,r in t)));++n);n===ar.length&&(r=Object.keys(t)[0]);const s=t[r];if(!s.buffer)return 1;e.bindBuffer(ut,s.buffer);const o=e.getBufferParameter(ut,Tf);e.bindBuffer(ut,null);const a=zf(e,s.type),i=o/a,l=s.numComponents||s.size,u=i/l;if(u%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return u}function $f(e,t,r){const n=Vf(e,t),s=Object.assign({},r||{});s.attribs=Object.assign({},r?r.attribs:{},n);const o=t.indices;if(o){const a=Fn(o,"indices");s.indices=Ws(e,a,nl),s.numElements=a.length,s.elementType=Sn(a)}else s.numElements||(s.numElements=Xf(e,s.attribs));return s}function qf(e,t,r){const n=r==="indices"?nl:ut,s=Fn(t,r);return Ws(e,s,n)}function Yf(e,t){const r={};return Object.keys(t).forEach(function(n){r[n]=qf(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=Sn(Fn(t.indices))):r.numElements=Hf(t),r}const Rt=js,Kf=Qs;function al(e,t){let r=0;return e.push=function(){for(let n=0;n<arguments.length;++n){const s=arguments[n];if(s instanceof Array||Or(s))for(let o=0;o<s.length;++o)e[r++]=s[o];else e[r++]=s}},e.reset=function(n){r=n||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function D(e,t,r){const n=r||Float32Array;return al(new n(e*t),e)}function Wf(e){return e!=="indices"}function jf(e){const t=e.indices,r={},n=t.length;function s(o){const a=e[o],i=a.numComponents,l=D(i,n,a.constructor);for(let u=0;u<n;++u){const h=t[u]*i;for(let c=0;c<i;++c)l.push(a[h+c])}r[o]=l}return Object.keys(e).filter(Wf).forEach(s),r}function Qf(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,r=t.length;for(let n=0;n<r;n+=9){const s=t[n+0],o=t[n+1],a=t[n+2],i=t[n+3],l=t[n+4],u=t[n+5],f=t[n+6],h=t[n+7],c=t[n+8];let d=s+i+f,m=o+l+h,_=a+u+c;const v=Math.sqrt(d*d+m*m+_*_);d/=v,m/=v,_/=v,t[n+0]=d,t[n+1]=m,t[n+2]=_,t[n+3]=d,t[n+4]=m,t[n+5]=_,t[n+6]=d,t[n+7]=m,t[n+8]=_}return e}function Js(e,t,r){const n=e.length,s=new Float32Array(3);for(let o=0;o<n;o+=3)r(t,[e[o],e[o+1],e[o+2]],s),e[o]=s[0],e[o+1]=s[1],e[o+2]=s[2]}function Zf(e,t,r){r=r||zs();const n=t[0],s=t[1],o=t[2];return r[0]=n*e[0]+s*e[1]+o*e[2],r[1]=n*e[4]+s*e[5]+o*e[6],r[2]=n*e[8]+s*e[9]+o*e[10],r}function ll(e,t){return Js(e,t,df),e}function ul(e,t){return Js(e,cf(t),Zf),e}function cl(e,t){return Js(e,t,ff),e}function fl(e,t){return Object.keys(e).forEach(function(r){const n=e[r];r.indexOf("pos")>=0?cl(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?ll(n,t):r.indexOf("norm")>=0&&ul(n,t)}),e}function eo(e,t,r){return e=e||2,t=t||0,r=r||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,r+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function to(e,t,r,n,s){e=e||1,t=t||1,r=r||1,n=n||1,s=s||uf();const o=(r+1)*(n+1),a=D(3,o),i=D(3,o),l=D(2,o);for(let c=0;c<=n;c++)for(let d=0;d<=r;d++){const m=d/r,_=c/n;a.push(e*m-e*.5,0,t*_-t*.5),i.push(0,1,0),l.push(m,_)}const u=r+1,f=D(3,r*n*2,Uint16Array);for(let c=0;c<n;c++)for(let d=0;d<r;d++)f.push((c+0)*u+d,(c+1)*u+d,(c+0)*u+d+1),f.push((c+1)*u+d,(c+1)*u+d+1,(c+0)*u+d+1);return fl({position:a,normal:i,texcoord:l,indices:f},s)}function ro(e,t,r,n,s,o,a){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,s=s||Math.PI,o=o||0,a=a||Math.PI*2;const i=s-n,l=a-o,u=(t+1)*(r+1),f=D(3,u),h=D(3,u),c=D(2,u);for(let _=0;_<=r;_++)for(let v=0;v<=t;v++){const b=v/t,E=_/r,y=l*b+o,R=i*E+n,x=Math.sin(y),S=Math.cos(y),F=Math.sin(R),P=Math.cos(R),A=S*F,C=P,U=x*F;f.push(e*A,e*C,e*U),h.push(A,C,U),c.push(1-b,E)}const d=t+1,m=D(3,t*r*2,Uint16Array);for(let _=0;_<t;_++)for(let v=0;v<r;v++)m.push((v+0)*d+_,(v+0)*d+_+1,(v+1)*d+_),m.push((v+1)*d+_,(v+0)*d+_+1,(v+1)*d+_+1);return{position:f,normal:h,texcoord:c,indices:m}}const Jf=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function no(e){e=e||1;const t=e/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],s=[[1,0],[0,0],[0,1],[1,1]],o=24,a=D(3,o),i=D(3,o),l=D(2,o),u=D(3,12,Uint16Array);for(let f=0;f<6;++f){const h=Jf[f];for(let d=0;d<4;++d){const m=r[h[d]],_=n[f],v=s[d];a.push(m),i.push(_),l.push(v)}const c=4*f;u.push(c+0,c+1,c+2),u.push(c+0,c+2,c+3)}return{position:a,normal:i,texcoord:l,indices:u}}function wn(e,t,r,n,s,o,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(s<1)throw new Error("verticalSubdivisions must be 1 or greater");const i=o===void 0?!0:o,l=a===void 0?!0:a,u=(i?2:0)+(l?2:0),f=(n+1)*(s+1+u),h=D(3,f),c=D(3,f),d=D(2,f),m=D(3,n*(s+u/2)*2,Uint16Array),_=n+1,v=Math.atan2(e-t,r),b=Math.cos(v),E=Math.sin(v),y=i?-2:0,R=s+(l?2:0);for(let x=y;x<=R;++x){let S=x/s,F=r*S,P;x<0?(F=0,S=1,P=e):x>s?(F=r,S=1,P=t):P=e+(t-e)*(x/s),(x===-2||x===s+2)&&(P=0,S=0),F-=r/2;for(let A=0;A<_;++A){const C=Math.sin(A*Math.PI*2/n),U=Math.cos(A*Math.PI*2/n);h.push(C*P,F,U*P),x<0?c.push(0,-1,0):x>s?c.push(0,1,0):P===0?c.push(0,0,0):c.push(C*b,E,U*b),d.push(A/n,1-S)}}for(let x=0;x<s+u;++x)if(!(x===1&&i||x===s+u-2&&l))for(let S=0;S<n;++S)m.push(_*(x+0)+0+S,_*(x+0)+1+S,_*(x+1)+1+S),m.push(_*(x+0)+0+S,_*(x+1)+1+S,_*(x+1)+0+S);return{position:h,normal:c,texcoord:d,indices:m}}function $o(e,t){t=t||[];const r=[];for(let n=0;n<e.length;n+=4){const s=e[n],o=e.slice(n+1,n+4);o.push.apply(o,t);for(let a=0;a<s;++a)r.push.apply(r,o)}return r}function so(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],r=$o([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=$o([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),s=e.length/3,o={position:D(3,s),texcoord:D(2,s),normal:D(3,s),color:D(4,s,Uint8Array),indices:D(3,s/3,Uint16Array)};o.position.push(e),o.texcoord.push(t),o.normal.push(r),o.color.push(n);for(let a=0;a<s;++a)o.indices.push(a);return o}function Pn(e,t,r,n,s,o,a){if(s<=0)throw new Error("subdivisionDown must be > 0");o=o||0,a=a||1;const i=2,l=a-o,u=(s+1)*2*(2+i),f=D(3,u),h=D(3,u),c=D(2,u);function d(E,y,R){return E+(y-E)*R}function m(E,y,R,x,S,F){for(let P=0;P<=s;P++){const A=y/(i-1),C=P/s,U=(A-.5)*2,oe=(o+C*l)*Math.PI,j=Math.sin(oe),me=Math.cos(oe),be=d(e,E,j),Ce=U*n,Xe=me*e,$e=j*be;f.push(Ce,Xe,$e);const qe=af(lf([0,j,me],R),x);h.push(qe),c.push(A*S+F,C)}}for(let E=0;E<i;E++){const y=(E/(i-1)-.5)*2;m(t,E,[1,1,1],[0,0,0],1,0),m(t,E,[0,0,0],[y,0,0],0,0),m(r,E,[1,1,1],[0,0,0],1,0),m(r,E,[0,0,0],[y,0,0],0,1)}const _=D(3,s*2*(2+i),Uint16Array);function v(E,y){for(let R=0;R<s;++R)_.push(E+R+0,E+R+1,y+R+0),_.push(E+R+1,y+R+1,y+R+0)}const b=s+1;return v(b*0,b*4),v(b*5,b*7),v(b*6,b*2),v(b*3,b*1),{position:f,normal:h,texcoord:c,indices:_}}function oo(e,t,r,n,s,o){return wn(e,e,t,r,n,s,o)}function io(e,t,r,n,s,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");s=s||0,o=o||Math.PI*2;const a=o-s,i=r+1,l=n+1,u=i*l,f=D(3,u),h=D(3,u),c=D(2,u),d=D(3,r*n*2,Uint16Array);for(let m=0;m<l;++m){const _=m/n,v=_*Math.PI*2,b=Math.sin(v),E=e+b*t,y=Math.cos(v),R=y*t;for(let x=0;x<i;++x){const S=x/r,F=s+S*a,P=Math.sin(F),A=Math.cos(F),C=P*E,U=A*E,oe=P*b,j=A*b;f.push(C,R,U),h.push(oe,y,j),c.push(S,1-_)}}for(let m=0;m<n;++m)for(let _=0;_<r;++_){const v=1+_,b=1+m;d.push(i*m+_,i*b+_,i*m+v),d.push(i*b+_,i*b+v,i*m+v)}return{position:f,normal:h,texcoord:c,indices:d}}function ao(e,t,r,n,s){if(t<3)throw new Error("divisions must be at least 3");r=r||1,s=s||1,n=n||0;const o=(t+1)*(r+1),a=D(3,o),i=D(3,o),l=D(2,o),u=D(3,r*t*2,Uint16Array);let f=0;const h=e-n,c=t+1;for(let d=0;d<=r;++d){const m=n+h*Math.pow(d/r,s);for(let _=0;_<=t;++_){const v=2*Math.PI*_/t,b=m*Math.cos(v),E=m*Math.sin(v);if(a.push(b,0,E),i.push(0,1,0),l.push(1-_/t,d/r),d>0&&_!==t){const y=f+(_+1),R=f+_,x=f+_-c,S=f+(_+1)-c;u.push(y,R,x),u.push(y,x,S)}}f+=t+1}return{position:a,normal:i,texcoord:l,indices:u}}function ed(e){return Math.random()*e|0}function td(e,t){t=t||{};const r=e.position.numElements,n=D(4,r,Uint8Array),s=t.rand||function(o,a){return a<3?ed(256):255};if(e.color=n,e.indices)for(let o=0;o<r;++o)n.push(s(o,0),s(o,1),s(o,2),s(o,3));else{const o=t.vertsPerColor||3,a=r/o;for(let i=0;i<a;++i){const l=[s(i,0),s(i,1),s(i,2),s(i,3)];for(let u=0;u<o;++u)n.push(l)}}return e}function ze(e){return function(t){const r=e.apply(this,Array.prototype.slice.call(arguments,1));return Yf(t,r)}}function He(e){return function(t){const r=e.apply(null,Array.prototype.slice.call(arguments,1));return $f(t,r)}}const rd=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Ss(e,t,r,n){n=n||0;const s=e.length;for(let o=0;o<s;++o)t[r+o]=e[o]+n}function dl(e,t){const r=Rt(e),n=new r.constructor(t);let s=n;return r.numComponents&&r.numElements&&al(n,r.numComponents),e.data&&(s={data:n},gf(rd,e,s)),s}function nd(e){const t={};let r;for(let i=0;i<e.length;++i){const l=e[i];Object.keys(l).forEach(function(u){t[u]||(t[u]=[]),!r&&u!=="indices"&&(r=u);const f=l[u],h=Kf(f,u),d=Rt(f).length/h;t[u].push(d)})}function n(i){let l=0,u;for(let f=0;f<e.length;++f){const c=e[f][i],d=Rt(c);l+=d.length,(!u||c.data)&&(u=c)}return{length:l,spec:u}}function s(i,l,u){let f=0,h=0;for(let c=0;c<e.length;++c){const m=e[c][i],_=Rt(m);i==="indices"?(Ss(_,u,h,f),f+=l[c]):Ss(_,u,h),h+=_.length}}const o=t[r],a={};return Object.keys(t).forEach(function(i){const l=n(i),u=dl(l.spec,l.length);s(i,o,Rt(u)),a[i]=u}),a}function sd(e){const t={};return Object.keys(e).forEach(function(r){const n=e[r],s=Rt(n),o=dl(n,s.length);Ss(s,Rt(o),0),t[r]=o}),t}const od=He(so),id=ze(so),ad=He(no),ld=ze(no),ud=He(to),cd=ze(to),fd=He(ro),dd=ze(ro),hd=He(wn),md=ze(wn),_d=He(eo),vd=ze(eo),hl=He(Pn),ml=ze(Pn),pd=He(oo),xd=ze(oo),bd=He(io),Ed=ze(io),yd=He(ao),gd=ze(ao),Rd=hl,Sd=ml,Td=Pn;var Ad=Object.freeze({__proto__:null,create3DFBufferInfo:od,create3DFBuffers:id,create3DFVertices:so,createAugmentedTypedArray:D,createCubeBufferInfo:ad,createCubeBuffers:ld,createCubeVertices:no,createPlaneBufferInfo:ud,createPlaneBuffers:cd,createPlaneVertices:to,createSphereBufferInfo:fd,createSphereBuffers:dd,createSphereVertices:ro,createTruncatedConeBufferInfo:hd,createTruncatedConeBuffers:md,createTruncatedConeVertices:wn,createXYQuadBufferInfo:_d,createXYQuadBuffers:vd,createXYQuadVertices:eo,createCresentBufferInfo:Rd,createCresentBuffers:Sd,createCresentVertices:Td,createCrescentBufferInfo:hl,createCrescentBuffers:ml,createCrescentVertices:Pn,createCylinderBufferInfo:pd,createCylinderBuffers:xd,createCylinderVertices:oo,createTorusBufferInfo:bd,createTorusBuffers:Ed,createTorusVertices:io,createDiscBufferInfo:yd,createDiscBuffers:gd,createDiscVertices:ao,deindexVertices:jf,flattenNormals:Qf,makeRandomVertexColors:td,reorientDirections:ll,reorientNormals:ul,reorientPositions:cl,reorientVertices:fl,concatVertices:nd,duplicateVertices:sd});function Hr(e){return!!e.texStorage2D}const _l=(function(){const e={},t={};function r(n){const s=n.constructor.name;if(!e[s]){for(const o in n)if(typeof n[o]=="number"){const a=t[n[o]];t[n[o]]=a?`${a} | ${o}`:o}e[s]=!0}}return function(s,o){return r(s),t[o]||(typeof o=="number"?`0x${o.toString(16)}`:o)}})(),Pr=void 0,ht={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},dr=Or,vl=(function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}})(),qo=6406,Be=6407,q=6408,Yo=6409,Ko=6410,Cr=6402,Wo=34041,un=33071,is=9728,as=9729,Fd=9986,Ge=3553,Le=34067,mt=32879,dt=35866,Cn=34069,wd=34070,Pd=34071,Cd=34072,Bd=34073,Id=34074,cn=10241,fn=10240,dn=10242,hn=10243,jo=32882,Dd=33082,Md=33083,Nd=33084,kd=33085,Gd=34892,Ld=34893,lo=3317,pl=3314,xl=32878,bl=3316,El=3315,yl=32877,rn=37443,nn=37441,sn=37440,Od=33321,Ud=36756,Vd=33325,zd=33326,Hd=33330,Xd=33329,$d=33338,qd=33337,Yd=33340,Kd=33339,Wd=33323,jd=36757,Qd=33327,Zd=33328,Jd=33336,e0=33335,t0=33332,r0=33331,n0=33334,s0=33333,o0=32849,i0=35905,a0=36194,l0=36758,u0=35898,c0=35901,f0=34843,d0=34837,h0=36221,m0=36239,_0=36215,v0=36233,p0=36209,x0=36227,b0=32856,E0=35907,y0=36759,g0=32855,R0=32854,S0=32857,T0=34842,A0=34836,F0=36220,w0=36238,P0=36975,C0=36214,B0=36232,I0=36226,D0=36208,M0=33189,N0=33190,k0=36012,G0=36013,L0=35056,nt=5120,X=5121,Wr=5122,Zt=5123,jr=5124,yt=5125,te=5126,Qo=32819,Zo=32820,Jo=33635,Se=5131,Br=36193,ls=33640,O0=35899,U0=35902,V0=36269,z0=34042,Qr=33319,Jt=33320,Zr=6403,er=36244,tr=36248,gt=36249,ei=33776,ti=33777,ri=33778,ni=33779,si=35916,oi=35917,ii=35918,ai=35919,li=36196,ui=37488,ci=37489,fi=37490,di=37491,hi=37492,mi=37493,_i=37494,vi=37495,pi=37496,xi=37497,bi=35840,Ei=35841,yi=35842,gi=35843,Ri=37808,Si=37809,Ti=37810,Ai=37811,Fi=37812,wi=37813,Pi=37814,Ci=37815,Bi=37816,Ii=37817,Di=37818,Mi=37819,Ni=37820,ki=37821,Gi=37840,Li=37841,Oi=37842,Ui=37843,Vi=37844,zi=37845,Hi=37846,Xi=37847,$i=37848,qi=37849,Yi=37850,Ki=37851,Wi=37852,ji=37853,Qi=36492,Zi=36493,Ji=36494,ea=36495,ta=36283,ra=36284,na=36285,sa=36286;let us;function pr(e){if(!us){const r={};r[qo]={textureFormat:qo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[X,Se,Br,te]},r[Yo]={textureFormat:Yo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[X,Se,Br,te]},r[Ko]={textureFormat:Ko,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[X,Se,Br,te]},r[Be]={textureFormat:Be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[X,Se,Br,te,Jo]},r[q]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[X,Se,Br,te,Qo,Zo]},r[Cr]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[yt,Zt]},r[Od]={textureFormat:Zr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[X]},r[Ud]={textureFormat:Zr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[nt]},r[Vd]={textureFormat:Zr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[te,Se]},r[zd]={textureFormat:Zr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[te]},r[Hd]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[X]},r[Xd]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[nt]},r[t0]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Zt]},r[r0]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Wr]},r[n0]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yt]},r[s0]={textureFormat:er,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[jr]},r[Wd]={textureFormat:Qr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[X]},r[jd]={textureFormat:Qr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[nt]},r[Qd]={textureFormat:Qr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[te,Se]},r[Zd]={textureFormat:Qr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[te]},r[Jd]={textureFormat:Jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[X]},r[e0]={textureFormat:Jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[nt]},r[$d]={textureFormat:Jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zt]},r[qd]={textureFormat:Jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Wr]},r[Yd]={textureFormat:Jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[yt]},r[Kd]={textureFormat:Jt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[jr]},r[o0]={textureFormat:Be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[X]},r[i0]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[X]},r[a0]={textureFormat:Be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[X,Jo]},r[l0]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[nt]},r[u0]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[te,Se,O0]},r[c0]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[te,Se,U0]},r[f0]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[te,Se]},r[d0]={textureFormat:Be,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[te]},r[h0]={textureFormat:tr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[X]},r[m0]={textureFormat:tr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[nt]},r[_0]={textureFormat:tr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Zt]},r[v0]={textureFormat:tr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Wr]},r[p0]={textureFormat:tr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yt]},r[x0]={textureFormat:tr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[jr]},r[b0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[X]},r[E0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[X]},r[y0]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[nt]},r[g0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[X,Zo,ls]},r[R0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[X,Qo]},r[S0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ls]},r[T0]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[te,Se]},r[A0]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[te]},r[F0]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[X]},r[w0]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nt]},r[P0]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ls]},r[C0]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Zt]},r[B0]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Wr]},r[I0]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[jr]},r[D0]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[yt]},r[M0]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Zt,yt]},r[N0]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yt]},r[k0]={textureFormat:Cr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[te]},r[L0]={textureFormat:Wo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[z0]},r[G0]={textureFormat:Wo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[V0]},Object.keys(r).forEach(function(o){const a=r[o];a.bytesPerElementMap={},a.bytesPerElement.forEach(function(i,l){const u=a.type[l];a.bytesPerElementMap[u]=i})});const n={bytes:8,width:4,height:4},s={bytes:16,width:4,height:4};r[ei]={textureFormat:ei,colorRenderable:!1,textureFilterable:!0,block:n},r[ti]={textureFormat:ti,colorRenderable:!1,textureFilterable:!0,block:n},r[ri]={textureFormat:ri,colorRenderable:!1,textureFilterable:!0,block:s},r[ni]={textureFormat:ni,colorRenderable:!1,textureFilterable:!0,block:s},r[si]={textureFormat:si,colorRenderable:!1,textureFilterable:!0,block:n},r[oi]={textureFormat:oi,colorRenderable:!1,textureFilterable:!0,block:n},r[ii]={textureFormat:ii,colorRenderable:!1,textureFilterable:!0,block:s},r[ai]={textureFormat:ai,colorRenderable:!1,textureFilterable:!0,block:s},r[li]={textureFormat:li,colorRenderable:!1,textureFilterable:!0,block:n},r[ui]={textureFormat:ui,colorRenderable:!1,textureFilterable:!0,block:n},r[ci]={textureFormat:ci,colorRenderable:!1,textureFilterable:!0,block:n},r[fi]={textureFormat:fi,colorRenderable:!1,textureFilterable:!0,block:s},r[di]={textureFormat:di,colorRenderable:!1,textureFilterable:!0,block:s},r[hi]={textureFormat:hi,colorRenderable:!1,textureFilterable:!0,block:n},r[mi]={textureFormat:mi,colorRenderable:!1,textureFilterable:!0,block:n},r[_i]={textureFormat:_i,colorRenderable:!1,textureFilterable:!0,block:n},r[vi]={textureFormat:vi,colorRenderable:!1,textureFilterable:!0,block:n},r[pi]={textureFormat:pi,colorRenderable:!1,textureFilterable:!0,block:s},r[xi]={textureFormat:xi,colorRenderable:!1,textureFilterable:!0,block:s},r[bi]={textureFormat:bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},r[Ei]={textureFormat:Ei,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},r[yi]={textureFormat:yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},r[gi]={textureFormat:gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},r[Ri]={textureFormat:Ri,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},r[Si]={textureFormat:Si,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},r[Ti]={textureFormat:Ti,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},r[Ai]={textureFormat:Ai,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},r[Fi]={textureFormat:Fi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},r[wi]={textureFormat:wi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},r[Pi]={textureFormat:Pi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},r[Ci]={textureFormat:Ci,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},r[Bi]={textureFormat:Bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},r[Ii]={textureFormat:Ii,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},r[Di]={textureFormat:Di,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},r[Mi]={textureFormat:Mi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},r[Ni]={textureFormat:Ni,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},r[ki]={textureFormat:ki,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},r[Gi]={textureFormat:Gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},r[Li]={textureFormat:Li,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},r[Oi]={textureFormat:Oi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},r[Ui]={textureFormat:Ui,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},r[Vi]={textureFormat:Vi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},r[zi]={textureFormat:zi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},r[Hi]={textureFormat:Hi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},r[Xi]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},r[$i]={textureFormat:$i,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},r[qi]={textureFormat:qi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},r[Yi]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},r[Ki]={textureFormat:Ki,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},r[Wi]={textureFormat:Wi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},r[ji]={textureFormat:ji,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},r[Qi]={textureFormat:Qi,colorRenderable:!1,textureFilterable:!0,block:s},r[Zi]={textureFormat:Zi,colorRenderable:!1,textureFilterable:!0,block:s},r[Ji]={textureFormat:Ji,colorRenderable:!1,textureFilterable:!0,block:s},r[ea]={textureFormat:ea,colorRenderable:!1,textureFilterable:!0,block:s},r[ta]={textureFormat:ta,colorRenderable:!1,textureFilterable:!0,block:n},r[ra]={textureFormat:ra,colorRenderable:!1,textureFilterable:!0,block:n},r[na]={textureFormat:na,colorRenderable:!1,textureFilterable:!0,block:n},r[sa]={textureFormat:sa,colorRenderable:!1,textureFilterable:!0,block:n},us=r}const t=us[e];if(!t)throw new Error("unknown internal format");return t}function gl(e,t){const n=pr(e).bytesPerElementMap[t];if(n===void 0)throw new Error("type not supported for internal format");return n}function xr(e){const t=pr(e);if(!t)throw new Error("unknown internal format");return{format:t.textureFormat,type:t.type?.[0]??X}}function Rl(e){return!!pr(e).block}function H0(e,t){const r=pr(e);return r.block?{blockWidth:r.block.width,blockHeight:r.block.height,bytesPerBlock:r.block.bytes}:{blockWidth:1,blockHeight:1,bytesPerBlock:gl(e,t)}}function oa(e){return(e&e-1)===0}function X0(e,t,r,n){if(!Hr(e))return oa(t)&&oa(r);const s=pr(n);return s.colorRenderable&&s.textureFilterable}function cs(e){return pr(e).textureFilterable}function Sl(e,t,r){return dr(t)?Sn(t):r||X}function Jr(e,t,r,n,s){if(s%1!==0)throw new Error("can't guess dimensions");if(!r&&!n){const o=Math.sqrt(s/(t===Le?6:1));o%1===0?(r=o,n=o):(r=s,n=1)}else if(n){if(!r&&(r=s/n,r%1))throw new Error("can't guess dimensions")}else if(n=s/r,n%1)throw new Error("can't guess dimensions");return{width:r,height:n}}function ot(e,t,r){let n,s,o;t.colorspaceConversion!==void 0&&(n=e.getParameter(rn),e.pixelStorei(rn,t.colorspaceConversion)),t.premultiplyAlpha!==void 0&&(s=e.getParameter(nn),e.pixelStorei(nn,t.premultiplyAlpha)),t.flipY!==void 0&&(o=e.getParameter(sn),e.pixelStorei(sn,t.flipY)),r(),n!==void 0&&e.pixelStorei(rn,n),s!==void 0&&e.pixelStorei(nn,s),o!==void 0&&e.pixelStorei(sn,o)}function fs(e,t,r,n){const s=t[r];return{[r]:s===void 0?e.getParameter(n):s}}function uo(e,t){return{...t,...fs(e,t,"flipY",sn),...fs(e,t,"premultiplyAlpha",nn),...fs(e,t,"colorspaceConversion",rn)}}function Tl(e){e.pixelStorei(lo,4),Hr(e)&&(e.pixelStorei(pl,0),e.pixelStorei(xl,0),e.pixelStorei(bl,0),e.pixelStorei(El,0),e.pixelStorei(yl,0))}function $0(e,t,r,n){n.minMag&&(r.call(e,t,cn,n.minMag),r.call(e,t,fn,n.minMag)),n.min&&r.call(e,t,cn,n.min),n.mag&&r.call(e,t,fn,n.mag),n.wrap&&(r.call(e,t,dn,n.wrap),r.call(e,t,hn,n.wrap),(t===mt||Sf(e,t))&&r.call(e,t,jo,n.wrap)),n.wrapR&&r.call(e,t,jo,n.wrapR),n.wrapS&&r.call(e,t,dn,n.wrapS),n.wrapT&&r.call(e,t,hn,n.wrapT),n.minLod!==void 0&&r.call(e,t,Dd,n.minLod),n.maxLod!==void 0&&r.call(e,t,Md,n.maxLod),n.baseLevel!==void 0&&r.call(e,t,Nd,n.baseLevel),n.maxLevel!==void 0&&r.call(e,t,kd,n.maxLevel),n.compareFunc!==void 0&&r.call(e,t,Ld,n.compareFunc),n.compareMode!==void 0&&r.call(e,t,Gd,n.compareMode)}function Al(e,t,r){const n=r.target||Ge;e.bindTexture(n,t),$0(e,n,e.texParameteri,r)}function q0(e){return e=e||ht.textureColor,dr(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function Fl(e,t,{options:r,width:n,height:s,internalFormat:o,lastMipLevelUploaded:a}){r=r||ht.textureOptions,o=o||q;const i=r.target||Ge;if(n=n||r.width,s=s||r.height,e.bindTexture(i,t),a>1){const l=Math.max(1,n>>a),u=Math.max(1,s>>a),f=l===1&&u===1,h=cs(o)?as:is,c=cs(o)?f?Fd:as:is;e.texParameteri(i,fn,h),e.texParameteri(i,cn,c)}else if(X0(e,n,s,o))e.generateMipmap(i);else{const l=cs(o)?as:is;e.texParameteri(i,cn,l),e.texParameteri(i,fn,l),e.texParameteri(i,dn,un),e.texParameteri(i,hn,un)}}function ia(e,t,r,n,s,o){Fl(e,t,{options:r,width:n,height:s,internalFormat:o})}function Ur(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function Ts(e,t){return t=t||{},t.cubeFaceOrder||[Cn,wd,Pd,Cd,Bd,Id]}function As(e,t){const n=Ts(e,t).map(function(s,o){return{face:s,ndx:o}});return n.sort(function(s,o){return s.face-o.face}),n}function wl(e,t,r,n){n=n||ht.textureOptions;const s=n.target||Ge,o=n.level||0;let a=r.width,i=r.height;const l=n.internalFormat||n.format||q,u=xr(l),f=n.format||u.format,h=n.type||u.type;if(e.bindTexture(s,t),s===Le){const c=r.width,d=r.height;let m,_;if(c/6===d)m=d,_=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===c)m=c,_=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3===d/2)m=c/3,_=[0,0,1,0,2,0,0,1,1,1,2,1];else if(c/2===d/3)m=c/2,_=[0,0,1,0,0,1,1,1,0,2,1,2];else throw new Error(`can't figure out cube map from element: ${r.src?r.src:r.nodeName}`);const v=vl();v?(v.canvas.width=m,v.canvas.height=m,a=m,i=m,ot(e,n,()=>{As(e,n).forEach(function(b){const E=_[b.ndx*2+0]*m,y=_[b.ndx*2+1]*m;v.drawImage(r,E,y,m,m,0,0,m,m),e.texImage2D(b.face,o,l,f,h,v.canvas)}),v.canvas.width=1,v.canvas.height=1})):typeof createImageBitmap<"u"&&(a=m,i=m,As(e,n).forEach(function(b){const E=_[b.ndx*2+0]*m,y=_[b.ndx*2+1]*m;e.texImage2D(b.face,o,l,m,m,0,f,h,null),createImageBitmap(r,E,y,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(R){ot(e,n,()=>{e.bindTexture(s,t),e.texImage2D(b.face,o,l,f,h,R),Ur(n)&&ia(e,t,n,a,i,l)})})}))}else s===mt||s===dt?ot(e,n,()=>{const c=Math.min(r.width,r.height),d=Math.max(r.width,r.height),m=d/c;if(m%1!==0)throw new Error("can not compute 3D dimensions of element");const _=r.width===d?1:0,v=r.height===d?1:0;e.pixelStorei(lo,1),e.pixelStorei(pl,r.width),e.pixelStorei(xl,0),e.pixelStorei(yl,0),e.texImage3D(s,o,l,c,c,c,0,f,h,null);for(let b=0;b<m;++b){const E=b*c*_,y=b*c*v;e.pixelStorei(bl,E),e.pixelStorei(El,y),e.texSubImage3D(s,o,0,0,b,c,c,1,f,h,r)}Tl(e)}):ot(e,n,()=>{e.texImage2D(s,o,l,f,h,r)});Ur(n)&&ia(e,t,n,a,i,l),Al(e,t,n)}function Xr(){}function Y0(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function K0(e,t){return t===void 0&&!Y0(e)?"anonymous":t}function W0(e,t,r){r=r||Xr;let n;if(t=t!==void 0?t:ht.crossOrigin,t=K0(e,t),typeof Image<"u"){n=new Image,t!==void 0&&(n.crossOrigin=t);const s=function(){n.removeEventListener("error",o),n.removeEventListener("load",a),n=null},o=function(){const l="couldn't load image: "+e;el(l),r(l,n),s()},a=function(){r(null,n),s()};return n.addEventListener("error",o),n.addEventListener("load",a),n.src=e,n}else if(typeof ImageBitmap<"u"){let s,o;const a=function(){r(s,o)},i={};t&&(i.mode="cors"),fetch(e,i).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){o=l,setTimeout(a)}).catch(function(l){s=l,setTimeout(a)}),n=null}return n}function Pl(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function co(e,t,r){return Pl(e)?(setTimeout(function(){r(null,e)}),e):W0(e,t,r)}function fo(e,t,r){r=r||ht.textureOptions;const n=r.target||Ge;if(e.bindTexture(n,t),r.color===!1)return;const s=q0(r.color);if(n===Le)for(let o=0;o<6;++o)e.texImage2D(Cn+o,0,q,1,1,0,q,X,s);else n===mt||n===dt?e.texImage3D(n,0,q,1,1,1,0,q,X,s):e.texImage2D(n,0,q,1,1,0,q,X,s)}function j0(e,t,r,n){return n=n||Xr,r=r||ht.textureOptions,fo(e,t,r),r=uo(e,r),co(r.src,r.crossOrigin,function(o,a){o?n(o,t,a):(wl(e,t,a,r),n(null,t,a))})}function Q0(e,t,r,n){n=n||Xr;const s=r.src;if(s.length!==6)throw new Error("there must be 6 urls for a cubemap");const o=r.level||0,a=r.internalFormat||r.format||q,i=xr(a),l=r.format||i.format,u=r.type||X,f=r.target||Ge;if(f!==Le)throw new Error("target must be TEXTURE_CUBE_MAP");fo(e,t,r),r=uo(e,r);let h=6;const c=[],d=Ts(e,r);let m;function _(v){return function(b,E){--h,b?c.push(b):E.width!==E.height?c.push("cubemap face img is not a square: "+E.src):ot(e,r,()=>{e.bindTexture(f,t),h===5?Ts().forEach(function(y){e.texImage2D(y,o,a,l,u,E)}):e.texImage2D(v,o,a,l,u,E),Ur(r)&&e.generateMipmap(f)}),h===0&&n(c.length?c:void 0,t,m)}}m=s.map(function(v,b){return co(v,r.crossOrigin,_(d[b]))})}function Z0(e,t,r,n){n=n||Xr;const s=r.src,o=r.internalFormat||r.format||q,a=xr(o),i=r.format||a.format,l=r.type||X,u=r.target||dt;if(u!==mt&&u!==dt)throw new Error("target must be TEXTURE_3D or TEXTURE_2D_ARRAY");fo(e,t,r),r=uo(e,r);let f=s.length;const h=[];let c;const d=r.level||0;let m=r.width,_=r.height;const v=s.length;let b=!0;function E(y){return function(R,x){--f,R?h.push(R):ot(e,r,()=>{if(e.bindTexture(u,t),b){b=!1,m=r.width||x.width,_=r.height||x.height,e.texImage3D(u,d,o,m,_,v,0,i,l,null);for(let S=0;S<v;++S)e.texSubImage3D(u,d,0,0,S,m,_,1,i,l,x)}else{let S=x,F;(x.width!==m||x.height!==_)&&(F=vl(),S=F.canvas,F.canvas.width=m,F.canvas.height=_,F.drawImage(x,0,0,m,_)),e.texSubImage3D(u,d,0,0,y,m,_,1,i,l,S),F&&S===F.canvas&&(F.canvas.width=0,F.canvas.height=0)}Ur(r)&&e.generateMipmap(u)}),f===0&&n(h.length?h:void 0,t,c)}}c=s.map(function(y,R){return co(y,r.crossOrigin,E(R))})}function J0(e,t,r,n){n=n||ht.textureOptions;const s=n.target||Ge;e.bindTexture(s,t);const o=n.level||0,a=n.internalFormat||n.format||q,i=xr(a),l=n.format||i.format,u=n.type||Sl(e,r,i.type);if(dr(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const _=Ja(u);r=new _(r)}const{width:f,height:h,depth:c}=eh(s,r,n,a,l,u),d=Rl(a);Tl(e),e.pixelStorei(lo,n.unpackAlignment||1);let m=0;return ot(e,n,()=>{let _=0;const{blockWidth:v,blockHeight:b,bytesPerBlock:E}=H0(a,u);for(;_<r.byteLength;){const y=Math.max(1,f>>m),R=Math.max(1,h>>m),x=s===Ge?Math.max(1,c>>m):c,S=Math.ceil(y/v),F=Math.ceil(R/b),P=s===Le?6:1,A=S*F*E*x*P;if(_+A>r.byteLength)throw new Error("src size does not match number of mip levels");const C=r.subarray(_/r.BYTES_PER_ELEMENT,(_+A)/r.BYTES_PER_ELEMENT),U=o+m;if(s===Le){const oe=C.length/6;As(e,n).forEach(j=>{const me=oe*j.ndx,be=C.subarray(me,me+oe);d?e.compressedTexImage2D(j.face,U,a,y,R,0,be):e.texImage2D(j.face,U,a,y,R,0,l,u,be)})}else s===mt||s===dt?e.texImage3D(s,U,a,y,R,x,0,l,u,C):d?e.compressedTexImage2D(s,U,a,y,R,0,C):e.texImage2D(s,U,a,y,R,0,l,u,C);if(++m,_+=A,y===1&&R===1&&x===1&&_!==r.byteLength)throw new Error("src size has more data than can fit in mip levels")}}),{width:f,height:h,depth:c,type:u,lastMipLevelUploaded:o+m-1}}function eh(e,t,r,n,s,o){let a=r.width,i=r.height,l=r.depth;const u=Rl(n);if(u){if(!a||!i)throw new Error("compressed texture needs to set width and height!");l=l||1}else{const f=gl(n,o),h=t.byteLength/f;if(h%1)throw new Error(`length wrong size for format: ${_l(Pr,s)}`);if(u&&(!a||!i))throw new Error("compressed texture needs to set width and height!");let c;if(e===mt||e===dt)if(!a&&!i&&!l){const d=Math.cbrt(h);if(d%1!==0)throw new Error(`can't guess cube size of array of numElements: ${h}`);a=d,i=d,l=d}else a&&(!i||!l)?(c=Jr(Pr,e,i,l,h/a),i=c.width,l=c.height):i&&(!a||!l)?(c=Jr(Pr,e,a,l,h/i),a=c.width,l=c.height):(c=Jr(Pr,e,a,i,h/l),a=c.width,i=c.height);else c=Jr(Pr,e,a,i,h),a=c.width,i=c.height}return{width:a,height:i,depth:l}}function th(e,t,r){const n=r.target||Ge;e.bindTexture(n,t);const s=r.level||0,o=r.internalFormat||r.format||q,a=xr(o),i=r.format||a.format,l=r.type||a.type;ot(e,r,()=>{if(n===Le)for(let u=0;u<6;++u)e.texImage2D(Cn+u,s,o,r.width,r.height,0,i,l,null);else n===mt||n===dt?e.texImage3D(n,s,o,r.width,r.height,r.depth,0,i,l,null):e.texImage2D(n,s,o,r.width,r.height,0,i,l,null)})}function Cl(e,t,r){r=r||Xr,t=t||ht.textureOptions;const n=e.createTexture(),s=t.target||Ge;let o=t.width||1,a=t.height||1,i=0;const l=t.internalFormat||q;e.bindTexture(s,n),s===Le&&(e.texParameteri(s,dn,un),e.texParameteri(s,hn,un));let u=t.src;if(u)if(typeof u=="function"&&(u=u(e,t)),typeof u=="string")j0(e,n,t,r);else if(dr(u)||Array.isArray(u)&&(typeof u[0]=="number"||Array.isArray(u[0])||dr(u[0]))){const f=J0(e,n,u,t);o=f.width,a=f.height,i=f.lastMipLevelUploaded}else Array.isArray(u)&&(typeof u[0]=="string"||Pl(u[0]))?s===Le?Q0(e,n,t,r):Z0(e,n,t,r):(wl(e,n,u,t),o=u.width,a=u.height);else th(e,n,t);return Ur(t)&&Fl(e,n,{options:t,width:o,height:a,internalFormat:l,lastMipLevelUploaded:i}),Al(e,n,t),n}function Bl(e,t,r,n,s,o){n=n||r.width,s=s||r.height,o=o||r.depth;const a=r.target||Ge;e.bindTexture(a,t);const i=r.level||0,l=r.internalFormat||r.format||q,u=xr(l),f=r.format||u.format;let h;const c=r.src;if(c&&(dr(c)||Array.isArray(c)&&typeof c[0]=="number")?h=r.type||Sl(e,c,u.type):h=r.type||u.type,a===Le)for(let d=0;d<6;++d)e.texImage2D(Cn+d,i,l,n,s,0,f,h,null);else a===mt||a===dt?e.texImage3D(a,i,l,n,s,o,0,f,h,null):e.texImage2D(a,i,l,n,s,0,f,h,null)}const ho=el;function Il(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const mn=33984,Bn=34962,rh=34963,nh=35713,sh=35714,oh=35632,ih=35633,ah=35981,Dl=35718,lh=35721,uh=35971,ch=35382,fh=35396,dh=35398,hh=35392,mh=35395,In=5126,Ml=35664,Nl=35665,kl=35666,mo=5124,Gl=35667,Ll=35668,Ol=35669,Ul=35670,Vl=35671,zl=35672,Hl=35673,Xl=35674,$l=35675,ql=35676,_h=35678,vh=35680,ph=35679,xh=35682,bh=35685,Eh=35686,yh=35687,gh=35688,Rh=35689,Sh=35690,Th=36289,Ah=36292,Fh=36293,_o=5125,Yl=36294,Kl=36295,Wl=36296,wh=36298,Ph=36299,Ch=36300,Bh=36303,Ih=36306,Dh=36307,Mh=36308,Nh=36311,Dn=3553,Mn=34067,vo=32879,Nn=35866,B={};function jl(e,t){return B[t].bindPoint}function kh(e,t){return function(r){e.uniform1f(t,r)}}function Gh(e,t){return function(r){e.uniform1fv(t,r)}}function Lh(e,t){return function(r){e.uniform2fv(t,r)}}function Oh(e,t){return function(r){e.uniform3fv(t,r)}}function Uh(e,t){return function(r){e.uniform4fv(t,r)}}function Ql(e,t){return function(r){e.uniform1i(t,r)}}function Zl(e,t){return function(r){e.uniform1iv(t,r)}}function Jl(e,t){return function(r){e.uniform2iv(t,r)}}function eu(e,t){return function(r){e.uniform3iv(t,r)}}function tu(e,t){return function(r){e.uniform4iv(t,r)}}function Vh(e,t){return function(r){e.uniform1ui(t,r)}}function zh(e,t){return function(r){e.uniform1uiv(t,r)}}function Hh(e,t){return function(r){e.uniform2uiv(t,r)}}function Xh(e,t){return function(r){e.uniform3uiv(t,r)}}function $h(e,t){return function(r){e.uniform4uiv(t,r)}}function qh(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}function Yh(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}function Kh(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}function Wh(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}function jh(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}function Qh(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}function Zh(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}function Jh(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}function em(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}function ue(e,t,r,n){const s=jl(e,t);return Hr(e)?function(o){let a,i;!o||An(e,o)?(a=o,i=null):(a=o.texture,i=o.sampler),e.uniform1i(n,r),e.activeTexture(mn+r),e.bindTexture(s,a),e.bindSampler(r,i)}:function(o){e.uniform1i(n,r),e.activeTexture(mn+r),e.bindTexture(s,o)}}function ce(e,t,r,n,s){const o=jl(e,t),a=new Int32Array(s);for(let i=0;i<s;++i)a[i]=r+i;return Hr(e)?function(i){e.uniform1iv(n,a),i.forEach(function(l,u){e.activeTexture(mn+a[u]);let f,h;!l||An(e,l)?(f=l,h=null):(f=l.texture,h=l.sampler),e.bindSampler(r,h),e.bindTexture(o,f)})}:function(i){e.uniform1iv(n,a),i.forEach(function(l,u){e.activeTexture(mn+a[u]),e.bindTexture(o,l)})}}B[In]={Type:Float32Array,size:4,setter:kh,arraySetter:Gh};B[Ml]={Type:Float32Array,size:8,setter:Lh,cols:2};B[Nl]={Type:Float32Array,size:12,setter:Oh,cols:3};B[kl]={Type:Float32Array,size:16,setter:Uh,cols:4};B[mo]={Type:Int32Array,size:4,setter:Ql,arraySetter:Zl};B[Gl]={Type:Int32Array,size:8,setter:Jl,cols:2};B[Ll]={Type:Int32Array,size:12,setter:eu,cols:3};B[Ol]={Type:Int32Array,size:16,setter:tu,cols:4};B[_o]={Type:Uint32Array,size:4,setter:Vh,arraySetter:zh};B[Yl]={Type:Uint32Array,size:8,setter:Hh,cols:2};B[Kl]={Type:Uint32Array,size:12,setter:Xh,cols:3};B[Wl]={Type:Uint32Array,size:16,setter:$h,cols:4};B[Ul]={Type:Uint32Array,size:4,setter:Ql,arraySetter:Zl};B[Vl]={Type:Uint32Array,size:8,setter:Jl,cols:2};B[zl]={Type:Uint32Array,size:12,setter:eu,cols:3};B[Hl]={Type:Uint32Array,size:16,setter:tu,cols:4};B[Xl]={Type:Float32Array,size:32,setter:qh,rows:2,cols:2};B[$l]={Type:Float32Array,size:48,setter:Yh,rows:3,cols:3};B[ql]={Type:Float32Array,size:64,setter:Kh,rows:4,cols:4};B[bh]={Type:Float32Array,size:32,setter:Wh,rows:2,cols:3};B[Eh]={Type:Float32Array,size:32,setter:Qh,rows:2,cols:4};B[yh]={Type:Float32Array,size:48,setter:jh,rows:3,cols:2};B[gh]={Type:Float32Array,size:48,setter:Jh,rows:3,cols:4};B[Rh]={Type:Float32Array,size:64,setter:Zh,rows:4,cols:2};B[Sh]={Type:Float32Array,size:64,setter:em,rows:4,cols:3};B[_h]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dn};B[vh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mn};B[ph]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:vo};B[xh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dn};B[Th]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nn};B[Ah]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nn};B[Fh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mn};B[wh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dn};B[Ph]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:vo};B[Ch]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mn};B[Bh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nn};B[Ih]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dn};B[Dh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:vo};B[Mh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mn};B[Nh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nn};function kn(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Bn,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||In,r.normalize||!1,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function _t(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4iv(t,r.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Bn,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||mo,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function Gn(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4uiv(t,r.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Bn,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||_o,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function po(e,t,r){const n=r.size,s=r.count;return function(o){e.bindBuffer(Bn,o.buffer);const a=o.size||o.numComponents||n,i=a/s,l=o.type||In,f=B[l].size*a,h=o.normalize||!1,c=o.offset||0,d=f/s;for(let m=0;m<s;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,i,l,h,f,c+d*m),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+m,o.divisor||0)}}const K={};K[In]={size:4,setter:kn};K[Ml]={size:8,setter:kn};K[Nl]={size:12,setter:kn};K[kl]={size:16,setter:kn};K[mo]={size:4,setter:_t};K[Gl]={size:8,setter:_t};K[Ll]={size:12,setter:_t};K[Ol]={size:16,setter:_t};K[_o]={size:4,setter:Gn};K[Yl]={size:8,setter:Gn};K[Kl]={size:12,setter:Gn};K[Wl]={size:16,setter:Gn};K[Ul]={size:4,setter:_t};K[Vl]={size:8,setter:_t};K[zl]={size:12,setter:_t};K[Hl]={size:16,setter:_t};K[Xl]={size:4,setter:po,count:2};K[$l]={size:9,setter:po,count:3};K[ql]={size:16,setter:po,count:4};const tm=/ERROR:\s*\d+:(\d+)/gi;function rm(e,t="",r=0){const n=[...t.matchAll(tm)],s=new Map(n.map((o,a)=>{const i=parseInt(o[1]),l=n[a+1],u=l?l.index:t.length,f=t.substring(o.index,u);return[i-1,f]}));return e.split(`
`).map((o,a)=>{const i=s.get(a);return`${a+1+r}: ${o}${i?`

^^^ ${i}`:""}`}).join(`
`)}const aa=/^[ \t]*\n/;function ru(e){let t=0;return aa.test(e)&&(t=1,e=e.replace(aa,"")),{lineOffset:t,shaderSource:e}}function nm(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function sm(e,t,r,n){if(n=n||ho,!e.getShaderParameter(r,nh)){const o=e.getShaderInfoLog(r),{lineOffset:a,shaderSource:i}=ru(e.getShaderSource(r)),l=`${rm(i,o,a)}
Error compiling ${_l(e,t)}: ${o}`;return n(l),l}return""}function xo(e,t,r){let n,s,o;if(typeof t=="function"&&(r=t,t=void 0),typeof e=="function")r=e,e=void 0;else if(e&&!Array.isArray(e)){const u=e;r=u.errorCallback,e=u.attribLocations,n=u.transformFeedbackVaryings,s=u.transformFeedbackMode,o=u.callback}const a=r||ho,i=[],l={errorCallback(u,...f){i.push(u),a(u,...f)},transformFeedbackVaryings:n,transformFeedbackMode:s,callback:o,errors:i};{let u={};Array.isArray(e)?e.forEach(function(f,h){u[f]=t?t[h]:h}):u=e||{},l.attribLocations=u}return l}const om=["VERTEX_SHADER","FRAGMENT_SHADER"];function im(e,t){if(t.indexOf("frag")>=0)return oh;if(t.indexOf("vert")>=0)return ih}function am(e,t,r){const n=e.getAttachedShaders(t);for(const s of n)r.has(s)||e.deleteShader(s);e.deleteProgram(t)}const lm=(e=0)=>new Promise(t=>setTimeout(t,e));function um(e,t,r){const n=e.createProgram(),{attribLocations:s,transformFeedbackVaryings:o,transformFeedbackMode:a}=xo(r);for(let i=0;i<t.length;++i){let l=t[i];if(typeof l=="string"){const u=Il(l),f=u?u.text:l;let h=e[om[i]];u&&u.type&&(h=im(e,u.type)||h),l=e.createShader(h),e.shaderSource(l,ru(f).shaderSource),e.compileShader(l)}e.attachShader(n,l)}Object.entries(s).forEach(([i,l])=>e.bindAttribLocation(n,l,i));{let i=o;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(n,i,a||ah))}return e.linkProgram(n),n}function cm(e,t,r,n,s){const o=xo(r,n,s),a=new Set(t),i=um(e,t,o);function l(u,f){const h=dm(u,f,o.errorCallback);return h&&am(u,f,a),h}if(o.callback){fm(e,i).then(()=>{const u=l(e,i);o.callback(u,u?void 0:i)});return}return l(e,i)?void 0:i}async function fm(e,t){const r=e.getExtension("KHR_parallel_shader_compile"),n=r?(o,a)=>o.getProgramParameter(a,r.COMPLETION_STATUS_KHR):()=>!0;let s=0;do await lm(s),s=1e3/60;while(!n(e,t))}function dm(e,t,r){if(r=r||ho,!e.getProgramParameter(t,sh)){const s=e.getProgramInfoLog(t);r(`Error in program linking: ${s}`);const a=e.getAttachedShaders(t).map(i=>sm(e,e.getShaderParameter(i,e.SHADER_TYPE),i,r));return`${s}
${a.filter(i=>i).join(`
`)}`}}function hm(e,t,r,n,s){return cm(e,t,r,n,s)}function nu(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const mm=/(\.|\[|]|\w+)/g,_m=e=>e>="0"&&e<="9";function vm(e,t,r,n){const s=e.split(mm).filter(i=>i!=="");let o=0,a="";for(;;){const i=s[o++];a+=i;const l=_m(i[0]),u=l?parseInt(i):i;if(l&&(a+=s[o++]),o===s.length){r[u]=t;break}else{const h=s[o++],c=h==="[",d=r[u]||(c?[]:{});r[u]=d,r=d,n[a]=n[a]||(function(m){return function(_){su(m,_)}})(d),a+=h}}}function pm(e,t){let r=0;function n(i,l,u){const f=l.name.endsWith("[0]"),h=l.type,c=B[h];if(!c)throw new Error(`unknown type: 0x${h.toString(16)}`);let d;if(c.bindPoint){const m=r;r+=l.size,f?d=c.arraySetter(e,h,m,u,l.size):d=c.setter(e,h,m,u,l.size)}else c.arraySetter&&f?d=c.arraySetter(e,u):d=c.setter(e,u);return d.location=u,d}const s={},o={},a=e.getProgramParameter(t,Dl);for(let i=0;i<a;++i){const l=e.getActiveUniform(t,i);if(nu(l))continue;let u=l.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const f=e.getUniformLocation(t,l.name);if(f){const h=n(t,l,f);s[u]=h,vm(u,h,o,s)}}return s}function xm(e,t){const r={},n=e.getProgramParameter(t,uh);for(let s=0;s<n;++s){const o=e.getTransformFeedbackVarying(t,s);r[o.name]={index:s,type:o.type,size:o.size}}return r}function bm(e,t){const r=e.getProgramParameter(t,Dl),n=[],s=[];for(let i=0;i<r;++i){s.push(i),n.push({});const l=e.getActiveUniform(t,i);n[i].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){const l=i[0],u=i[1];e.getActiveUniforms(t,s,e[l]).forEach(function(f,h){n[h][u]=f})});const o={},a=e.getProgramParameter(t,ch);for(let i=0;i<a;++i){const l=e.getActiveUniformBlockName(t,i),u={index:e.getUniformBlockIndex(t,l),usedByVertexShader:e.getActiveUniformBlockParameter(t,i,fh),usedByFragmentShader:e.getActiveUniformBlockParameter(t,i,dh),size:e.getActiveUniformBlockParameter(t,i,hh),uniformIndices:e.getActiveUniformBlockParameter(t,i,mh)};u.used=u.usedByVertexShader||u.usedByFragmentShader,o[l]=u}return{blockSpecs:o,uniformData:n}}function su(e,t){for(const r in t){const n=e[r];typeof n=="function"?n(t[r]):su(e[r],t[r])}}function ou(e,...t){const r=e.uniformSetters||e,n=t.length;for(let s=0;s<n;++s){const o=t[s];if(Array.isArray(o)){const a=o.length;for(let i=0;i<a;++i)ou(r,o[i])}else for(const a in o){const i=r[a];i&&i(o[a])}}}function Em(e,t){const r={},n=e.getProgramParameter(t,lh);for(let s=0;s<n;++s){const o=e.getActiveAttrib(t,s);if(nu(o))continue;const a=e.getAttribLocation(t,o.name),i=K[o.type],l=i.setter(e,a,i);l.location=a,r[o.name]=l}return r}function ym(e,t){for(const r in t){const n=e[r];n&&n(t[r])}}function gm(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(ym(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(rh,r.indices))}function la(e,t){const r=pm(e,t),n=Em(e,t),s={program:t,uniformSetters:r,attribSetters:n,uniformLocations:Object.fromEntries(Object.entries(r).map(([o,a])=>[o,a.location])),attribLocations:Object.fromEntries(Object.entries(n).map(([o,a])=>[o,a.location]))};return Hr(e)&&(s.uniformBlockSpec=bm(e,t),s.transformFeedbackInfo=xm(e,t)),s}const Rm=/\s|{|}|;/;function Sm(e,t,r,n,s){const o=xo(r,n,s),a=[];if(t=t.map(function(u){if(!Rm.test(u)){const f=Il(u);if(f)u=f.text;else{const h=`no element with id: ${u}`;o.errorCallback(h),a.push(h)}}return u}),a.length)return nm(o,"");const i=o.callback;i&&(o.callback=(u,f)=>{i(u,u?void 0:la(e,f))});const l=hm(e,t,o);return l?la(e,l):null}const Tm=4,ua=5123;function Am(e,t,r,n,s,o){r=r===void 0?Tm:r;const a=t.indices,i=t.elementType,l=n===void 0?t.numElements:n;s=s===void 0?0:s,i||a?o!==void 0?e.drawElementsInstanced(r,l,i===void 0?ua:t.elementType,s,o):e.drawElements(r,l,i===void 0?ua:t.elementType,s):o!==void 0?e.drawArraysInstanced(r,s,l,o):e.drawArrays(r,s,l)}const iu=36160,St=36161,Fm=3553,wm=5121,Pm=6402,Cm=6408,Bm=33190,Im=36012,Dm=35056,Mm=36013,Nm=32854,km=32855,Gm=36194,au=33189,lu=6401,uu=36168,bo=34041,Fs=36064,Ln=36096,cu=36128,Eo=33306,ws=33071,Ps=9729,fu=[{format:Cm,type:wm,min:Ps,wrap:ws},{format:bo}],Pe={};Pe[bo]=Eo;Pe[lu]=cu;Pe[uu]=cu;Pe[Pm]=Ln;Pe[au]=Ln;Pe[Bm]=Ln;Pe[Im]=Ln;Pe[Dm]=Eo;Pe[Mm]=Eo;function Lm(e,t){return Pe[e]||Pe[t]}const vt={};vt[Nm]=!0;vt[km]=!0;vt[Gm]=!0;vt[bo]=!0;vt[au]=!0;vt[lu]=!0;vt[uu]=!0;function Om(e){return vt[e]}const Um=32;function Vm(e){return e>=Fs&&e<Fs+Um}function zm(e,t,r,n){const s=iu,o=e.createFramebuffer();e.bindFramebuffer(s,o),r=r||e.drawingBufferWidth,n=n||e.drawingBufferHeight,t=t||fu;const a=[],i={framebuffer:o,attachments:[],width:r,height:n};return t.forEach(function(l,u){let f=l.attachment;const h=l.samples,c=l.format;let d=l.attachmentPoint||Lm(c,l.internalFormat);if(d||(d=Fs+u),Vm(d)&&a.push(d),!f)if(h!==void 0||Om(c))f=e.createRenderbuffer(),e.bindRenderbuffer(St,f),h>1?e.renderbufferStorageMultisample(St,h,c,r,n):e.renderbufferStorage(St,c,r,n);else{const m=Object.assign({},l);m.width=r,m.height=n,m.auto===void 0&&(m.auto=!1,m.min=m.min||m.minMag||Ps,m.mag=m.mag||m.minMag||Ps,m.wrapS=m.wrapS||m.wrap||ws,m.wrapT=m.wrapT||m.wrap||ws),f=Cl(e,m)}if(tl(e,f))e.framebufferRenderbuffer(s,d,St,f);else if(An(e,f))l.layer!==void 0?e.framebufferTextureLayer(s,d,f,l.level||0,l.layer):e.framebufferTexture2D(s,d,l.target||Fm,f,l.level||0);else throw new Error("unknown attachment type");i.attachments.push(f)}),e.drawBuffers&&e.drawBuffers(a),i}function Hm(e,t,r,n,s){n=n||e.drawingBufferWidth,s=s||e.drawingBufferHeight,t.width=n,t.height=s,r=r||fu,r.forEach(function(o,a){const i=t.attachments[a],l=o.format,u=o.samples;if(u!==void 0||tl(e,i))e.bindRenderbuffer(St,i),u>1?e.renderbufferStorageMultisample(St,u,l,n,s):e.renderbufferStorage(St,l,n,s);else if(An(e,i))Bl(e,i,o,n,s);else throw new Error("unknown attachment type")})}function ca(e,t,r){r=r||iu,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}class se{constructor(t,r,n,s){this.gl=t,this.internalFormat=r,this.format=n,this.texture=Cl(t,{width:t.canvas.width,height:t.canvas.height,internalFormat:r,format:n,type:t.UNSIGNED_BYTE,minMag:s,wrap:t.CLAMP_TO_EDGE}),this.framebufferInfo=zm(t,[{attachment:this.texture}],t.canvas.width,t.canvas.height)}framebufferInfo;texture;get isRGBA8(){return this.internalFormat===this.gl.RGBA8&&this.format===this.gl.RGBA}get isR8(){return this.internalFormat===this.gl.R8&&this.format===this.gl.RED}static createRGBA8(t,r=t.LINEAR){return new se(t,t.RGBA8,t.RGBA,r)}static createR8(t,r=t.LINEAR){return new se(t,t.R8,t.RED,r)}resize(t,r){Bl(this.gl,this.texture,{width:t,height:r}),Hm(this.gl,this.framebufferInfo,[{attachment:this.texture}],t,r)}}class Xm{constructor(t){this.gl=t,this.bitmapRenderTarget=se.createRGBA8(t)}passes=[];bitmapRenderTarget;addPass(t){this.passes.push(t)}applyBitmap(t,r){this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r)}resize(t,r){this.gl.canvas.width=t,this.gl.canvas.height=r,this.bitmapRenderTarget.resize(t,r)}async render(t){(this.gl.canvas.width!==t.width||this.gl.canvas.height!==t.height)&&this.resize(t.width,t.height),this.applyBitmap(this.bitmapRenderTarget.texture,t);const r=this.passes.filter(o=>o.enabled);if(r.length===0)throw new Error("No passes in pipeline");let n=this.bitmapRenderTarget;for(let o=0;o<r.length-1;o++)n=r[o].apply(n);r[r.length-1].applyToScreen(n)}}const $m=`#version 300 es

in vec2 position;
in vec2 texcoord;

out vec2 v_uv;

void main() {
  v_uv = texcoord;
  gl_Position = vec4(position, 0.0, 1.0);
}`;class Lt{constructor(t,r){this.gl=t,this.settings=r,this.quadBufferInfo=Ad.createXYQuadBufferInfo(t)}get enabled(){return this.settings.enabled}set enabled(t){this.settings.enabled=t}quadBufferInfo;apply(t){return this.applyInternal(t,!1)}applyToScreen(t){this.applyInternal(t,!0)}executeProgram(t,r,n,s=!1){this.settings.input=r.texture,t.uniformSetters.u_texelSize&&this.settings.setTextelSize(r.framebufferInfo.width,r.framebufferInfo.height),n&&!s&&(n.framebufferInfo.width!==this.gl.canvas.width||n.framebufferInfo.height!==this.gl.canvas.height)&&n.resize(this.gl.canvas.width,this.gl.canvas.height);const o=n?n.framebufferInfo.width:this.gl.canvas.width,a=n?n.framebufferInfo.height:this.gl.canvas.height;n?ca(this.gl,n.framebufferInfo):ca(this.gl,null),this.gl.useProgram(t.program),this.gl.viewport(0,0,o,a),gm(this.gl,t,this.quadBufferInfo),ou(t,this.settings.uniforms),Am(this.gl,this.quadBufferInfo)}createProgramInfo(t){return Sm(this.gl,[$m,t])}}const qm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;        // R8 luma input
uniform vec2      u_texelSize;    // 1 / texture resolution

uniform float u_sigmaSpatial;     // spatial Gaussian sigma
uniform float u_sigmaRange;       // range (luma) Gaussian sigma
uniform int   u_kernelRadius;     // must be <= MAX_KERNEL_RADIUS

out vec4 outColor;

const int MAX_KERNEL_RADIUS = 5;

void main() {

    vec2 uv = v_uv;

    // Center pixel (luma)
    float centerLuma = texture(u_input, uv).r;

    float weightedSum = 0.0;
    float weightTotal = 0.0;

    // Precompute inverse variances
    float invSpatialVar = 1.0 / (2.0 * u_sigmaSpatial * u_sigmaSpatial);
    float invRangeVar   = 1.0 / (2.0 * u_sigmaRange   * u_sigmaRange);

    for (int ky = -MAX_KERNEL_RADIUS; ky <= MAX_KERNEL_RADIUS; ++ky) {
        for (int kx = -MAX_KERNEL_RADIUS; kx <= MAX_KERNEL_RADIUS; ++kx) {

            // Branchless kernel mask
            float maskX = step(float(abs(kx)), float(u_kernelRadius));
            float maskY = step(float(abs(ky)), float(u_kernelRadius));
            float kernelMask = maskX * maskY;

            vec2 offsetTexel =
                vec2(float(kx), float(ky)) * u_texelSize;

            float neighborLuma =
                texture(u_input, uv + offsetTexel).r;

            float spatialDist2 =
                float(kx * kx + ky * ky);

            float rangeDist2 =
                (neighborLuma - centerLuma) *
                (neighborLuma - centerLuma);

            float weightSpatial =
                exp(-spatialDist2 * invSpatialVar);

            float weightRange =
                exp(-rangeDist2 * invRangeVar);

            float kernelWeight =
                weightSpatial * weightRange * kernelMask;

            weightedSum += neighborLuma * kernelWeight;
            weightTotal += kernelWeight;
        }
    }

    float filteredLuma = weightedSum / weightTotal;

    outColor = vec4(filteredLuma,
                    filteredLuma,
                    filteredLuma,
                    1.0);
}
`;class Ym extends Lt{bilateralProgramInfo;outputRenderTarget;constructor(t,r){super(t,r),this.bilateralProgramInfo=this.createProgramInfo(qm),this.outputRenderTarget=se.createRGBA8(t)}applyInternal(t,r){if(!t.isR8)throw new Error("BilateralPass only supports R8 render targets");return this.executeProgram(this.bilateralProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class Ot{_enabled=!0;get enabled(){return this._enabled}set enabled(t){this._enabled=t}get input(){return this.uniforms.u_input}set input(t){this.uniforms.u_input=t}get textelSize(){return this.uniforms.u_texelSize}setTextelSize(t,r){this.uniforms.u_texelSize=[1/t,1/r]}uniforms={}}class Km extends Ot{get sigmaSpatial(){return this.uniforms.u_sigmaSpatial}set sigmaSpatial(t){this.uniforms.u_sigmaSpatial=t}get sigmaRange(){return this.uniforms.u_sigmaRange}set sigmaRange(t){this.uniforms.u_sigmaRange=t}get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}}const Wm=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;

out vec4 outColor;

void main() {
    vec3 color = texture(u_input, v_uv).rgb;

    // Rec.709 luma
    float luma = dot(color, vec3(
        0.2126,  // R
        0.7152,  // G
        0.0722   // B
    ));

    outColor = vec4(luma, luma, luma, 1.0);
}
`;class jm extends Lt{lum709ProgramInfo;outputRenderTarget;constructor(t){super(t,new Ot),this.lum709ProgramInfo=this.createProgramInfo(Wm),this.outputRenderTarget=se.createR8(t)}applyInternal(t,r){if(!t.isRGBA8)throw new Error("Rec709LumPass only supports RGBA8 render targets");return this.executeProgram(this.lum709ProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}const Qm=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;
uniform int u_flipX;
uniform int u_flipY;

out vec4 outColor;

void main() {
    vec2 uv = v_uv;
    if (u_flipX == 1) uv.x = 1.0 - uv.x;
    if (u_flipY == 1) uv.y = 1.0 - uv.y;
    outColor = texture(u_input, uv);
}
`;class Zm extends Lt{programInfo;outputRenderTarget;constructor(t,r){super(t,r),this.programInfo=this.createProgramInfo(Qm),this.outputRenderTarget=se.createR8(t)}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("OrientationPass expects R8 or RGBA8 render targets");return t.isRGBA8&&this.outputRenderTarget.isR8&&(this.outputRenderTarget=se.createRGBA8(this.gl)),this.executeProgram(this.programInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class Jm extends Ot{get flipX(){return!!this.uniforms.u_flipX}set flipX(t){this.uniforms.u_flipX=t?1:0}get flipY(){return!!this.uniforms.u_flipY}set flipY(t){this.uniforms.u_flipY=t?1:0}}const e_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2      u_texelSize;

uniform int   u_kernelRadius;     // 1 = 3x3, 2 = 5x5
uniform float u_directionBias;    // -1 vertical, +1 horizontal
uniform float u_edgeGain;
uniform float u_minEdge;

out vec4 outColor;

/* 3x3 Sobel expanded into 5x5 space */
const float d3[5] = float[5](0.0, -1.0, 0.0, 1.0, 0.0);
const float s3[5] = float[5](0.0,  1.0, 2.0, 1.0, 0.0);

/* True 5x5 Sobel */
const float d5[5] = float[5](-2.0, -1.0, 0.0, 1.0, 2.0);
const float s5[5] = float[5]( 1.0,  4.0, 6.0, 4.0, 1.0);

void main() {
    vec2 uv = v_uv;
    vec2 t  = u_texelSize;

    float gradX = 0.0;
    float gradY = 0.0;

    float use5 = step(1.5, float(u_kernelRadius));
    float use3 = 1.0 - use5;

    float kernelNormalization =
    mix(1.0, 1.0 / 12.0, use5);

    for (int y = 0; y < 5; ++y) {
        for (int x = 0; x < 5; ++x) {

            vec2 offset = vec2(float(x - 2), float(y - 2)) * t;
            float luma  = texture(u_input, uv + offset).r;

            float gx =
                d3[x] * s3[y] * use3 +
                d5[x] * s5[y] * use5;

            float gy =
                s3[x] * d3[y] * use3 +
                s5[x] * d5[y] * use5;

            gradX += luma * gx;
            gradY += luma * gy;
        }
    }

    float ax = abs(gradX);
    float ay = abs(gradY);

    float wX = clamp(1.0 - u_directionBias, 0.0, 2.0) * 0.5;
    float wY = clamp(1.0 + u_directionBias, 0.0, 2.0) * 0.5;

    float edge =
        wX * ax +
        wY * ay;

    edge = edge * kernelNormalization;
    edge = max(edge * u_edgeGain - u_minEdge, 0.0);

    outColor = vec4(edge, edge, edge, 1.0);
}
`;class t_ extends Lt{sobelProgramInfo;outputRenderTarget;constructor(t,r){super(t,r),this.sobelProgramInfo=this.createProgramInfo(e_),this.outputRenderTarget=se.createRGBA8(t)}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("SobelPass expects R8 or RGBA8 render targets");return this.executeProgram(this.sobelProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class r_ extends Ot{get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}get directionBias(){return this.uniforms.u_directionBias}set directionBias(t){this.uniforms.u_directionBias=t}get edgeGain(){return this.uniforms.u_edgeGain}set edgeGain(t){this.uniforms.u_edgeGain=t}get minEdge(){return this.uniforms.u_minEdge}set minEdge(t){this.uniforms.u_minEdge=t}}const n_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;   // Sobel magnitude (0..1)
uniform float u_threshold;

out vec4 outColor;

void main() {
    float strength = texture(u_input, v_uv).r;

    // Drop below threshold, preserve magnitude
    float edge = strength * step(u_threshold, strength);

    outColor = vec4(edge, edge, edge, 1.0);
}`;class s_ extends Lt{programInfo;outputRenderTarget;constructor(t,r){super(t,r),this.programInfo=this.createProgramInfo(n_),this.outputRenderTarget=se.createRGBA8(t)}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("MagnatudeGatePass expects R8 or RGBA8 render targets");return this.executeProgram(this.programInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class o_ extends Ot{get threshold(){return this.uniforms.u_threshold}set threshold(t){this.uniforms.u_threshold=t}}const i_=`#version 300 es
precision highp float;

in vec2 v_uv;

/*
  u_input is always bound by the pipeline
  and represents the CURRENT frame.
*/
uniform sampler2D u_input;

uniform sampler2D u_frame1;
uniform sampler2D u_frame2;
uniform sampler2D u_frame3;
uniform sampler2D u_frame4;

out vec4 outColor;

/*
  Exact median of 5 values.
  Deterministic, branchless.
*/
float median5(
    float v0,
    float v1,
    float v2,
    float v3,
    float v4
) {
    float a = min(v0, v1);
    float b = max(v0, v1);
    float c = min(v2, v3);
    float d = max(v2, v3);

    float e = max(a, c);
    float f = min(b, d);

    float g = min(e, f);
    float h = max(e, f);

    return max(min(h, v4), g);
}

void main() {
    float value0 = texture(u_input,  v_uv).r;
    float value1 = texture(u_frame1, v_uv).r;
    float value2 = texture(u_frame2, v_uv).r;
    float value3 = texture(u_frame3, v_uv).r;
    float value4 = texture(u_frame4, v_uv).r;

    float medianValue =
        median5(value0, value1, value2, value3, value4);

    outColor = vec4(medianValue, medianValue, medianValue, 1.0);
}
`;class a_ extends Lt{programInfo;outputRenderTarget;history=[];historyWriteIndex=0;historyInitialized=!1;constructor(t,r){super(t,r),this.programInfo=this.createProgramInfo(i_),this.outputRenderTarget=se.createRGBA8(t),this.history=[se.createRGBA8(t),se.createRGBA8(t),se.createRGBA8(t),se.createRGBA8(t)]}ensureHistorySized(t,r){for(const n of this.history)(n.framebufferInfo.width!==t||n.framebufferInfo.height!==r)&&n.resize(t,r)}copyToHistory(t){const r=this.gl,n=this.history[this.historyWriteIndex];r.bindFramebuffer(r.READ_FRAMEBUFFER,t.framebufferInfo.framebuffer),r.bindTexture(r.TEXTURE_2D,n.texture),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,0,0,t.framebufferInfo.width,t.framebufferInfo.height),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),this.historyWriteIndex=(this.historyWriteIndex+1)%this.history.length}seedHistory(t){for(let r=0;r<this.history.length;r++)this.historyWriteIndex=r,this.copyToHistory(t);this.historyInitialized=!0}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("TemporalPass expects R8 or RGBA8 render targets");return this.ensureHistorySized(t.framebufferInfo.width,t.framebufferInfo.height),(this.outputRenderTarget.framebufferInfo.width!==t.framebufferInfo.width||this.outputRenderTarget.framebufferInfo.height!==t.framebufferInfo.height)&&this.outputRenderTarget.resize(t.framebufferInfo.width,t.framebufferInfo.height),this.historyInitialized||this.seedHistory(t),this.settings.uniforms.u_frame1=this.history[0].texture,this.settings.uniforms.u_frame2=this.history[1].texture,this.settings.uniforms.u_frame3=this.history[2].texture,this.settings.uniforms.u_frame4=this.history[3].texture,this.executeProgram(this.programInfo,t,r?null:this.outputRenderTarget),this.copyToHistory(t),this.outputRenderTarget}}class l_ extends Ot{}const u_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2 u_corners[4];
uniform float u_thickness;

out vec4 outColor;

float segmentDistance(vec2 p, vec2 a, vec2 b) {
    vec2 ab = b - a;
    float t = clamp(dot(p - a, ab) / dot(ab, ab), 0.0, 1.0);
    vec2 closest = a + t * ab;
    return length(p - closest);
}

void main() {
    vec4 base = texture(u_input, v_uv);

    vec2 p = v_uv;
    float d0 = segmentDistance(p, u_corners[0], u_corners[1]);
    float d1 = segmentDistance(p, u_corners[1], u_corners[2]);
    float d2 = segmentDistance(p, u_corners[2], u_corners[3]);
    float d3 = segmentDistance(p, u_corners[3], u_corners[0]);

    float minDist = min(min(d0, d1), min(d2, d3));

    float edge = step(u_thickness, minDist);
    float mask = 1.0 - edge;

    outColor = mix(base, vec4(1.0, 1.0, 1.0, 1.0), mask);
}
`;class c_ extends Lt{boxProgramInfo;outputRenderTarget;pixelBuffer=null;pixelChannels=0;constructor(t,r){super(t,r),this.boxProgramInfo=this.createProgramInfo(u_),this.outputRenderTarget=se.createRGBA8(t)}ensurePixelBuffer(t,r,n){const s=t*r*n;(!this.pixelBuffer||this.pixelBuffer.length!==s)&&(this.pixelBuffer=new Uint8Array(s)),this.pixelChannels=n}readPixelsToBuffer(t){const r=t.framebufferInfo.width,n=t.framebufferInfo.height,s=t.isR8,o=s?this.gl.RED:this.gl.RGBA,a=s?1:4;return this.ensurePixelBuffer(r,n,a),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t.framebufferInfo.framebuffer),this.gl.readPixels(0,0,r,n,o,this.gl.UNSIGNED_BYTE,this.pixelBuffer),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),{width:r,height:n}}sampleMax3x3(t,r,n,s){if(!this.pixelBuffer)return 0;const o=Math.round(t),a=Math.round(r);let i=0;for(let l=-1;l<=1;l++)for(let u=-1;u<=1;u++){const f=Math.max(0,Math.min(n-1,o+u)),h=Math.max(0,Math.min(s-1,a+l)),d=((s-1-h)*n+f)*this.pixelChannels,m=this.pixelBuffer[d]/255;m>i&&(i=m)}return i}findRayHits(t,r,n,s,o){const a=(t-1)*.5,i=(r-1)*.5,l=[];for(let u=0;u<s;u++){const f=u/s*Math.PI*2,h=Math.cos(f),c=Math.sin(f),d=h>0?(t-1-a)/h:h<0?-a/h:1/0,m=c>0?(r-1-i)/c:c<0?-i/c:1/0,_=Math.min(d,m);if(isFinite(_))for(let v=_;v>=0;v-=o){const b=a+h*v,E=i+c*v;if(this.sampleMax3x3(b,E,t,r)>=n){l.push({x:b/(t-1),y:E/(r-1)});break}}}return l}computeOBBCorners(t,r){if(t.length<4)return[{x:.5-.25,y:.5-.25},{x:.5+.25,y:.5-.25},{x:.5+.25,y:.5+.25},{x:.5-.25,y:.5+.25}];let n=0,s=0;for(const A of t)n+=A.x,s+=A.y;n/=t.length,s/=t.length;let o=0,a=0,i=0;for(const A of t){const C=A.x-n,U=A.y-s;o+=C*C,a+=C*U,i+=U*U}const l=o+i,u=o*i-a*a,f=Math.sqrt(Math.max(0,l*l-4*u)),h=(l+f)*.5;let c=a,d=h-o;const m=Math.hypot(c,d)||1;c/=m,d/=m;const _=-d,v=c,b=[],E=[];for(const A of t){const C=A.x-n,U=A.y-s;b.push(C*c+U*d),E.push(C*_+U*v)}b.sort((A,C)=>A-C),E.sort((A,C)=>A-C);const y=Math.floor(b.length*Math.min(Math.max(r,0),.45)),R=b[y],x=b[b.length-1-y],S=E[y],F=E[E.length-1-y],P=[{x:n+R*c+S*_,y:s+R*d+S*v},{x:n+x*c+S*_,y:s+x*d+S*v},{x:n+x*c+F*_,y:s+x*d+F*v},{x:n+R*c+F*_,y:s+R*d+F*v}];for(const A of P)A.x=Math.max(0,Math.min(1,A.x)),A.y=Math.max(0,Math.min(1,A.y));return P}applyInternal(t,r){const n=this.settings,{width:s,height:o}=this.readPixelsToBuffer(t),a=this.findRayHits(s,o,n.threshold,Math.max(32,n.rayCount),n.step),i=this.computeOBBCorners(a,n.trimFraction);return this.settings.uniforms.u_corners=[i[0].x,1-i[0].y,i[1].x,1-i[1].y,i[2].x,1-i[2].y,i[3].x,1-i[3].y],this.settings.uniforms.u_thickness=1.5/Math.max(s,o),this.settings.uniforms.u_input=t.texture,this.executeProgram(this.boxProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class f_ extends Ot{_threshold=.2;_rayCount=64;_step=.5;_trimFraction=.12;_angleThreshold=0;_distanceThreshold=0;get threshold(){return this._threshold}set threshold(t){this._threshold=t}get rayCount(){return this._rayCount}set rayCount(t){this._rayCount=t}get step(){return this._step}set step(t){this._step=t}get trimFraction(){return this._trimFraction}set trimFraction(t){this._trimFraction=t}get angleThreshold(){return this._angleThreshold}set angleThreshold(t){this._angleThreshold=t}get distanceThreshold(){return this._distanceThreshold}set distanceThreshold(t){this._distanceThreshold=t}}class fa{pipeline;passes;passMap;constructor(t){this.pipeline=new Xm(t);const r=new jm(t),n=new Jm;n.flipX=!1,n.flipY=!1;const s=new Zm(t,n),o=new Km;o.kernelRadius=2,o.sigmaSpatial=2,o.sigmaRange=.1;const a=new Ym(t,o),i=new r_;i.kernelRadius=1,i.directionBias=0,i.edgeGain=1,i.minEdge=0;const l=new t_(t,i),u=new o_;u.threshold=.15;const f=new s_(t,u),h=new l_;h.enabled=!0;const c=new a_(t,h),d=new f_;d.threshold=.12,d.rayCount=64,d.angleThreshold=.35,d.distanceThreshold=.5;const m=new c_(t,d);this.passes=[{id:"rec709-luma",label:"Rec709 Luma",required:!0,pass:r},{id:"orientation",label:"Orientation",required:!1,pass:s},{id:"bilateral",label:"Bilateral",required:!1,pass:a},{id:"sobel",label:"Sobel",required:!1,pass:l},{id:"magnatude-gate",label:"Magnitude Gate",required:!1,pass:f},{id:"temporal",label:"Temporal Median",required:!1,pass:c},{id:"ray-box",label:"Ray Box",required:!1,pass:m}],this.passMap=new Map(this.passes.map(_=>[_.id,_]));for(const _ of this.passes)this.pipeline.addPass(_.pass)}getPass(t){return this.passMap.get(t)?.pass}}class lr{constructor(t){this.mediaStreamTrack=t,this.imageCapture=new ImageCapture(t)}static _imageCaptureContexts=new Map;static _initialized=!1;static get imageCaptureContexts(){if(!lr._initialized)throw new Error("ImageCaptureContext not initialized. Call ImageCaptureContext.initialize() first.");return lr._imageCaptureContexts}imageCapture;static async initialize(){await this.refreshVideoTracks(),this._initialized=!0}static async refreshVideoTracks(){await navigator.mediaDevices.getUserMedia({video:!0});const r=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),n=new Set;for(const s of r){const a=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:s.deviceId}}})).getVideoTracks()[0];n.add(a.id),this._imageCaptureContexts.has(a.id)||this._imageCaptureContexts.set(a.id,new lr(a))}for(const[s]of this._imageCaptureContexts)n.has(s)||this._imageCaptureContexts.delete(s)}}var d_=ee('<button type="button" role="tab"> </button>'),h_=ee('<div class="passBar" role="tablist" aria-label="Pipeline passes"></div>');function m_(e,t){pe(t,!1);let r=Y(t,"passes",24,()=>[]),n=Y(t,"selectedPassId",8);const s=Us();Ve();var o=h_();ys(o,5,r,a=>a.id,(a,i)=>{var l=d_();let u;var f=O(l);Te(()=>{u=Rs(l,1,"passButton",null,u,{passButtonActive:n()===p(i).id}),tn(l,"aria-selected",(ke(n()),p(i),we(()=>n()===p(i).id))),Je(f,(p(i),we(()=>p(i).label)))}),ir("click",l,()=>s("select",{passId:p(i).id})),G(a,l)}),G(e,o),xe()}var __=ee('<label class="setting"><div class="settingLabel"> </div> <div class="settingControl sliderControl svelte-2wv2v5"><div class="sliderShell svelte-2wv2v5"><div class="sliderTrack svelte-2wv2v5"><input class="sliderInput svelte-2wv2v5" type="range"/></div> <div class="settingValue svelte-2wv2v5"> </div></div></div></label>');function Re(e,t){pe(t,!1);let r=Y(t,"label",8),n=Y(t,"min",8),s=Y(t,"max",8),o=Y(t,"step",8),a=Y(t,"value",8);const i=Us();Ve();var l=__(),u=O(l),f=O(u),h=L(u,2),c=O(h),d=O(c),m=O(d),_=L(d,2),v=O(_);Te(()=>{Je(f,r()),tn(m,"min",n()),tn(m,"max",s()),tn(m,"step",o()),Qc(m,a()),Je(v,a())}),ir("input",m,b=>i("input",{value:Number(b.currentTarget.value)})),G(e,l),xe()}var v_=ee('<label class="setting toggleSetting"><div class="settingLabel"> </div> <div class="settingControl"><input type="checkbox"/></div></label>');function ct(e,t){pe(t,!1);let r=Y(t,"label",8),n=Y(t,"checked",8);const s=Us();Ve();var o=v_(),a=O(o),i=O(a),l=L(a,2),u=O(l);Te(()=>{Je(i,r()),Zc(u,n())}),ir("change",u,f=>s("change",{checked:f.currentTarget.checked})),G(e,o),xe()}var p_=ee('<div class="settings"><!> <!> <!> <!></div>');function x_(e,t){pe(t,!1);let r=Y(t,"settings",12),n=Y(t,"required",8,!1),s=I(r().enabled),o=I(r().kernelRadius),a=I(r().sigmaSpatial),i=I(r().sigmaRange);function l(E){g(s,E),r(r().enabled=E,!0)}function u(E){g(o,E),r(r().kernelRadius=E,!0)}function f(E){g(a,E),r(r().sigmaSpatial=E,!0)}function h(E){g(i,E),r(r().sigmaRange=E,!0)}Nt(()=>ke(r()),()=>{r()&&(g(s,r().enabled),g(o,r().kernelRadius),g(a,r().sigmaSpatial),g(i,r().sigmaRange))}),kt(),Ve();var c=p_(),d=O(c);{var m=E=>{ct(E,{label:"Enabled",get checked(){return p(s)},$$events:{change:y=>l(y.detail.checked)}})};ne(d,E=>{n()||E(m)})}var _=L(d,2);Re(_,{label:"Kernel Radius",min:1,max:5,step:1,get value(){return p(o)},$$events:{input:E=>u(E.detail.value)}});var v=L(_,2);Re(v,{label:"Sigma Spatial",min:.5,max:10,step:.25,get value(){return p(a)},$$events:{input:E=>f(E.detail.value)}});var b=L(v,2);Re(b,{label:"Sigma Range",min:.01,max:.5,step:.01,get value(){return p(i)},$$events:{input:E=>h(E.detail.value)}}),G(e,c),xe()}var b_=ee('<div class="settings"><div class="settingsEmpty">Rec709 is required and has no settings.</div></div>');function E_(e){var t=b_();G(e,t)}var y_=ee('<div class="settings"><!> <!> <!> <!> <!></div>');function g_(e,t){pe(t,!1);let r=Y(t,"settings",12),n=Y(t,"required",8,!1),s=I(r().enabled),o=I(r().kernelRadius),a=I(r().directionBias),i=I(r().edgeGain),l=I(r().minEdge);function u(x){g(s,x),r(r().enabled=x,!0)}function f(x){g(o,x),r(r().kernelRadius=x,!0)}function h(x){g(a,x),r(r().directionBias=x,!0)}function c(x){g(i,x),r(r().edgeGain=x,!0)}function d(x){g(l,x),r(r().minEdge=x,!0)}Nt(()=>ke(r()),()=>{r()&&(g(s,r().enabled),g(o,r().kernelRadius),g(a,r().directionBias),g(i,r().edgeGain),g(l,r().minEdge))}),kt(),Ve();var m=y_(),_=O(m);{var v=x=>{ct(x,{label:"Enabled",get checked(){return p(s)},$$events:{change:S=>u(S.detail.checked)}})};ne(_,x=>{n()||x(v)})}var b=L(_,2);Re(b,{label:"Kernel Radius",min:1,max:2,step:1,get value(){return p(o)},$$events:{input:x=>f(x.detail.value)}});var E=L(b,2);Re(E,{label:"Direction Bias",min:-1,max:1,step:.1,get value(){return p(a)},$$events:{input:x=>h(x.detail.value)}});var y=L(E,2);Re(y,{label:"Edge Gain",min:0,max:8,step:.1,get value(){return p(i)},$$events:{input:x=>c(x.detail.value)}});var R=L(y,2);Re(R,{label:"Min Edge",min:0,max:1,step:.01,get value(){return p(l)},$$events:{input:x=>d(x.detail.value)}}),G(e,m),xe()}var R_=ee('<div class="settings"><!> <!></div>');function S_(e,t){pe(t,!1);let r=Y(t,"settings",12),n=Y(t,"required",8,!1),s=I(r().enabled),o=I(r().threshold);function a(c){g(s,c),r(r().enabled=c,!0)}function i(c){g(o,c),r(r().threshold=c,!0)}Nt(()=>ke(r()),()=>{r()&&(g(s,r().enabled),g(o,r().threshold))}),kt(),Ve();var l=R_(),u=O(l);{var f=c=>{ct(c,{label:"Enabled",get checked(){return p(s)},$$events:{change:d=>a(d.detail.checked)}})};ne(u,c=>{n()||c(f)})}var h=L(u,2);Re(h,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(o)},$$events:{input:c=>i(c.detail.value)}}),G(e,l),xe()}var T_=ee('<div class="settings"><!> <div class="settingsEmpty">Uses last 4 frames (median). No tunable parameters.</div></div>');function A_(e,t){pe(t,!1);let r=Y(t,"settings",12),n=Y(t,"required",8,!1),s=I(r().enabled);function o(u){g(s,u),r(r().enabled=u,!0)}Nt(()=>ke(r()),()=>{r()&&g(s,r().enabled)}),kt(),Ve();var a=T_(),i=O(a);{var l=u=>{ct(u,{label:"Enabled",get checked(){return p(s)},$$events:{change:f=>o(f.detail.checked)}})};ne(i,u=>{n()||u(l)})}G(e,a),xe()}var F_=ee('<div class="settings"><!> <!> <!> <!> <!></div>');function w_(e,t){pe(t,!1);let r=Y(t,"settings",12),n=Y(t,"required",8,!1),s=I(r().enabled),o=I(r().threshold),a=I(r().rayCount),i=I(r().step),l=I(r().trimFraction);function u(x){g(s,x),r(r().enabled=x,!0)}function f(x){g(o,x),r(r().threshold=x,!0)}function h(x){g(a,x),r(r().rayCount=x,!0)}function c(x){g(i,x),r(r().step=x,!0)}function d(x){g(l,x),r(r().trimFraction=x,!0)}Nt(()=>ke(r()),()=>{r()&&(g(s,r().enabled),g(o,r().threshold),g(a,r().rayCount),g(i,r().step),g(l,r().trimFraction))}),kt(),Ve();var m=F_(),_=O(m);{var v=x=>{ct(x,{label:"Enabled",get checked(){return p(s)},$$events:{change:S=>u(S.detail.checked)}})};ne(_,x=>{n()||x(v)})}var b=L(_,2);Re(b,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(o)},$$events:{input:x=>f(x.detail.value)}});var E=L(b,2);Re(E,{label:"Ray Count",min:32,max:256,step:8,get value(){return p(a)},$$events:{input:x=>h(Math.round(x.detail.value))}});var y=L(E,2);Re(y,{label:"Step (px)",min:.25,max:5,step:.25,get value(){return p(i)},$$events:{input:x=>c(x.detail.value)}});var R=L(y,2);Re(R,{label:"Trim Fraction",min:0,max:.4,step:.01,get value(){return p(l)},$$events:{input:x=>d(x.detail.value)}}),G(e,m),xe()}var P_=ee('<div class="settings"><!> <!> <!></div>');function C_(e,t){pe(t,!1);let r=Y(t,"settings",12),n=Y(t,"required",8,!1),s=I(r().enabled),o=I(r().flipX),a=I(r().flipY);function i(_){g(s,_),r(r().enabled=_,!0)}function l(_){g(o,_),r(r().flipX=_,!0)}function u(_){g(a,_),r(r().flipY=_,!0)}Nt(()=>ke(r()),()=>{r()&&(g(s,r().enabled),g(o,r().flipX),g(a,r().flipY))}),kt(),Ve();var f=P_(),h=O(f);{var c=_=>{ct(_,{label:"Enabled",get checked(){return p(s)},$$events:{change:v=>i(v.detail.checked)}})};ne(h,_=>{n()||_(c)})}var d=L(h,2);ct(d,{label:"Flip X",get checked(){return p(o)},$$events:{change:_=>l(_.detail.checked)}});var m=L(d,2);ct(m,{label:"Flip Y",get checked(){return p(a)},$$events:{change:_=>u(_.detail.checked)}}),G(e,f),xe()}var B_=ee('<div class="fpsBadge svelte-1dp3x29" aria-label="Frames per second"> </div>');function I_(e,t){pe(t,!1);let r=I(0),n=0,s=performance.now();function o(){const u=performance.now();n+=1;const f=u-s;f>=500&&(g(r,Math.round(n*1e3/f)),n=0,s=u)}var a={measure:o},i=B_(),l=O(i);return Te(()=>Je(l,`${p(r)??""} fps`)),G(e,i),ef(t,"measure",o),xe(a)}function D_(e){const t=e-1;return t*t*t+1}function da(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function M_(e,{delay:t=0,duration:r=400,easing:n=D_,x:s=0,y:o=0,opacity:a=0}={}){const i=getComputedStyle(e),l=+i.opacity,u=i.transform==="none"?"":i.transform,f=l*(1-a),[h,c]=da(s),[d,m]=da(o);return{delay:t,duration:r,easing:n,css:(_,v)=>`
			transform: ${u} translate(${(1-_)*h}${c}, ${(1-_)*d}${m});
			opacity: ${l-f*v}`}}var N_=ee('<div class="toast svelte-1fk2ial" role="status"> </div>');function k_(e,t){pe(t,!1);let r=Y(t,"message",8,""),n=Y(t,"open",12,!1),s=Y(t,"duration",8,2e3),o=I(null);Nt(()=>(ke(n()),p(o),ke(s())),()=>{n()&&(p(o)&&clearTimeout(p(o)),g(o,setTimeout(()=>n(!1),s())))}),kt();var a=ae(),i=ie(a);{var l=u=>{var f=N_(),h=O(f);Te(()=>Je(h,r())),qc(3,f,()=>M_,()=>({y:10,duration:150})),G(u,f)};ne(i,u=>{n()&&u(l)})}G(e,a),xe()}const G_={"rec709-luma":{enabled:!0},orientation:{enabled:!0,flipX:!0,flipY:!1},bilateral:{enabled:!0,kernelRadius:5,sigmaSpatial:1.5,sigmaRange:.5},sobel:{enabled:!0,kernelRadius:2,directionBias:-.1,edgeGain:.7,minEdge:0},"magnatude-gate":{enabled:!0,threshold:.035},temporal:{enabled:!0},"ray-box":{enabled:!0,threshold:.06,rayCount:256,step:.25,trimFraction:.06}},L_={passes:G_},O_={"rec709-luma":{enabled:!0},orientation:{enabled:!0,flipX:!0,flipY:!1},bilateral:{enabled:!0,kernelRadius:5,sigmaSpatial:1.5,sigmaRange:.5},sobel:{enabled:!0,kernelRadius:2,directionBias:-.1,edgeGain:.7,minEdge:0},"magnatude-gate":{enabled:!0,threshold:.035},temporal:{enabled:!0},"ray-box":{enabled:!0,threshold:.06,rayCount:256,step:.25,trimFraction:.06}},U_={passes:O_};var V_=ee("<option> </option>"),z_=ee("<option> </option>"),H_=ee('<div class="errorBanner svelte-1n46o8q" role="alert"> </div>'),X_=ee('<main class="app svelte-1n46o8q"><section class="controls svelte-1n46o8q"><div class="controlRow svelte-1n46o8q"><div class="sideSwitcher svelte-1n46o8q" role="group" aria-label="Side selector"><button type="button">Front</button> <button type="button">Rear</button></div> <!> <button class="exportButton svelte-1n46o8q" type="button">Export</button></div> <!></section> <section class="views svelte-1n46o8q"><div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Front</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div> <div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Rear</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div></section> <!> <!> <!></main>');function $_(e,t){pe(t,!1);const r={"rec709-luma":E_,bilateral:x_,sobel:g_,"magnatude-gate":S_,temporal:A_,"ray-box":w_,orientation:C_};let n=I(""),s=new Map,o=I([]),a=I(""),i=I(""),l=I("front"),u=I(null),f=I(null),h=I(null),c=I(null),d=I([]),m=I(null),_=!1,v=!1,b=I(null),E=I(!1),y=I("");function R(){g(o,Array.from(s.entries()).map(([T,w])=>({id:T,label:`${w.mediaStreamTrack.label||"Camera"} (${T})`})))}async function x(){await lr.initialize(),s=lr.imageCaptureContexts,R(),!p(a)&&p(o)[0]&&g(a,p(o)[0].id),!p(i)&&p(o)[1]&&g(i,p(o)[1].id),!p(i)&&p(o)[0]&&g(i,p(o)[0].id)}function S(T,w){const M=w?.getPass(T);return M?M.settings:null}function F(T,w){const M=w?.passes??{};for(const z of T.passes){const N=M[z.id];if(N){typeof N.enabled=="boolean"&&(z.pass.enabled=N.enabled);for(const[Xt,Un]of Object.entries(N))Xt!=="enabled"&&Xt in z.pass.settings&&(z.pass.settings[Xt]=Un)}}}function P(T){const w={};for(const M of T.passes){const z={enabled:M.pass.enabled},N=M.pass.settings;switch(M.id){case"bilateral":z.kernelRadius=N.kernelRadius,z.sigmaSpatial=N.sigmaSpatial,z.sigmaRange=N.sigmaRange;break;case"sobel":z.kernelRadius=N.kernelRadius,z.directionBias=N.directionBias,z.edgeGain=N.edgeGain,z.minEdge=N.minEdge;break;case"magnatude-gate":z.threshold=N.threshold;break;case"temporal":break;case"orientation":z.flipX=N.flipX,z.flipY=N.flipY;break;case"ray-box":z.threshold=N.threshold,z.rayCount=N.rayCount,z.step=N.step,z.trimFraction=N.trimFraction;break}w[M.id]=z}return{passes:w}}async function A(T){const w=p(T==="front"?h:c);if(!w)return;const M=JSON.stringify(P(w),null,2);await navigator.clipboard.writeText(M),g(y,`Exported ${T} settings to clipboard`),g(E,!0)}async function C(T,w){if(!T||!w)return;const M=s.get(w);if(!M)return;const z=await M.imageCapture.grabFrame();try{await T.pipeline.render(z)}finally{z.close()}}async function U(){if(_){if(v){p(b)?.measure(),requestAnimationFrame(()=>{U()});return}v=!0;try{p(b)?.measure(),await C(p(h),p(a)),await C(p(c),p(i)),g(m,null)}catch(T){g(m,T instanceof Error?T.message:String(T))}finally{v=!1,requestAnimationFrame(()=>{U()})}}}Wa(async()=>{try{await x();const T=p(u)?.getContext("webgl2"),w=p(f)?.getContext("webgl2");if(!T||!w){g(m,"WebGL2 not available for one or both canvases.");return}g(h,new fa(T)),g(c,new fa(w)),p(h)&&F(p(h),L_),p(c)&&F(p(c),U_),g(d,p(h).passes),g(n,p(d)[0]?.id??""),_=!0,U()}catch(T){g(m,T instanceof Error?T.message:String(T))}}),rf(()=>{_=!1}),Ve();var oe=X_(),j=O(oe),me=O(j),be=O(me),Ce=O(be);let Xe;var $e=L(Ce,2);let qe;var pt=L(be,2);{let T=st(()=>p(d).map(w=>({id:w.id,label:w.label})));m_(pt,{get passes(){return p(T)},get selectedPassId(){return p(n)},$$events:{select:w=>g(n,w.detail.passId)}})}var Ut=L(pt,2),Vt=L(me,2);{var zt=T=>{const w=st(()=>p(d).find(yr=>yr.id===p(n))),M=st(()=>p(w)?r[p(w).id]:null),z=st(()=>p(l)==="front"?p(h):p(c)),N=st(()=>p(w)?S(p(w).id,p(z)):null);var Xt=ae(),Un=ie(Xt);{var pu=yr=>{var To=ae(),xu=ie(To);{var bu=$t=>{var gr=ae(),Vn=ie(gr);Et(Vn,()=>p(M),(zn,Hn)=>{Hn(zn,{get required(){return p(w).required},get settings(){return p(N)}})}),G($t,gr)},Eu=$t=>{var gr=ae(),Vn=ie(gr);{var zn=qt=>{var Rr=ae(),Xn=ie(Rr);Et(Xn,()=>p(M),($n,qn)=>{qn($n,{get required(){return p(w).required},get settings(){return p(N)}})}),G(qt,Rr)},Hn=qt=>{var Rr=ae(),Xn=ie(Rr);{var $n=Yt=>{var Sr=ae(),Yn=ie(Sr);Et(Yn,()=>p(M),(Kn,Wn)=>{Wn(Kn,{get required(){return p(w).required},get settings(){return p(N)}})}),G(Yt,Sr)},qn=Yt=>{var Sr=ae(),Yn=ie(Sr);{var Kn=Kt=>{var Tr=ae(),jn=ie(Tr);Et(jn,()=>p(M),(Qn,Zn)=>{Zn(Qn,{get required(){return p(w).required},get settings(){return p(N)}})}),G(Kt,Tr)},Wn=Kt=>{var Tr=ae(),jn=ie(Tr);{var Qn=Wt=>{var Ar=ae(),Jn=ie(Ar);Et(Jn,()=>p(M),(es,ts)=>{ts(es,{get required(){return p(w).required},get settings(){return p(N)}})}),G(Wt,Ar)},Zn=Wt=>{var Ar=ae(),Jn=ie(Ar);{var es=jt=>{var Fr=ae(),rs=ie(Fr);Et(rs,()=>p(M),(ns,ss)=>{ss(ns,{get required(){return p(w).required},get settings(){return p(N)}})}),G(jt,Fr)},ts=jt=>{var Fr=ae(),rs=ie(Fr);Et(rs,()=>p(M),(ns,ss)=>{ss(ns,{get required(){return p(w).required}})}),G(jt,Fr)};ne(Jn,jt=>{p(w).id==="ray-box"?jt(es):jt(ts,!1)},!0)}G(Wt,Ar)};ne(jn,Wt=>{p(w).id==="temporal"?Wt(Qn):Wt(Zn,!1)},!0)}G(Kt,Tr)};ne(Yn,Kt=>{p(w).id==="magnatude-gate"?Kt(Kn):Kt(Wn,!1)},!0)}G(Yt,Sr)};ne(Xn,Yt=>{p(w).id==="orientation"?Yt($n):Yt(qn,!1)},!0)}G(qt,Rr)};ne(Vn,qt=>{p(w).id==="sobel"?qt(zn):qt(Hn,!1)},!0)}G($t,gr)};ne(xu,$t=>{p(w).id==="bilateral"?$t(bu):$t(Eu,!1)})}G(yr,To)};ne(Un,yr=>{p(w)&&p(M)&&p(N)&&yr(pu)})}G(T,Xt)};ne(Vt,T=>{p(n)&&T(zt)})}var xt=L(j,2),bt=O(xt),br=O(bt),Er=L(O(br),2);Te(()=>{p(a),Io(()=>{p(o)})});var Ht=O(Er);Ht.value=Ht.__value="";var $r=L(Ht);ys($r,1,()=>p(o),T=>T.id,(T,w)=>{var M=V_(),z=O(M),N={};Te(()=>{Je(z,p(w).id),N!==(N=p(w).id)&&(M.value=(M.__value=p(w).id)??"")}),G(T,M)});var W=L(br,2);os(W,T=>g(u,T),()=>p(u));var du=L(bt,2),yo=O(du),go=L(O(yo),2);Te(()=>{p(i),Io(()=>{p(o)})});var On=O(go);On.value=On.__value="";var hu=L(On);ys(hu,1,()=>p(o),T=>T.id,(T,w)=>{var M=z_(),z=O(M),N={};Te(()=>{Je(z,p(w).id),N!==(N=p(w).id)&&(M.value=(M.__value=p(w).id)??"")}),G(T,M)});var mu=L(yo,2);os(mu,T=>g(f,T),()=>p(f));var Ro=L(xt,2);{var _u=T=>{var w=H_(),M=O(w);Te(()=>Je(M,p(m))),G(T,w)};ne(Ro,T=>{p(m)&&T(_u)})}var So=L(Ro,2);os(I_(So,{$$legacy:!0}),T=>g(b,T),()=>p(b));var vu=L(So,2);k_(vu,{get message(){return p(y)},get open(){return p(E)},set open(T){g(E,T)},$$legacy:!0}),Te(()=>{Xe=Rs(Ce,1,"svelte-1n46o8q",null,Xe,{sideActive:p(l)==="front"}),qe=Rs($e,1,"svelte-1n46o8q",null,qe,{sideActive:p(l)==="rear"})}),ir("click",Ce,()=>g(l,"front")),ir("click",$e,()=>g(l,"rear")),ir("click",Ut,()=>A(p(l))),Uo(Er,()=>p(a),T=>g(a,T)),Uo(go,()=>p(i),T=>g(i,T)),G(e,oe),xe()}kc($_,{target:document.getElementById("app")});
