(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const $n=!1;var Jr=Array.isArray,$u=Array.prototype.indexOf,en=Array.from,qu=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,Ui=Object.getOwnPropertyDescriptors,Ku=Object.prototype,Yu=Array.prototype,is=Object.getPrototypeOf,Js=Object.isExtensible;function Wu(e){return e()}function qn(e){for(var t=0;t<e.length;t++)e[t]()}function Oi(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const W=2,as=4,tn=8,ju=1<<24,$e=16,qe=32,Pt=64,rn=128,ge=512,Z=1024,ue=2048,Ce=4096,he=8192,Ve=16384,us=32768,Rt=65536,eo=1<<17,Vi=1<<18,Jt=1<<19,zi=1<<20,Oe=1<<25,St=32768,Kn=1<<21,ls=1<<22,nt=1<<23,ze=Symbol("$state"),Qu=Symbol("legacy props"),Zu=Symbol(""),$t=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function cs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ju(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function el(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function tl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function rl(e){throw new Error("https://svelte.dev/e/effect_orphan")}function nl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function sl(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ol(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function il(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function al(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ul(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ll=1,cl=2,Hi=4,fl=8,dl=16,hl=1,ml=2,_l=4,xl=8,vl=16,pl=2,Q=Symbol(),bl="http://www.w3.org/1999/xhtml";function El(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function yl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Xi(e){return e===this.v}function gl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function $i(e){return!gl(e,this.v)}let er=!1,Rl=!1;function Sl(){er=!0}let q=null;function jt(e){q=e}function Se(e,t=!1,r){q={p:q,i:!1,c:null,e:null,s:e,x:null,l:er&&!t?{s:null,u:null,$:[]}:null}}function Te(e){var t=q,r=t.e;if(r!==null){t.e=null;for(var n of r)sa(n)}return e!==void 0&&(t.x=e),t.i=!0,q=t.p,e??{}}function Tr(){return!er||q!==null&&q.l===null}let qt=[];function Tl(){var e=qt;qt=[],qn(e)}function tr(e){if(qt.length===0){var t=qt;queueMicrotask(()=>{t===qt&&Tl()})}qt.push(e)}function qi(e){var t=G;if(t===null)return D.f|=nt,e;if((t.f&us)===0){if((t.f&rn)===0)throw e;t.b.error(e)}else Qt(e,t)}function Qt(e,t){for(;t!==null;){if((t.f&rn)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const Ir=new Set;let V=null,Ur=null,pe=null,Fe=[],fs=null,Yn=!1;class Pe{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#u=null;#o=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Fe=[],Ur=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const n of t)this.#i(n,r);this.is_fork||this.#c(),this.is_deferred()?(this.#a(r.effects),this.#a(r.render_effects)):(Ur=this,V=null,to(r.render_effects),to(r.effects),Ur=null,this.#u?.resolve()),pe=null}#i(t,r){t.f^=Z;for(var n=t.first;n!==null;){var s=n.f,o=(s&(qe|Pt))!==0,a=o&&(s&Z)!==0,i=a||(s&he)!==0||this.skipped_effects.has(n);if((n.f&rn)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[]}),!i&&n.fn!==null){o?n.f^=Z:(s&as)!==0?r.effects.push(n):Fr(n)&&((n.f&$e)!==0&&this.#o.add(n),yr(n));var u=n.first;if(u!==null){n=u;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)l===r.effect&&(this.#a(r.effects),this.#a(r.render_effects),r=r.parent),n=l.next,l=l.parent}}#a(t){for(const r of t)(r.f&ue)!==0?this.#o.add(r):(r.f&Ce)!==0&&this.#s.add(r),this.#l(r.deps),J(r,Z)}#l(t){if(t!==null)for(const r of t)(r.f&W)===0||(r.f&St)===0||(r.f^=St,this.#l(r.deps))}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&nt)===0&&(this.current.set(t,t.v),pe?.set(t,t.v))}activate(){V=this,this.apply()}deactivate(){V===this&&(V=null,pe=null)}flush(){if(this.activate(),Fe.length>0){if(Al(),V!==null&&V!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#f()}#f(){if(Ir.size>1){this.previous.clear();var t=pe,r=!0,n={parent:null,effect:null,effects:[],render_effects:[]};for(const o of Ir){if(o===this){r=!1;continue}const a=[];for(const[u,l]of this.current){if(o.current.has(u))if(r&&l!==o.current.get(u))o.current.set(u,l);else continue;a.push(u)}if(a.length===0)continue;const i=[...o.current.keys()].filter(u=>!this.current.has(u));if(i.length>0){var s=Fe;Fe=[];const u=new Set,l=new Map;for(const c of a)Ki(c,i,u,l);if(Fe.length>0){V=o,o.apply();for(const c of Fe)o.#i(c,n);o.deactivate()}Fe=s}}V=null,pe=t}this.committed=!0,Ir.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#o)this.#s.delete(t),J(t,ue),Tt(t);for(const t of this.#s)J(t,Ce),Tt(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#u??=Oi()).promise}static ensure(){if(V===null){const t=V=new Pe;Ir.add(V),Pe.enqueue(()=>{V===t&&t.flush()})}return V}static enqueue(t){tr(t)}apply(){}}function Al(){var e=yt;Yn=!0;var t=null;try{var r=0;for($r(!0);Fe.length>0;){var n=Pe.ensure();if(r++>1e3){var s,o;Fl()}n.process(Fe),st.clear()}}finally{Yn=!1,$r(e),fs=null}}function Fl(){try{nl()}catch(e){Qt(e,fs)}}let Le=null;function to(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ve|he))===0&&Fr(n)&&(Le=new Set,yr(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?la(n):n.fn=null),Le?.size>0)){st.clear();for(const s of Le){if((s.f&(Ve|he))!==0)continue;const o=[s];let a=s.parent;for(;a!==null;)Le.has(a)&&(Le.delete(a),o.push(a)),a=a.parent;for(let i=o.length-1;i>=0;i--){const u=o[i];(u.f&(Ve|he))===0&&yr(u)}}Le.clear()}}Le=null}}function Ki(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&W)!==0?Ki(s,t,r,n):(o&(ls|$e))!==0&&(o&ue)===0&&Yi(s,t,n)&&(J(s,ue),Tt(s))}}function Yi(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&W)!==0&&Yi(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function Tt(e){for(var t=fs=e;t.parent!==null;){t=t.parent;var r=t.f;if(Yn&&t===G&&(r&$e)!==0&&(r&Vi)===0)return;if((r&(Pt|qe))!==0){if((r&Z)===0)return;t.f^=Z}}Fe.push(t)}function Pl(e){let t=0,r=At(0),n;return()=>{br()&&(v(r),ia(()=>(t===0&&(n=Xe(()=>e(()=>vr(r)))),t+=1,()=>{tr(()=>{t-=1,t===0&&(n?.(),n=void 0,vr(r))})})))}}var wl=Rt|Jt|rn;function Cl(e,t,r){new Bl(e,t,r)}class Bl{parent;#e=!1;#t;#n=null;#r;#u;#o;#s=null;#i=null;#a=null;#l=null;#c=null;#f=0;#d=0;#m=!1;#h=null;#b=Pl(()=>(this.#h=At(this.#f),()=>{this.#h=null}));constructor(t,r,n){this.#t=t,this.#r=r,this.#u=n,this.parent=G.b,this.#e=!!this.#r.pending,this.#o=an(()=>{G.b=this;{var s=this.#v();try{this.#s=ve(()=>n(s))}catch(o){this.error(o)}this.#d>0?this.#x():this.#e=!1}return()=>{this.#c?.remove()}},wl)}#E(){try{this.#s=ve(()=>this.#u(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#i=ve(()=>t(this.#t)),Pe.enqueue(()=>{var r=this.#v();this.#s=this.#_(()=>(Pe.ensure(),ve(()=>this.#u(r)))),this.#d>0?this.#x():(Et(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#v(){var t=this.#t;return this.#e&&(this.#c=ot(),this.#t.before(this.#c),t=this.#c),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#_(t){var r=G,n=D,s=q;Be(this.#o),ie(this.#o),jt(this.#o.ctx);try{return t()}catch(o){return qi(o),null}finally{Be(r),ie(n),jt(s)}}#x(){const t=this.#r.pending;this.#s!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),da(this.#s,this.#l)),this.#i===null&&(this.#i=ve(()=>t(this.#t)))}#p(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#p(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&Et(this.#i,()=>{this.#i=null}),this.#l&&(this.#t.before(this.#l),this.#l=null))}update_pending_count(t){this.#p(t),this.#f+=t,this.#h&&Ft(this.#h,this.#f)}get_effect_pending(){return this.#b(),v(this.#h)}error(t){var r=this.#r.onerror;let n=this.#r.failed;if(this.#m||!r&&!n)throw t;this.#s&&(ae(this.#s),this.#s=null),this.#i&&(ae(this.#i),this.#i=null),this.#a&&(ae(this.#a),this.#a=null);var s=!1,o=!1;const a=()=>{if(s){yl();return}s=!0,o&&ul(),Pe.ensure(),this.#f=0,this.#a!==null&&Et(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#s=this.#_(()=>(this.#m=!1,ve(()=>this.#u(this.#t)))),this.#d>0?this.#x():this.#e=!1};var i=D;try{ie(null),o=!0,r?.(t,a),o=!1}catch(u){Qt(u,this.#o&&this.#o.parent)}finally{ie(i)}n&&tr(()=>{this.#a=this.#_(()=>{Pe.ensure(),this.#m=!0;try{return ve(()=>{n(this.#t,()=>t,()=>a)})}catch(u){return Qt(u,this.#o.parent),null}finally{this.#m=!1}})})}}function Il(e,t,r,n){const s=Tr()?nn:tt;if(r.length===0&&e.length===0){n(t.map(s));return}var o=V,a=G,i=Dl();function u(){Promise.all(r.map(l=>Ml(l))).then(l=>{i();try{n([...t.map(s),...l])}catch(c){(a.f&Ve)===0&&Qt(c,a)}o?.deactivate(),Xr()}).catch(l=>{Qt(l,a)})}e.length>0?Promise.all(e).then(()=>{i();try{return u()}finally{o?.deactivate(),Xr()}}):u()}function Dl(){var e=G,t=D,r=q,n=V;return function(o=!0){Be(e),ie(t),jt(r),o&&n?.activate()}}function Xr(){Be(null),ie(null),jt(null)}function nn(e){var t=W|ue,r=D!==null&&(D.f&W)!==0?D:null;return G!==null&&(G.f|=Jt),{ctx:q,deps:null,effects:null,equals:Xi,f:t,fn:e,reactions:null,rv:0,v:Q,wv:0,parent:r??G,ac:null}}function Ml(e,t){let r=G;r===null&&Ju();var n=r.b,s=void 0,o=At(Q),a=!D,i=new Map;return $l(()=>{var u=Oi();s=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{l===V&&l.committed&&l.deactivate(),Xr()})}catch(f){u.reject(f),Xr()}var l=V;if(a){var c=!n.is_pending();n.update_pending_count(1),l.increment(c),i.get(l)?.reject($t),i.delete(l),i.set(l,u)}const h=(f,d=void 0)=>{if(l.activate(),d)d!==$t&&(o.f|=nt,Ft(o,d));else{(o.f&nt)!==0&&(o.f^=nt),Ft(o,f);for(const[m,x]of i){if(i.delete(m),m===l)break;x.reject($t)}}a&&(n.update_pending_count(-1),l.decrement(c))};u.promise.then(h,f=>h(null,f||"unknown"))}),on(()=>{for(const u of i.values())u.reject($t)}),new Promise(u=>{function l(c){function h(){c===s?u(o):l(s)}c.then(h,h)}l(s)})}function tt(e){const t=nn(e);return t.equals=$i,t}function Wi(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ae(t[r])}}function Nl(e){for(var t=e.parent;t!==null;){if((t.f&W)===0)return(t.f&Ve)===0?t:null;t=t.parent}return null}function ds(e){var t,r=G;Be(Nl(e));try{e.f&=~St,Wi(e),t=xa(e)}finally{Be(r)}return t}function ji(e){var t=ds(e);if(e.equals(t)||(V?.is_fork||(e.v=t),e.wv=ma()),!wt)if(pe!==null)(br()||V?.is_fork)&&pe.set(e,t);else{var r=(e.f&ge)===0?Ce:Z;J(e,r)}}let Wn=new Set;const st=new Map;let Qi=!1;function At(e,t){var r={f:0,v:e,reactions:null,equals:Xi,rv:0,wv:0};return r}function Ze(e,t){const r=At(e);return Wl(r),r}function k(e,t=!1,r=!0){const n=At(e);return t||(n.equals=$i),er&&r&&q!==null&&q.l!==null&&(q.l.s??=[]).push(n),n}function w(e,t,r=!1){D!==null&&(!we||(D.f&eo)!==0)&&Tr()&&(D.f&(W|$e|ls|eo))!==0&&!He?.includes(e)&&al();let n=r?Kt(t):t;return Ft(e,n)}function Ft(e,t){if(!e.equals(t)){var r=e.v;wt?st.set(e,t):st.set(e,r),e.v=t;var n=Pe.ensure();n.capture(e,r),(e.f&W)!==0&&((e.f&ue)!==0&&ds(e),J(e,(e.f&ge)!==0?Z:Ce)),e.wv=ma(),Zi(e,ue),Tr()&&G!==null&&(G.f&Z)!==0&&(G.f&(qe|Pt))===0&&(xe===null?jl([e]):xe.push(e)),!n.is_fork&&Wn.size>0&&!Qi&&kl()}return t}function kl(){Qi=!1;var e=yt;$r(!0);const t=Array.from(Wn);try{for(const r of t)(r.f&Z)!==0&&J(r,Ce),Fr(r)&&yr(r)}finally{$r(e)}Wn.clear()}function vr(e){w(e,e.v+1)}function Zi(e,t){var r=e.reactions;if(r!==null)for(var n=Tr(),s=r.length,o=0;o<s;o++){var a=r[o],i=a.f;if(!(!n&&a===G)){var u=(i&ue)===0;if(u&&J(a,t),(i&W)!==0){var l=a;pe?.delete(l),(i&St)===0&&(i&ge&&(a.f|=St),Zi(l,Ce))}else u&&((i&$e)!==0&&Le!==null&&Le.add(a),Tt(a))}}}function Kt(e){if(typeof e!="object"||e===null||ze in e)return e;const t=is(e);if(t!==Ku&&t!==Yu)return e;var r=new Map,n=Jr(e),s=Ze(0),o=gt,a=i=>{if(gt===o)return i();var u=D,l=gt;ie(null),ao(o);var c=i();return ie(u),ao(l),c};return n&&r.set("length",Ze(e.length)),new Proxy(e,{defineProperty(i,u,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&ol();var c=r.get(u);return c===void 0?c=a(()=>{var h=Ze(l.value);return r.set(u,h),h}):w(c,l.value,!0),!0},deleteProperty(i,u){var l=r.get(u);if(l===void 0){if(u in i){const c=a(()=>Ze(Q));r.set(u,c),vr(s)}}else w(l,Q),vr(s);return!0},get(i,u,l){if(u===ze)return e;var c=r.get(u),h=u in i;if(c===void 0&&(!h||bt(i,u)?.writable)&&(c=a(()=>{var d=Kt(h?i[u]:Q),m=Ze(d);return m}),r.set(u,c)),c!==void 0){var f=v(c);return f===Q?void 0:f}return Reflect.get(i,u,l)},getOwnPropertyDescriptor(i,u){var l=Reflect.getOwnPropertyDescriptor(i,u);if(l&&"value"in l){var c=r.get(u);c&&(l.value=v(c))}else if(l===void 0){var h=r.get(u),f=h?.v;if(h!==void 0&&f!==Q)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return l},has(i,u){if(u===ze)return!0;var l=r.get(u),c=l!==void 0&&l.v!==Q||Reflect.has(i,u);if(l!==void 0||G!==null&&(!c||bt(i,u)?.writable)){l===void 0&&(l=a(()=>{var f=c?Kt(i[u]):Q,d=Ze(f);return d}),r.set(u,l));var h=v(l);if(h===Q)return!1}return c},set(i,u,l,c){var h=r.get(u),f=u in i;if(n&&u==="length")for(var d=l;d<h.v;d+=1){var m=r.get(d+"");m!==void 0?w(m,Q):d in i&&(m=a(()=>Ze(Q)),r.set(d+"",m))}if(h===void 0)(!f||bt(i,u)?.writable)&&(h=a(()=>Ze(void 0)),w(h,Kt(l)),r.set(u,h));else{f=h.v!==Q;var x=a(()=>Kt(l));w(h,x)}var _=Reflect.getOwnPropertyDescriptor(i,u);if(_?.set&&_.set.call(c,l),!f){if(n&&typeof u=="string"){var p=r.get("length"),g=Number(u);Number.isInteger(g)&&g>=p.v&&w(p,g+1)}vr(s)}return!0},ownKeys(i){v(s);var u=Reflect.ownKeys(i).filter(h=>{var f=r.get(h);return f===void 0||f.v!==Q});for(var[l,c]of r)c.v!==Q&&!(l in i)&&u.push(l);return u},setPrototypeOf(){il()}})}function ro(e){try{if(e!==null&&typeof e=="object"&&ze in e)return e[ze]}catch{}return e}function Gl(e,t){return Object.is(ro(e),ro(t))}var no,Ji,ea,ta;function Ll(){if(no===void 0){no=window,Ji=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ea=bt(t,"firstChild").get,ta=bt(t,"nextSibling").get,Js(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Js(r)&&(r.__t=void 0)}}function ot(e=""){return document.createTextNode(e)}function hs(e){return ea.call(e)}function Ar(e){return ta.call(e)}function U(e,t){return hs(e)}function me(e,t=!1){{var r=hs(e);return r instanceof Comment&&r.data===""?Ar(r):r}}function z(e,t=1,r=!1){let n=e;for(;t--;)n=Ar(n);return n}function Ul(e){e.textContent=""}function ra(){return!1}let so=!1;function Ol(){so||(so=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function sn(e){var t=D,r=G;ie(null),Be(null);try{return e()}finally{ie(t),Be(r)}}function Vl(e,t,r,n=r){e.addEventListener(t,()=>sn(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),Ol()}function na(e){G===null&&(D===null&&rl(),tl()),wt&&el()}function zl(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Me(e,t,r){var n=G;n!==null&&(n.f&he)!==0&&(e|=he);var s={ctx:q,deps:null,nodes:null,f:e|ue|ge,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{yr(s),s.f|=us}catch(i){throw ae(s),i}else t!==null&&Tt(s);var o=s;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&Jt)===0&&(o=o.first,(e&$e)!==0&&(e&Rt)!==0&&o!==null&&(o.f|=Rt)),o!==null&&(o.parent=n,n!==null&&zl(o,n),D!==null&&(D.f&W)!==0&&(e&Pt)===0)){var a=D;(a.effects??=[]).push(o)}return s}function br(){return D!==null&&!we}function on(e){const t=Me(tn,null,!1);return J(t,Z),t.teardown=e,t}function jn(e){na();var t=G.f,r=!D&&(t&qe)!==0&&(t&us)===0;if(r){var n=q;(n.e??=[]).push(e)}else return sa(e)}function sa(e){return Me(as|zi,e,!1)}function Hl(e){return na(),Me(tn|zi,e,!0)}function Xl(e){Pe.ensure();const t=Me(Pt|Jt,e,!0);return(r={})=>new Promise(n=>{r.outro?Et(t,()=>{ae(t),n(void 0)}):(ae(t),n(void 0))})}function oa(e){return Me(as,e,!1)}function $l(e){return Me(ls|Jt,e,!0)}function ia(e,t=0){return Me(tn|t,e,!0)}function Ue(e,t=[],r=[],n=[]){Il(n,t,r,s=>{Me(tn,()=>e(...s.map(v)),!0)})}function an(e,t=0){var r=Me($e|t,e,!0);return r}function ve(e){return Me(qe|Jt,e,!0)}function aa(e){var t=e.teardown;if(t!==null){const r=wt,n=D;io(!0),ie(null);try{t.call(null)}finally{io(r),ie(n)}}}function ua(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&sn(()=>{s.abort($t)});var n=r.next;(r.f&Pt)!==0?r.parent=null:ae(r,t),r=n}}function ql(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&qe)===0&&ae(t),t=r}}function ae(e,t=!0){var r=!1;(t||(e.f&Vi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Kl(e.nodes.start,e.nodes.end),r=!0),ua(e,t&&!r),qr(e,0),J(e,Ve);var n=e.nodes&&e.nodes.t;if(n!==null)for(const o of n)o.stop();aa(e);var s=e.parent;s!==null&&s.first!==null&&la(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Kl(e,t){for(;e!==null;){var r=e===t?null:Ar(e);e.remove(),e=r}}function la(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Et(e,t,r=!0){var n=[];ca(e,n,!0);var s=()=>{r&&ae(e),t&&t()},o=n.length;if(o>0){var a=()=>--o||s();for(var i of n)i.out(a)}else s()}function ca(e,t,r){if((e.f&he)===0){e.f^=he;var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)(i.is_global||r)&&t.push(i);for(var s=e.first;s!==null;){var o=s.next,a=(s.f&Rt)!==0||(s.f&qe)!==0&&(e.f&$e)!==0;ca(s,t,a?r:!1),s=o}}}function ms(e){fa(e,!0)}function fa(e,t){if((e.f&he)!==0){e.f^=he,(e.f&Z)===0&&(J(e,ue),Tt(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Rt)!==0||(r.f&qe)!==0;fa(r,s?t:!1),r=n}var o=e.nodes&&e.nodes.t;if(o!==null)for(const a of o)(a.is_global||t)&&a.in()}}function da(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var s=r===n?null:Ar(r);t.append(r),r=s}}let Xt=null;function Yl(e){var t=Xt;try{if(Xt=new Set,Xe(e),t!==null)for(var r of Xt)t.add(r);return Xt}finally{Xt=t}}function oo(e){for(var t of Yl(e))Ft(t,t.v)}let yt=!1;function $r(e){yt=e}let wt=!1;function io(e){wt=e}let D=null,we=!1;function ie(e){D=e}let G=null;function Be(e){G=e}let He=null;function Wl(e){D!==null&&(He===null?He=[e]:He.push(e))}let te=null,fe=0,xe=null;function jl(e){xe=e}let ha=1,Er=0,gt=Er;function ao(e){gt=e}function ma(){return++ha}function Fr(e){var t=e.f;if((t&ue)!==0)return!0;if(t&W&&(e.f&=~St),(t&Ce)!==0){var r=e.deps;if(r!==null)for(var n=r.length,s=0;s<n;s++){var o=r[s];if(Fr(o)&&ji(o),o.wv>e.wv)return!0}(t&ge)!==0&&pe===null&&J(e,Z)}return!1}function _a(e,t,r=!0){var n=e.reactions;if(n!==null&&!He?.includes(e))for(var s=0;s<n.length;s++){var o=n[s];(o.f&W)!==0?_a(o,t,!1):t===o&&(r?J(o,ue):(o.f&Z)!==0&&J(o,Ce),Tt(o))}}function xa(e){var t=te,r=fe,n=xe,s=D,o=He,a=q,i=we,u=gt,l=e.f;te=null,fe=0,xe=null,D=(l&(qe|Pt))===0?e:null,He=null,jt(e.ctx),we=!1,gt=++Er,e.ac!==null&&(sn(()=>{e.ac.abort($t)}),e.ac=null);try{e.f|=Kn;var c=e.fn,h=c(),f=e.deps;if(te!==null){var d;if(qr(e,fe),f!==null&&fe>0)for(f.length=fe+te.length,d=0;d<te.length;d++)f[fe+d]=te[d];else e.deps=f=te;if(br()&&(e.f&ge)!==0)for(d=fe;d<f.length;d++)(f[d].reactions??=[]).push(e)}else f!==null&&fe<f.length&&(qr(e,fe),f.length=fe);if(Tr()&&xe!==null&&!we&&f!==null&&(e.f&(W|Ce|ue))===0)for(d=0;d<xe.length;d++)_a(xe[d],e);return s!==null&&s!==e&&(Er++,xe!==null&&(n===null?n=xe:n.push(...xe))),(e.f&nt)!==0&&(e.f^=nt),h}catch(m){return qi(m)}finally{e.f^=Kn,te=t,fe=r,xe=n,D=s,He=o,jt(a),we=i,gt=u}}function Ql(e,t){let r=t.reactions;if(r!==null){var n=$u.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&W)!==0&&(te===null||!te.includes(t))&&(J(t,Ce),(t.f&ge)!==0&&(t.f^=ge,t.f&=~St),Wi(t),qr(t,0))}function qr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Ql(e,r[n])}function yr(e){var t=e.f;if((t&Ve)===0){J(e,Z);var r=G,n=yt;G=e,yt=!0;try{(t&($e|ju))!==0?ql(e):ua(e),aa(e);var s=xa(e);e.teardown=typeof s=="function"?s:null,e.wv=ha;var o;$n&&Rl&&(e.f&ue)!==0&&e.deps}finally{yt=n,G=r}}}function v(e){var t=e.f,r=(t&W)!==0;if(Xt?.add(e),D!==null&&!we){var n=G!==null&&(G.f&Ve)!==0;if(!n&&!He?.includes(e)){var s=D.deps;if((D.f&Kn)!==0)e.rv<Er&&(e.rv=Er,te===null&&s!==null&&s[fe]===e?fe++:te===null?te=[e]:te.includes(e)||te.push(e));else{(D.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[D]:o.includes(D)||o.push(D)}}}if(wt){if(st.has(e))return st.get(e);if(r){var a=e,i=a.v;return((a.f&Z)===0&&a.reactions!==null||pa(a))&&(i=ds(a)),st.set(a,i),i}}else r&&(!pe?.has(e)||V?.is_fork&&!br())&&(a=e,Fr(a)&&ji(a),yt&&br()&&(a.f&ge)===0&&va(a));if(pe?.has(e))return pe.get(e);if((e.f&nt)!==0)throw e.v;return e.v}function va(e){if(e.deps!==null){e.f^=ge;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&W)!==0&&(t.f&ge)===0&&va(t)}}function pa(e){if(e.v===Q)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(st.has(t)||(t.f&W)!==0&&pa(t))return!0;return!1}function Xe(e){var t=we;try{return we=!0,e()}finally{we=t}}const Zl=-7169;function J(e,t){e.f=e.f&Zl|t}function ba(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ze in e)Qn(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ze in r&&Qn(r)}}}function Qn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Qn(e[n],t)}catch{}const r=is(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Ui(r);for(let s in n){const o=n[s].get;if(o)try{o.call(e)}catch{}}}}}const Jl=["touchstart","touchmove"];function ec(e){return Jl.includes(e)}const tc=new Set,uo=new Set;function rc(e,t,r,n={}){function s(o){if(n.capture||_r.call(t,o),!o.cancelBubble)return sn(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?tr(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function _s(e,t,r,n,s){var o={capture:n,passive:s},a=rc(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&on(()=>{t.removeEventListener(e,a,o)})}let lo=null;function _r(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;lo=e;var a=0,i=lo===e&&e.__root;if(i){var u=s.indexOf(i);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var l=s.indexOf(t);if(l===-1)return;u<=l&&(a=u)}if(o=s[a]||e.target,o!==t){qu(e,"currentTarget",{configurable:!0,get(){return o||r}});var c=D,h=G;ie(null),Be(null);try{for(var f,d=[];o!==null;){var m=o.assignedSlot||o.parentNode||o.host||null;try{var x=o["__"+n];x!=null&&(!o.disabled||e.target===o)&&x.call(o,e)}catch(_){f?d.push(_):f=_}if(e.cancelBubble||m===t||m===null)break;o=m}if(f){for(let _ of d)queueMicrotask(()=>{throw _});throw f}}finally{e.__root=t,delete e.currentTarget,ie(c),Be(h)}}}function nc(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ea(e,t){var r=G;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function re(e,t){var r=(t&pl)!==0,n,s=!e.startsWith("<!>");return()=>{n===void 0&&(n=nc(s?e:"<!>"+e),n=hs(n));var o=r||Ji?document.importNode(n,!0):n.cloneNode(!0);return Ea(o,o),o}}function _e(){var e=document.createDocumentFragment(),t=document.createComment(""),r=ot();return e.append(t,r),Ea(t,r),e}function O(e,t){e!==null&&e.before(t)}function it(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function sc(e,t){return oc(e,t)}const Lt=new Map;function oc(e,{target:t,anchor:r,props:n={},events:s,context:o,intro:a=!0}){Ll();var i=new Set,u=h=>{for(var f=0;f<h.length;f++){var d=h[f];if(!i.has(d)){i.add(d);var m=ec(d);t.addEventListener(d,_r,{passive:m});var x=Lt.get(d);x===void 0?(document.addEventListener(d,_r,{passive:m}),Lt.set(d,1)):Lt.set(d,x+1)}}};u(en(tc)),uo.add(u);var l=void 0,c=Xl(()=>{var h=r??t.appendChild(ot());return Cl(h,{pending:()=>{}},f=>{if(o){Se({});var d=q;d.c=o}s&&(n.$$events=s),l=e(f,n)||{},o&&Te()}),()=>{for(var f of i){t.removeEventListener(f,_r);var d=Lt.get(f);--d===0?(document.removeEventListener(f,_r),Lt.delete(f)):Lt.set(f,d)}uo.delete(u),h!==r&&h.parentNode?.removeChild(h)}});return ic.set(l,c),l}let ic=new WeakMap;class ya{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#u=!0;constructor(t,r=!0){this.anchor=t,this.#u=r}#o=()=>{var t=V;if(this.#e.has(t)){var r=this.#e.get(t),n=this.#t.get(r);if(n)ms(n),this.#r.delete(r);else{var s=this.#n.get(r);s&&(this.#t.set(r,s.effect),this.#n.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===t)break;const i=this.#n.get(a);i&&(ae(i.effect),this.#n.delete(a))}for(const[o,a]of this.#t){if(o===r||this.#r.has(o))continue;const i=()=>{if(Array.from(this.#e.values()).includes(o)){var l=document.createDocumentFragment();da(a,l),l.append(ot()),this.#n.set(o,{effect:a,fragment:l})}else ae(a);this.#r.delete(o),this.#t.delete(o)};this.#u||!n?(this.#r.add(o),Et(a,i,!1)):i()}}};#s=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[n,s]of this.#n)r.includes(n)||(ae(s.effect),this.#n.delete(n))};ensure(t,r){var n=V,s=ra();if(r&&!this.#t.has(t)&&!this.#n.has(t))if(s){var o=document.createDocumentFragment(),a=ot();o.append(a),this.#n.set(t,{effect:ve(()=>r(a)),fragment:o})}else this.#t.set(t,ve(()=>r(this.anchor)));if(this.#e.set(n,t),s){for(const[i,u]of this.#t)i===t?n.skipped_effects.delete(u):n.skipped_effects.add(u);for(const[i,u]of this.#n)i===t?n.skipped_effects.delete(u.effect):n.skipped_effects.add(u.effect);n.oncommit(this.#o),n.ondiscard(this.#s)}else this.#o()}}function de(e,t,r=!1){var n=new ya(e),s=r?Rt:0;function o(a,i){n.ensure(a,i)}an(()=>{var a=!1;t((i,u=!0)=>{a=!0,o(u,i)}),a||o(!1,null)},s)}function ac(e,t,r){for(var n=[],s=t.length,o,a=t.length,i=0;i<s;i++){let h=t[i];Et(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var f=e.outrogroups;Zn(en(o.done)),f.delete(o),f.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var u=n.length===0&&r!==null;if(u){var l=r,c=l.parentNode;Ul(c),c.append(l),e.items.clear()}Zn(t,!u)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Zn(e,t=!0){for(var r=0;r<e.length;r++)ae(e[r],t)}var co;function Jn(e,t,r,n,s,o=null){var a=e,i=new Map,u=(t&Hi)!==0;if(u){var l=e;a=l.appendChild(ot())}var c=null,h=tt(()=>{var p=r();return Jr(p)?p:p==null?[]:en(p)}),f,d=!0;function m(){_.fallback=c,uc(_,f,a,t,n),c!==null&&(f.length===0?(c.f&Oe)===0?ms(c):(c.f^=Oe,xr(c,null,a)):Et(c,()=>{c=null}))}var x=an(()=>{f=v(h);for(var p=f.length,g=new Set,b=V,S=ra(),R=0;R<p;R+=1){var E=f[R],y=n(E,R),T=d?null:i.get(y);T?(T.v&&Ft(T.v,E),T.i&&Ft(T.i,R),S&&b.skipped_effects.delete(T.e)):(T=lc(i,d?a:co??=ot(),E,y,R,s,t,r),d||(T.e.f|=Oe),i.set(y,T)),g.add(y)}if(p===0&&o&&!c&&(d?c=ve(()=>o(a)):(c=ve(()=>o(co??=ot())),c.f|=Oe)),!d)if(S){for(const[A,C]of i)g.has(A)||b.skipped_effects.add(C.e);b.oncommit(m),b.ondiscard(()=>{})}else m();v(h)}),_={effect:x,items:i,outrogroups:null,fallback:c};d=!1}function uc(e,t,r,n,s){var o=(n&fl)!==0,a=t.length,i=e.items,u=e.effect.first,l,c=null,h,f=[],d=[],m,x,_,p;if(o)for(p=0;p<a;p+=1)m=t[p],x=s(m,p),_=i.get(x).e,(_.f&Oe)===0&&(_.nodes?.a?.measure(),(h??=new Set).add(_));for(p=0;p<a;p+=1){if(m=t[p],x=s(m,p),_=i.get(x).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(_),C.done.delete(_);if((_.f&Oe)!==0)if(_.f^=Oe,_===u)xr(_,null,r);else{var g=c?c.next:u;_===e.effect.last&&(e.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Je(e,c,_),Je(e,_,g),xr(_,g,r),c=_,f=[],d=[],u=c.next;continue}if((_.f&he)!==0&&(ms(_),o&&(_.nodes?.a?.unfix(),(h??=new Set).delete(_))),_!==u){if(l!==void 0&&l.has(_)){if(f.length<d.length){var b=d[0],S;c=b.prev;var R=f[0],E=f[f.length-1];for(S=0;S<f.length;S+=1)xr(f[S],b,r);for(S=0;S<d.length;S+=1)l.delete(d[S]);Je(e,R.prev,E.next),Je(e,c,R),Je(e,E,b),u=b,c=E,p-=1,f=[],d=[]}else l.delete(_),xr(_,u,r),Je(e,_.prev,_.next),Je(e,_,c===null?e.effect.first:c.next),Je(e,c,_),c=_;continue}for(f=[],d=[];u!==null&&u!==_;)(l??=new Set).add(u),d.push(u),u=u.next;if(u===null)continue}(_.f&Oe)===0&&f.push(_),c=_,u=_.next}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(Zn(en(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||l!==void 0){var y=[];if(l!==void 0)for(_ of l)(_.f&he)===0&&y.push(_);for(;u!==null;)(u.f&he)===0&&u!==e.fallback&&y.push(u),u=u.next;var T=y.length;if(T>0){var A=(n&Hi)!==0&&a===0?r:null;if(o){for(p=0;p<T;p+=1)y[p].nodes?.a?.measure();for(p=0;p<T;p+=1)y[p].nodes?.a?.fix()}ac(e,y,A)}}o&&tr(()=>{if(h!==void 0)for(_ of h)_.nodes?.a?.apply()})}function lc(e,t,r,n,s,o,a,i){var u=(a&ll)!==0?(a&dl)===0?k(r,!1,!1):At(r):null,l=(a&cl)!==0?At(s):null;return{v:u,i:l,e:ve(()=>(o(t,u??r,l??s,i),()=>{e.delete(n)}))}}function xr(e,t,r){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end,o=t&&(t.f&Oe)===0?t.nodes.start:r;n!==null;){var a=Ar(n);if(o.before(n),n===s)return;n=a}}function Je(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Ut(e,t,r){var n=new ya(e);an(()=>{var s=t()??null;n.ensure(s,s&&(o=>r(o,s)))},Rt)}const fo=[...` 	
\r\fÂ \v\uFEFF`];function cc(e,t,r){var n=""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,a=0;(a=n.indexOf(s,a))>=0;){var i=a+o;(a===0||fo.includes(n[a-1]))&&(i===n.length||fo.includes(n[i]))?n=(a===0?"":n.substring(0,a))+n.substring(i+1):a=i}}return n===""?null:n}function fc(e,t,r,n,s,o){var a=e.__className;if(a!==r||a===void 0){var i=cc(r,n,o);i==null?e.removeAttribute("class"):e.className=i,e.__className=r}else if(o&&s!==o)for(var u in o){var l=!!o[u];(s==null||l!==!!s[u])&&e.classList.toggle(u,l)}return o}function ga(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Jr(t))return El();for(var n of e.options)n.selected=t.includes(pr(n));return}for(n of e.options){var s=pr(n);if(Gl(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function dc(e){var t=new MutationObserver(()=>{ga(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),on(()=>{t.disconnect()})}function ho(e,t,r=t){var n=new WeakSet,s=!0;Vl(e,"change",o=>{var a=o?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(a),pr);else{var u=e.querySelector(a)??e.querySelector("option:not([disabled])");i=u&&pr(u)}r(i),V!==null&&n.add(V)}),oa(()=>{var o=t();if(e===document.activeElement){var a=Ur??V;if(n.has(a))return}if(ga(e,o,s),s&&o===void 0){var i=e.querySelector(":checked");i!==null&&(o=pr(i),r(o))}e.__value=o,s=!1}),dc(e)}function pr(e){return"__value"in e?e.__value:e.value}const hc=Symbol("is custom element"),mc=Symbol("is html");function _c(e,t){var r=xs(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function xc(e,t){var r=xs(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function Or(e,t,r,n){var s=xs(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Zu]=r),r==null?e.removeAttribute(t):typeof r!="string"&&vc(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function xs(e){return e.__attributes??={[hc]:e.nodeName.includes("-"),[mc]:e.namespaceURI===bl}}var mo=new Map;function vc(e){var t=e.getAttribute("is")||e.nodeName,r=mo.get(t);if(r)return r;mo.set(t,r=[]);for(var n,s=e,o=Element.prototype;o!==s;){n=Ui(s);for(var a in n)n[a].set&&r.push(a);s=is(s)}return r}function pc(e,t,r){var n=bt(e,t);n&&n.set&&(e[t]=r,on(()=>{e[t]=null}))}function _o(e,t){return e===t||e?.[ze]===t}function Ln(e={},t,r,n){return oa(()=>{var s,o;return ia(()=>{s=o,o=[],Xe(()=>{e!==r(...o)&&(t(e,...o),s&&_o(r(...s),e)&&t(null,...s))})}),()=>{tr(()=>{o&&_o(r(...o),e)&&t(null,...o)})}}),e}function Ke(e=!1){const t=q,r=t.l.u;if(!r)return;let n=()=>ba(t.s);if(e){let s=0,o={};const a=nn(()=>{let i=!1;const u=t.s;for(const l in u)u[l]!==o[l]&&(o[l]=u[l],i=!0);return i&&s++,s});n=()=>v(a)}r.b.length&&Hl(()=>{xo(t,n),qn(r.b)}),jn(()=>{const s=Xe(()=>r.m.map(Wu));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&jn(()=>{xo(t,n),qn(r.a)})}function xo(e,t){if(e.l.s)for(const r of e.l.s)v(r);t()}let Dr=!1;function bc(e){var t=Dr;try{return Dr=!1,[e(),Dr]}finally{Dr=t}}function $(e,t,r,n){var s=!er||(r&ml)!==0,o=(r&xl)!==0,a=(r&vl)!==0,i=n,u=!0,l=()=>(u&&(u=!1,i=a?Xe(n):n),i),c;if(o){var h=ze in e||Qu in e;c=bt(e,t)?.set??(h&&t in e?b=>e[t]=b:void 0)}var f,d=!1;o?[f,d]=bc(()=>e[t]):f=e[t],f===void 0&&n!==void 0&&(f=l(),c&&(s&&sl(),c(f)));var m;if(s?m=()=>{var b=e[t];return b===void 0?l():(u=!0,b)}:m=()=>{var b=e[t];return b!==void 0&&(i=void 0),b===void 0?i:b},s&&(r&_l)===0)return m;if(c){var x=e.$$legacy;return(function(b,S){return arguments.length>0?((!s||!S||x||d)&&c(S?m():b),b):m()})}var _=!1,p=((r&hl)!==0?nn:tt)(()=>(_=!1,m()));o&&v(p);var g=G;return(function(b,S){if(arguments.length>0){const R=S?v(p):s&&o?Kt(b):b;return w(p,R),_=!0,i!==void 0&&(i=R),b}return wt&&_||(g.f&Ve)!==0?p.v:v(p)})}function Ra(e){q===null&&cs(),er&&q.l!==null?gc(q).m.push(e):jn(()=>{const t=Xe(e);if(typeof t=="function")return t})}function Ec(e){q===null&&cs(),Ra(()=>()=>Xe(e))}function yc(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function vs(){const e=q;return e===null&&cs(),(t,r,n)=>{const s=e.s.$$events?.[t];if(s){const o=Jr(s)?s.slice():[s],a=yc(t,r,n);for(const i of o)i.call(e.x,a);return!a.defaultPrevented}return!0}}function gc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Rc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Rc);Sl();let ps=Float32Array;function bs(e,t,r){const n=new ps(3);return e&&(n[0]=e),t&&(n[1]=t),r&&(n[2]=r),n}function Sc(e,t,r){return r=r||new ps(3),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function Tc(e,t,r){return r=r||new ps(3),r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}let Sa=Float32Array;function Ac(e){return e=e||new Sa(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fc(e,t){t=t||new Sa(16);const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],m=e[12],x=e[13],_=e[14],p=e[15],g=f*p,b=_*d,S=u*p,R=_*l,E=u*d,y=f*l,T=s*p,A=_*o,C=s*d,M=f*o,ee=s*l,Y=u*o,le=c*x,ce=m*h,Ye=a*x,We=m*i,je=a*h,Ge=c*i,ht=r*x,Qe=m*n,Ct=r*h,Bt=c*n,mt=r*i,It=a*n,Br=g*i+R*h+E*x-(b*i+S*h+y*x),F=b*n+T*h+M*x-(g*n+A*h+C*x),P=S*n+A*i+ee*x-(R*n+T*i+Y*x),L=y*n+C*i+Y*h-(E*n+M*i+ee*h),N=1/(r*Br+a*F+c*P+m*L);return t[0]=N*Br,t[1]=N*F,t[2]=N*P,t[3]=N*L,t[4]=N*(b*a+S*c+y*m-(g*a+R*c+E*m)),t[5]=N*(g*r+A*c+C*m-(b*r+T*c+M*m)),t[6]=N*(R*r+T*a+Y*m-(S*r+A*a+ee*m)),t[7]=N*(E*r+M*a+ee*c-(y*r+C*a+Y*c)),t[8]=N*(le*l+We*d+je*p-(ce*l+Ye*d+Ge*p)),t[9]=N*(ce*o+ht*d+Bt*p-(le*o+Qe*d+Ct*p)),t[10]=N*(Ye*o+Qe*l+mt*p-(We*o+ht*l+It*p)),t[11]=N*(Ge*o+Ct*l+It*d-(je*o+Bt*l+mt*d)),t[12]=N*(Ye*f+Ge*_+ce*u-(je*_+le*u+We*f)),t[13]=N*(Ct*_+le*s+Qe*f-(ht*f+Bt*_+ce*s)),t[14]=N*(ht*u+It*_+We*s-(mt*_+Ye*s+Qe*u)),t[15]=N*(mt*f+je*s+Bt*u-(Ct*u+It*f+Ge*s)),t}function Pc(e,t,r){r=r||bs();const n=t[0],s=t[1],o=t[2],a=n*e[3]+s*e[7]+o*e[11]+e[15];return r[0]=(n*e[0]+s*e[4]+o*e[8]+e[12])/a,r[1]=(n*e[1]+s*e[5]+o*e[9]+e[13])/a,r[2]=(n*e[2]+s*e[6]+o*e[10]+e[14])/a,r}function wc(e,t,r){r=r||bs();const n=t[0],s=t[1],o=t[2];return r[0]=n*e[0]+s*e[4]+o*e[8],r[1]=n*e[1]+s*e[5]+o*e[9],r[2]=n*e[2]+s*e[6]+o*e[10],r}const Es=5120,gr=5121,ys=5122,gs=5123,Rs=5124,Ss=5125,Ts=5126,Cc=32819,Bc=32820,Ic=33635,Dc=5131,Mc=33640,Nc=35899,kc=35902,Gc=36269,Lc=34042,Ta={};{const e=Ta;e[Es]=Int8Array,e[gr]=Uint8Array,e[ys]=Int16Array,e[gs]=Uint16Array,e[Rs]=Int32Array,e[Ss]=Uint32Array,e[Ts]=Float32Array,e[Cc]=Uint16Array,e[Bc]=Uint16Array,e[Ic]=Uint16Array,e[Dc]=Uint16Array,e[Mc]=Uint32Array,e[Nc]=Uint32Array,e[kc]=Uint32Array,e[Gc]=Uint32Array,e[Lc]=Uint32Array}function un(e){if(e instanceof Int8Array)return Es;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return gr;if(e instanceof Int16Array)return ys;if(e instanceof Uint16Array)return gs;if(e instanceof Int32Array)return Rs;if(e instanceof Uint32Array)return Ss;if(e instanceof Float32Array)return Ts;throw new Error("unsupported typed array type")}function Aa(e){if(e===Int8Array)return Es;if(e===Uint8Array||e===Uint8ClampedArray)return gr;if(e===Int16Array)return ys;if(e===Uint16Array)return gs;if(e===Int32Array)return Rs;if(e===Uint32Array)return Ss;if(e===Float32Array)return Ts;throw new Error("unsupported typed array type")}function Fa(e){const t=Ta[e];if(!t)throw new Error("unknown gl type");return t}const Rr=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function Uc(e,t,r){e.forEach(function(n){const s=t[n];s!==void 0&&(r[n]=s)})}function Pa(...e){console.error(...e)}const vo=new Map;function ln(e,t){if(!e||typeof e!="object")return!1;let r=vo.get(t);r||(r=new WeakMap,vo.set(t,r));let n=r.get(e);if(n===void 0){const s=Object.prototype.toString.call(e);n=s.substring(8,s.length-1)===t,r.set(e,n)}return n}function Oc(e,t){return typeof WebGLBuffer<"u"&&ln(t,"WebGLBuffer")}function wa(e,t){return typeof WebGLRenderbuffer<"u"&&ln(t,"WebGLRenderbuffer")}function cn(e,t){return typeof WebGLTexture<"u"&&ln(t,"WebGLTexture")}function Vc(e,t){return typeof WebGLSampler<"u"&&ln(t,"WebGLSampler")}const Ca=35044,at=34962,Ba=34963,zc=34660,Hc=5120,Xc=5121,$c=5122,qc=5123,Kc=5124,Yc=5125,Ia=5126,Da={attribPrefix:""};function Wc(e,t,r,n,s){e.bindBuffer(t,r),e.bufferData(t,n,s||Ca)}function As(e,t,r,n){if(Oc(e,t))return t;r=r||at;const s=e.createBuffer();return Wc(e,r,s,t,n),s}function Ma(e){return e==="indices"}function jc(e){return e===Int8Array||e===Uint8Array}function Fs(e){return e.length?e:e.data}const Qc=/coord|texture/i,Zc=/color|colour/i;function Jc(e,t){let r;if(Qc.test(e)?r=2:Zc.test(e)?r=4:r=3,t%r>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function Ps(e,t,r){return e.numComponents||e.size||Jc(t,r||Fs(e).length)}function fn(e,t){if(Rr(e))return e;if(Rr(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type?ws(e.type):void 0;return r||(Ma(t)?r=Uint16Array:r=Float32Array),new r(e.data)}function ef(e){return typeof e=="number"?e:e?Aa(e):Ia}function ws(e){return typeof e=="number"?Fa(e):e||Float32Array}function tf(e,t){return{buffer:t.buffer,numValues:24,type:ef(t.type),arrayType:ws(t.type)}}function rf(e,t){const r=t.data||t,n=ws(t.type),s=r*n.BYTES_PER_ELEMENT,o=e.createBuffer();return e.bindBuffer(at,o),e.bufferData(at,s,t.drawType||Ca),{buffer:o,numValues:r,type:Aa(n),arrayType:n}}function nf(e,t,r){const n=fn(t,r);return{arrayType:n.constructor,buffer:As(e,n,void 0,t.drawType),type:un(n),numValues:0}}function sf(e,t){const r={};return Object.keys(t).forEach(function(n){if(!Ma(n)){const s=t[n],o=s.attrib||s.name||s.attribName||Da.attribPrefix+n;if(s.value){if(!Array.isArray(s.value)&&!Rr(s.value))throw new Error("array.value is not array or typedarray");r[o]={value:s.value}}else{let a;s.buffer&&s.buffer instanceof WebGLBuffer?a=tf:typeof s=="number"||typeof s.data=="number"?a=rf:a=nf;const{buffer:i,type:u,numValues:l,arrayType:c}=a(e,s,n),h=s.normalize!==void 0?s.normalize:jc(c),f=Ps(s,n,l);r[o]={buffer:i,numComponents:f,type:u,normalize:h,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),e.bindBuffer(at,null),r}function of(e,t){return t===Hc||t===Xc?1:t===$c||t===qc?2:t===Kc||t===Yc||t===Ia?4:0}const Yt=["position","positions","a_position"];function af(e){let t,r;for(r=0;r<Yt.length&&(t=Yt[r],!(t in e));++r);r===Yt.length&&(t=Object.keys(e)[0]);const n=e[t],s=Fs(n).length;if(s===void 0)return 1;const o=Ps(n,t),a=s/o;if(s%o>0)throw new Error(`numComponents ${o} not correct for length ${s}`);return a}function uf(e,t){let r,n;for(n=0;n<Yt.length&&(r=Yt[n],!(r in t||(r=Da.attribPrefix+r,r in t)));++n);n===Yt.length&&(r=Object.keys(t)[0]);const s=t[r];if(!s.buffer)return 1;e.bindBuffer(at,s.buffer);const o=e.getBufferParameter(at,zc);e.bindBuffer(at,null);const a=of(e,s.type),i=o/a,u=s.numComponents||s.size,l=i/u;if(l%1!==0)throw new Error(`numComponents ${u} not correct for length ${length}`);return l}function lf(e,t,r){const n=sf(e,t),s=Object.assign({},r||{});s.attribs=Object.assign({},r?r.attribs:{},n);const o=t.indices;if(o){const a=fn(o,"indices");s.indices=As(e,a,Ba),s.numElements=a.length,s.elementType=un(a)}else s.numElements||(s.numElements=uf(e,s.attribs));return s}function cf(e,t,r){const n=r==="indices"?Ba:at,s=fn(t,r);return As(e,s,n)}function ff(e,t){const r={};return Object.keys(t).forEach(function(n){r[n]=cf(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=un(fn(t.indices))):r.numElements=af(t),r}const vt=Fs,df=Ps;function Na(e,t){let r=0;return e.push=function(){for(let n=0;n<arguments.length;++n){const s=arguments[n];if(s instanceof Array||Rr(s))for(let o=0;o<s.length;++o)e[r++]=s[o];else e[r++]=s}},e.reset=function(n){r=n||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function I(e,t,r){const n=r||Float32Array;return Na(new n(e*t),e)}function hf(e){return e!=="indices"}function mf(e){const t=e.indices,r={},n=t.length;function s(o){const a=e[o],i=a.numComponents,u=I(i,n,a.constructor);for(let l=0;l<n;++l){const h=t[l]*i;for(let f=0;f<i;++f)u.push(a[h+f])}r[o]=u}return Object.keys(e).filter(hf).forEach(s),r}function _f(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,r=t.length;for(let n=0;n<r;n+=9){const s=t[n+0],o=t[n+1],a=t[n+2],i=t[n+3],u=t[n+4],l=t[n+5],c=t[n+6],h=t[n+7],f=t[n+8];let d=s+i+c,m=o+u+h,x=a+l+f;const _=Math.sqrt(d*d+m*m+x*x);d/=_,m/=_,x/=_,t[n+0]=d,t[n+1]=m,t[n+2]=x,t[n+3]=d,t[n+4]=m,t[n+5]=x,t[n+6]=d,t[n+7]=m,t[n+8]=x}return e}function Cs(e,t,r){const n=e.length,s=new Float32Array(3);for(let o=0;o<n;o+=3)r(t,[e[o],e[o+1],e[o+2]],s),e[o]=s[0],e[o+1]=s[1],e[o+2]=s[2]}function xf(e,t,r){r=r||bs();const n=t[0],s=t[1],o=t[2];return r[0]=n*e[0]+s*e[1]+o*e[2],r[1]=n*e[4]+s*e[5]+o*e[6],r[2]=n*e[8]+s*e[9]+o*e[10],r}function ka(e,t){return Cs(e,t,wc),e}function Ga(e,t){return Cs(e,Fc(t),xf),e}function La(e,t){return Cs(e,t,Pc),e}function Ua(e,t){return Object.keys(e).forEach(function(r){const n=e[r];r.indexOf("pos")>=0?La(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?ka(n,t):r.indexOf("norm")>=0&&Ga(n,t)}),e}function Bs(e,t,r){return e=e||2,t=t||0,r=r||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,r+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function Is(e,t,r,n,s){e=e||1,t=t||1,r=r||1,n=n||1,s=s||Ac();const o=(r+1)*(n+1),a=I(3,o),i=I(3,o),u=I(2,o);for(let f=0;f<=n;f++)for(let d=0;d<=r;d++){const m=d/r,x=f/n;a.push(e*m-e*.5,0,t*x-t*.5),i.push(0,1,0),u.push(m,x)}const l=r+1,c=I(3,r*n*2,Uint16Array);for(let f=0;f<n;f++)for(let d=0;d<r;d++)c.push((f+0)*l+d,(f+1)*l+d,(f+0)*l+d+1),c.push((f+1)*l+d,(f+1)*l+d+1,(f+0)*l+d+1);return Ua({position:a,normal:i,texcoord:u,indices:c},s)}function Ds(e,t,r,n,s,o,a){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,s=s||Math.PI,o=o||0,a=a||Math.PI*2;const i=s-n,u=a-o,l=(t+1)*(r+1),c=I(3,l),h=I(3,l),f=I(2,l);for(let x=0;x<=r;x++)for(let _=0;_<=t;_++){const p=_/t,g=x/r,b=u*p+o,S=i*g+n,R=Math.sin(b),E=Math.cos(b),y=Math.sin(S),T=Math.cos(S),A=E*y,C=T,M=R*y;c.push(e*A,e*C,e*M),h.push(A,C,M),f.push(1-p,g)}const d=t+1,m=I(3,t*r*2,Uint16Array);for(let x=0;x<t;x++)for(let _=0;_<r;_++)m.push((_+0)*d+x,(_+0)*d+x+1,(_+1)*d+x),m.push((_+1)*d+x,(_+0)*d+x+1,(_+1)*d+x+1);return{position:c,normal:h,texcoord:f,indices:m}}const vf=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Ms(e){e=e||1;const t=e/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],s=[[1,0],[0,0],[0,1],[1,1]],o=24,a=I(3,o),i=I(3,o),u=I(2,o),l=I(3,12,Uint16Array);for(let c=0;c<6;++c){const h=vf[c];for(let d=0;d<4;++d){const m=r[h[d]],x=n[c],_=s[d];a.push(m),i.push(x),u.push(_)}const f=4*c;l.push(f+0,f+1,f+2),l.push(f+0,f+2,f+3)}return{position:a,normal:i,texcoord:u,indices:l}}function dn(e,t,r,n,s,o,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(s<1)throw new Error("verticalSubdivisions must be 1 or greater");const i=o===void 0?!0:o,u=a===void 0?!0:a,l=(i?2:0)+(u?2:0),c=(n+1)*(s+1+l),h=I(3,c),f=I(3,c),d=I(2,c),m=I(3,n*(s+l/2)*2,Uint16Array),x=n+1,_=Math.atan2(e-t,r),p=Math.cos(_),g=Math.sin(_),b=i?-2:0,S=s+(u?2:0);for(let R=b;R<=S;++R){let E=R/s,y=r*E,T;R<0?(y=0,E=1,T=e):R>s?(y=r,E=1,T=t):T=e+(t-e)*(R/s),(R===-2||R===s+2)&&(T=0,E=0),y-=r/2;for(let A=0;A<x;++A){const C=Math.sin(A*Math.PI*2/n),M=Math.cos(A*Math.PI*2/n);h.push(C*T,y,M*T),R<0?f.push(0,-1,0):R>s?f.push(0,1,0):T===0?f.push(0,0,0):f.push(C*p,g,M*p),d.push(A/n,1-E)}}for(let R=0;R<s+l;++R)if(!(R===1&&i||R===s+l-2&&u))for(let E=0;E<n;++E)m.push(x*(R+0)+0+E,x*(R+0)+1+E,x*(R+1)+1+E),m.push(x*(R+0)+0+E,x*(R+1)+1+E,x*(R+1)+0+E);return{position:h,normal:f,texcoord:d,indices:m}}function po(e,t){t=t||[];const r=[];for(let n=0;n<e.length;n+=4){const s=e[n],o=e.slice(n+1,n+4);o.push.apply(o,t);for(let a=0;a<s;++a)r.push.apply(r,o)}return r}function Ns(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],r=po([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=po([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),s=e.length/3,o={position:I(3,s),texcoord:I(2,s),normal:I(3,s),color:I(4,s,Uint8Array),indices:I(3,s/3,Uint16Array)};o.position.push(e),o.texcoord.push(t),o.normal.push(r),o.color.push(n);for(let a=0;a<s;++a)o.indices.push(a);return o}function hn(e,t,r,n,s,o,a){if(s<=0)throw new Error("subdivisionDown must be > 0");o=o||0,a=a||1;const i=2,u=a-o,l=(s+1)*2*(2+i),c=I(3,l),h=I(3,l),f=I(2,l);function d(g,b,S){return g+(b-g)*S}function m(g,b,S,R,E,y){for(let T=0;T<=s;T++){const A=b/(i-1),C=T/s,M=(A-.5)*2,ee=(o+C*u)*Math.PI,Y=Math.sin(ee),le=Math.cos(ee),ce=d(e,g,Y),Ye=M*n,We=le*e,je=Y*ce;c.push(Ye,We,je);const Ge=Sc(Tc([0,Y,le],S),R);h.push(Ge),f.push(A*E+y,C)}}for(let g=0;g<i;g++){const b=(g/(i-1)-.5)*2;m(t,g,[1,1,1],[0,0,0],1,0),m(t,g,[0,0,0],[b,0,0],0,0),m(r,g,[1,1,1],[0,0,0],1,0),m(r,g,[0,0,0],[b,0,0],0,1)}const x=I(3,s*2*(2+i),Uint16Array);function _(g,b){for(let S=0;S<s;++S)x.push(g+S+0,g+S+1,b+S+0),x.push(g+S+1,b+S+1,b+S+0)}const p=s+1;return _(p*0,p*4),_(p*5,p*7),_(p*6,p*2),_(p*3,p*1),{position:c,normal:h,texcoord:f,indices:x}}function ks(e,t,r,n,s,o){return dn(e,e,t,r,n,s,o)}function Gs(e,t,r,n,s,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");s=s||0,o=o||Math.PI*2;const a=o-s,i=r+1,u=n+1,l=i*u,c=I(3,l),h=I(3,l),f=I(2,l),d=I(3,r*n*2,Uint16Array);for(let m=0;m<u;++m){const x=m/n,_=x*Math.PI*2,p=Math.sin(_),g=e+p*t,b=Math.cos(_),S=b*t;for(let R=0;R<i;++R){const E=R/r,y=s+E*a,T=Math.sin(y),A=Math.cos(y),C=T*g,M=A*g,ee=T*p,Y=A*p;c.push(C,S,M),h.push(ee,b,Y),f.push(E,1-x)}}for(let m=0;m<n;++m)for(let x=0;x<r;++x){const _=1+x,p=1+m;d.push(i*m+x,i*p+x,i*m+_),d.push(i*p+x,i*p+_,i*m+_)}return{position:c,normal:h,texcoord:f,indices:d}}function Ls(e,t,r,n,s){if(t<3)throw new Error("divisions must be at least 3");r=r||1,s=s||1,n=n||0;const o=(t+1)*(r+1),a=I(3,o),i=I(3,o),u=I(2,o),l=I(3,r*t*2,Uint16Array);let c=0;const h=e-n,f=t+1;for(let d=0;d<=r;++d){const m=n+h*Math.pow(d/r,s);for(let x=0;x<=t;++x){const _=2*Math.PI*x/t,p=m*Math.cos(_),g=m*Math.sin(_);if(a.push(p,0,g),i.push(0,1,0),u.push(1-x/t,d/r),d>0&&x!==t){const b=c+(x+1),S=c+x,R=c+x-f,E=c+(x+1)-f;l.push(b,S,R),l.push(b,R,E)}}c+=t+1}return{position:a,normal:i,texcoord:u,indices:l}}function pf(e){return Math.random()*e|0}function bf(e,t){t=t||{};const r=e.position.numElements,n=I(4,r,Uint8Array),s=t.rand||function(o,a){return a<3?pf(256):255};if(e.color=n,e.indices)for(let o=0;o<r;++o)n.push(s(o,0),s(o,1),s(o,2),s(o,3));else{const o=t.vertsPerColor||3,a=r/o;for(let i=0;i<a;++i){const u=[s(i,0),s(i,1),s(i,2),s(i,3)];for(let l=0;l<o;++l)n.push(u)}}return e}function Ne(e){return function(t){const r=e.apply(this,Array.prototype.slice.call(arguments,1));return ff(t,r)}}function ke(e){return function(t){const r=e.apply(null,Array.prototype.slice.call(arguments,1));return lf(t,r)}}const Ef=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function es(e,t,r,n){n=n||0;const s=e.length;for(let o=0;o<s;++o)t[r+o]=e[o]+n}function Oa(e,t){const r=vt(e),n=new r.constructor(t);let s=n;return r.numComponents&&r.numElements&&Na(n,r.numComponents),e.data&&(s={data:n},Uc(Ef,e,s)),s}function yf(e){const t={};let r;for(let i=0;i<e.length;++i){const u=e[i];Object.keys(u).forEach(function(l){t[l]||(t[l]=[]),!r&&l!=="indices"&&(r=l);const c=u[l],h=df(c,l),d=vt(c).length/h;t[l].push(d)})}function n(i){let u=0,l;for(let c=0;c<e.length;++c){const f=e[c][i],d=vt(f);u+=d.length,(!l||f.data)&&(l=f)}return{length:u,spec:l}}function s(i,u,l){let c=0,h=0;for(let f=0;f<e.length;++f){const m=e[f][i],x=vt(m);i==="indices"?(es(x,l,h,c),c+=u[f]):es(x,l,h),h+=x.length}}const o=t[r],a={};return Object.keys(t).forEach(function(i){const u=n(i),l=Oa(u.spec,u.length);s(i,o,vt(l)),a[i]=l}),a}function gf(e){const t={};return Object.keys(e).forEach(function(r){const n=e[r],s=vt(n),o=Oa(n,s.length);es(s,vt(o),0),t[r]=o}),t}const Rf=ke(Ns),Sf=Ne(Ns),Tf=ke(Ms),Af=Ne(Ms),Ff=ke(Is),Pf=Ne(Is),wf=ke(Ds),Cf=Ne(Ds),Bf=ke(dn),If=Ne(dn),Df=ke(Bs),Mf=Ne(Bs),Va=ke(hn),za=Ne(hn),Nf=ke(ks),kf=Ne(ks),Gf=ke(Gs),Lf=Ne(Gs),Uf=ke(Ls),Of=Ne(Ls),Vf=Va,zf=za,Hf=hn;var Xf=Object.freeze({__proto__:null,create3DFBufferInfo:Rf,create3DFBuffers:Sf,create3DFVertices:Ns,createAugmentedTypedArray:I,createCubeBufferInfo:Tf,createCubeBuffers:Af,createCubeVertices:Ms,createPlaneBufferInfo:Ff,createPlaneBuffers:Pf,createPlaneVertices:Is,createSphereBufferInfo:wf,createSphereBuffers:Cf,createSphereVertices:Ds,createTruncatedConeBufferInfo:Bf,createTruncatedConeBuffers:If,createTruncatedConeVertices:dn,createXYQuadBufferInfo:Df,createXYQuadBuffers:Mf,createXYQuadVertices:Bs,createCresentBufferInfo:Vf,createCresentBuffers:zf,createCresentVertices:Hf,createCrescentBufferInfo:Va,createCrescentBuffers:za,createCrescentVertices:hn,createCylinderBufferInfo:Nf,createCylinderBuffers:kf,createCylinderVertices:ks,createTorusBufferInfo:Gf,createTorusBuffers:Lf,createTorusVertices:Gs,createDiscBufferInfo:Uf,createDiscBuffers:Of,createDiscVertices:Ls,deindexVertices:mf,flattenNormals:_f,makeRandomVertexColors:bf,reorientDirections:ka,reorientNormals:Ga,reorientPositions:La,reorientVertices:Ua,concatVertices:yf,duplicateVertices:gf});function Pr(e){return!!e.texStorage2D}const Ha=(function(){const e={},t={};function r(n){const s=n.constructor.name;if(!e[s]){for(const o in n)if(typeof n[o]=="number"){const a=t[n[o]];t[n[o]]=a?`${a} | ${o}`:o}e[s]=!0}}return function(s,o){return r(s),t[o]||(typeof o=="number"?`0x${o.toString(16)}`:o)}})(),dr=void 0,lt={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Zt=Rr,Xa=(function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}})(),bo=6406,Ae=6407,X=6408,Eo=6409,yo=6410,hr=6402,go=34041,Kr=33071,Un=9728,On=9729,$f=9986,Ie=3553,De=34067,ct=32879,ut=35866,mn=34069,qf=34070,Kf=34071,Yf=34072,Wf=34073,jf=34074,Yr=10241,Wr=10240,jr=10242,Qr=10243,Ro=32882,Qf=33082,Zf=33083,Jf=33084,e0=33085,t0=34892,r0=34893,Us=3317,$a=3314,qa=32878,Ka=3316,Ya=3315,Wa=32877,Vr=37443,zr=37441,Hr=37440,n0=33321,s0=36756,o0=33325,i0=33326,a0=33330,u0=33329,l0=33338,c0=33337,f0=33340,d0=33339,h0=33323,m0=36757,_0=33327,x0=33328,v0=33336,p0=33335,b0=33332,E0=33331,y0=33334,g0=33333,R0=32849,S0=35905,T0=36194,A0=36758,F0=35898,P0=35901,w0=34843,C0=34837,B0=36221,I0=36239,D0=36215,M0=36233,N0=36209,k0=36227,G0=32856,L0=35907,U0=36759,O0=32855,V0=32854,z0=32857,H0=34842,X0=34836,$0=36220,q0=36238,K0=36975,Y0=36214,W0=36232,j0=36226,Q0=36208,Z0=33189,J0=33190,ed=36012,td=36013,rd=35056,et=5120,H=5121,Mr=5122,Ot=5123,Nr=5124,_t=5125,j=5126,So=32819,To=32820,Ao=33635,ye=5131,mr=36193,Vn=33640,nd=35899,sd=35902,od=36269,id=34042,kr=33319,Vt=33320,Gr=6403,zt=36244,Ht=36248,xt=36249,Fo=33776,Po=33777,wo=33778,Co=33779,Bo=35916,Io=35917,Do=35918,Mo=35919,No=36196,ko=37488,Go=37489,Lo=37490,Uo=37491,Oo=37492,Vo=37493,zo=37494,Ho=37495,Xo=37496,$o=37497,qo=35840,Ko=35841,Yo=35842,Wo=35843,jo=37808,Qo=37809,Zo=37810,Jo=37811,ei=37812,ti=37813,ri=37814,ni=37815,si=37816,oi=37817,ii=37818,ai=37819,ui=37820,li=37821,ci=37840,fi=37841,di=37842,hi=37843,mi=37844,_i=37845,xi=37846,vi=37847,pi=37848,bi=37849,Ei=37850,yi=37851,gi=37852,Ri=37853,Si=36492,Ti=36493,Ai=36494,Fi=36495,Pi=36283,wi=36284,Ci=36285,Bi=36286;let zn;function rr(e){if(!zn){const r={};r[bo]={textureFormat:bo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[H,ye,mr,j]},r[Eo]={textureFormat:Eo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[H,ye,mr,j]},r[yo]={textureFormat:yo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[H,ye,mr,j]},r[Ae]={textureFormat:Ae,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[H,ye,mr,j,Ao]},r[X]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[H,ye,mr,j,So,To]},r[hr]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[_t,Ot]},r[n0]={textureFormat:Gr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[H]},r[s0]={textureFormat:Gr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[et]},r[o0]={textureFormat:Gr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[j,ye]},r[i0]={textureFormat:Gr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[j]},r[a0]={textureFormat:zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[H]},r[u0]={textureFormat:zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[et]},r[b0]={textureFormat:zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ot]},r[E0]={textureFormat:zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Mr]},r[y0]={textureFormat:zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_t]},r[g0]={textureFormat:zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nr]},r[h0]={textureFormat:kr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[H]},r[m0]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[et]},r[_0]={textureFormat:kr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[j,ye]},r[x0]={textureFormat:kr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[j]},r[v0]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[H]},r[p0]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[et]},r[l0]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ot]},r[c0]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Mr]},r[f0]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[_t]},r[d0]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Nr]},r[R0]={textureFormat:Ae,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[H]},r[S0]={textureFormat:Ae,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[H]},r[T0]={textureFormat:Ae,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[H,Ao]},r[A0]={textureFormat:Ae,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[et]},r[F0]={textureFormat:Ae,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[j,ye,nd]},r[P0]={textureFormat:Ae,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[j,ye,sd]},r[w0]={textureFormat:Ae,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[j,ye]},r[C0]={textureFormat:Ae,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[j]},r[B0]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[H]},r[I0]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[et]},r[D0]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ot]},r[M0]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Mr]},r[N0]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[_t]},r[k0]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Nr]},r[G0]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[H]},r[L0]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[H]},r[U0]={textureFormat:X,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[et]},r[O0]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[H,To,Vn]},r[V0]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[H,So]},r[z0]={textureFormat:X,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Vn]},r[H0]={textureFormat:X,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[j,ye]},r[X0]={textureFormat:X,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[j]},r[$0]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[H]},r[q0]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[et]},r[K0]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vn]},r[Y0]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ot]},r[W0]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Mr]},r[j0]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Nr]},r[Q0]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[_t]},r[Z0]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ot,_t]},r[J0]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_t]},r[ed]={textureFormat:hr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[j]},r[rd]={textureFormat:go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[id]},r[td]={textureFormat:go,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[od]},Object.keys(r).forEach(function(o){const a=r[o];a.bytesPerElementMap={},a.bytesPerElement.forEach(function(i,u){const l=a.type[u];a.bytesPerElementMap[l]=i})});const n={bytes:8,width:4,height:4},s={bytes:16,width:4,height:4};r[Fo]={textureFormat:Fo,colorRenderable:!1,textureFilterable:!0,block:n},r[Po]={textureFormat:Po,colorRenderable:!1,textureFilterable:!0,block:n},r[wo]={textureFormat:wo,colorRenderable:!1,textureFilterable:!0,block:s},r[Co]={textureFormat:Co,colorRenderable:!1,textureFilterable:!0,block:s},r[Bo]={textureFormat:Bo,colorRenderable:!1,textureFilterable:!0,block:n},r[Io]={textureFormat:Io,colorRenderable:!1,textureFilterable:!0,block:n},r[Do]={textureFormat:Do,colorRenderable:!1,textureFilterable:!0,block:s},r[Mo]={textureFormat:Mo,colorRenderable:!1,textureFilterable:!0,block:s},r[No]={textureFormat:No,colorRenderable:!1,textureFilterable:!0,block:n},r[ko]={textureFormat:ko,colorRenderable:!1,textureFilterable:!0,block:n},r[Go]={textureFormat:Go,colorRenderable:!1,textureFilterable:!0,block:n},r[Lo]={textureFormat:Lo,colorRenderable:!1,textureFilterable:!0,block:s},r[Uo]={textureFormat:Uo,colorRenderable:!1,textureFilterable:!0,block:s},r[Oo]={textureFormat:Oo,colorRenderable:!1,textureFilterable:!0,block:n},r[Vo]={textureFormat:Vo,colorRenderable:!1,textureFilterable:!0,block:n},r[zo]={textureFormat:zo,colorRenderable:!1,textureFilterable:!0,block:n},r[Ho]={textureFormat:Ho,colorRenderable:!1,textureFilterable:!0,block:n},r[Xo]={textureFormat:Xo,colorRenderable:!1,textureFilterable:!0,block:s},r[$o]={textureFormat:$o,colorRenderable:!1,textureFilterable:!0,block:s},r[qo]={textureFormat:qo,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},r[Ko]={textureFormat:Ko,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},r[Yo]={textureFormat:Yo,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},r[Wo]={textureFormat:Wo,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},r[jo]={textureFormat:jo,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},r[Qo]={textureFormat:Qo,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},r[Zo]={textureFormat:Zo,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},r[Jo]={textureFormat:Jo,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},r[ei]={textureFormat:ei,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},r[ti]={textureFormat:ti,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},r[ri]={textureFormat:ri,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},r[ni]={textureFormat:ni,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},r[si]={textureFormat:si,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},r[oi]={textureFormat:oi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},r[ii]={textureFormat:ii,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},r[ai]={textureFormat:ai,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},r[ui]={textureFormat:ui,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},r[li]={textureFormat:li,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},r[ci]={textureFormat:ci,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},r[fi]={textureFormat:fi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},r[di]={textureFormat:di,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},r[hi]={textureFormat:hi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},r[mi]={textureFormat:mi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},r[_i]={textureFormat:_i,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},r[xi]={textureFormat:xi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},r[vi]={textureFormat:vi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},r[pi]={textureFormat:pi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},r[bi]={textureFormat:bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},r[Ei]={textureFormat:Ei,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},r[yi]={textureFormat:yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},r[gi]={textureFormat:gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},r[Ri]={textureFormat:Ri,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},r[Si]={textureFormat:Si,colorRenderable:!1,textureFilterable:!0,block:s},r[Ti]={textureFormat:Ti,colorRenderable:!1,textureFilterable:!0,block:s},r[Ai]={textureFormat:Ai,colorRenderable:!1,textureFilterable:!0,block:s},r[Fi]={textureFormat:Fi,colorRenderable:!1,textureFilterable:!0,block:s},r[Pi]={textureFormat:Pi,colorRenderable:!1,textureFilterable:!0,block:n},r[wi]={textureFormat:wi,colorRenderable:!1,textureFilterable:!0,block:n},r[Ci]={textureFormat:Ci,colorRenderable:!1,textureFilterable:!0,block:n},r[Bi]={textureFormat:Bi,colorRenderable:!1,textureFilterable:!0,block:n},zn=r}const t=zn[e];if(!t)throw new Error("unknown internal format");return t}function ja(e,t){const n=rr(e).bytesPerElementMap[t];if(n===void 0)throw new Error("type not supported for internal format");return n}function nr(e){const t=rr(e);if(!t)throw new Error("unknown internal format");return{format:t.textureFormat,type:t.type?.[0]??H}}function Qa(e){return!!rr(e).block}function ad(e,t){const r=rr(e);return r.block?{blockWidth:r.block.width,blockHeight:r.block.height,bytesPerBlock:r.block.bytes}:{blockWidth:1,blockHeight:1,bytesPerBlock:ja(e,t)}}function Ii(e){return(e&e-1)===0}function ud(e,t,r,n){if(!Pr(e))return Ii(t)&&Ii(r);const s=rr(n);return s.colorRenderable&&s.textureFilterable}function Hn(e){return rr(e).textureFilterable}function Za(e,t,r){return Zt(t)?un(t):r||H}function Lr(e,t,r,n,s){if(s%1!==0)throw new Error("can't guess dimensions");if(!r&&!n){const o=Math.sqrt(s/(t===De?6:1));o%1===0?(r=o,n=o):(r=s,n=1)}else if(n){if(!r&&(r=s/n,r%1))throw new Error("can't guess dimensions")}else if(n=s/r,n%1)throw new Error("can't guess dimensions");return{width:r,height:n}}function rt(e,t,r){let n,s,o;t.colorspaceConversion!==void 0&&(n=e.getParameter(Vr),e.pixelStorei(Vr,t.colorspaceConversion)),t.premultiplyAlpha!==void 0&&(s=e.getParameter(zr),e.pixelStorei(zr,t.premultiplyAlpha)),t.flipY!==void 0&&(o=e.getParameter(Hr),e.pixelStorei(Hr,t.flipY)),r(),n!==void 0&&e.pixelStorei(Vr,n),s!==void 0&&e.pixelStorei(zr,s),o!==void 0&&e.pixelStorei(Hr,o)}function Xn(e,t,r,n){const s=t[r];return{[r]:s===void 0?e.getParameter(n):s}}function Os(e,t){return{...t,...Xn(e,t,"flipY",Hr),...Xn(e,t,"premultiplyAlpha",zr),...Xn(e,t,"colorspaceConversion",Vr)}}function Ja(e){e.pixelStorei(Us,4),Pr(e)&&(e.pixelStorei($a,0),e.pixelStorei(qa,0),e.pixelStorei(Ka,0),e.pixelStorei(Ya,0),e.pixelStorei(Wa,0))}function ld(e,t,r,n){n.minMag&&(r.call(e,t,Yr,n.minMag),r.call(e,t,Wr,n.minMag)),n.min&&r.call(e,t,Yr,n.min),n.mag&&r.call(e,t,Wr,n.mag),n.wrap&&(r.call(e,t,jr,n.wrap),r.call(e,t,Qr,n.wrap),(t===ct||Vc(e,t))&&r.call(e,t,Ro,n.wrap)),n.wrapR&&r.call(e,t,Ro,n.wrapR),n.wrapS&&r.call(e,t,jr,n.wrapS),n.wrapT&&r.call(e,t,Qr,n.wrapT),n.minLod!==void 0&&r.call(e,t,Qf,n.minLod),n.maxLod!==void 0&&r.call(e,t,Zf,n.maxLod),n.baseLevel!==void 0&&r.call(e,t,Jf,n.baseLevel),n.maxLevel!==void 0&&r.call(e,t,e0,n.maxLevel),n.compareFunc!==void 0&&r.call(e,t,r0,n.compareFunc),n.compareMode!==void 0&&r.call(e,t,t0,n.compareMode)}function eu(e,t,r){const n=r.target||Ie;e.bindTexture(n,t),ld(e,n,e.texParameteri,r)}function cd(e){return e=e||lt.textureColor,Zt(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function tu(e,t,{options:r,width:n,height:s,internalFormat:o,lastMipLevelUploaded:a}){r=r||lt.textureOptions,o=o||X;const i=r.target||Ie;if(n=n||r.width,s=s||r.height,e.bindTexture(i,t),a>1){const u=Math.max(1,n>>a),l=Math.max(1,s>>a),c=u===1&&l===1,h=Hn(o)?On:Un,f=Hn(o)?c?$f:On:Un;e.texParameteri(i,Wr,h),e.texParameteri(i,Yr,f)}else if(ud(e,n,s,o))e.generateMipmap(i);else{const u=Hn(o)?On:Un;e.texParameteri(i,Yr,u),e.texParameteri(i,Wr,u),e.texParameteri(i,jr,Kr),e.texParameteri(i,Qr,Kr)}}function Di(e,t,r,n,s,o){tu(e,t,{options:r,width:n,height:s,internalFormat:o})}function Sr(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function ts(e,t){return t=t||{},t.cubeFaceOrder||[mn,qf,Kf,Yf,Wf,jf]}function rs(e,t){const n=ts(e,t).map(function(s,o){return{face:s,ndx:o}});return n.sort(function(s,o){return s.face-o.face}),n}function ru(e,t,r,n){n=n||lt.textureOptions;const s=n.target||Ie,o=n.level||0;let a=r.width,i=r.height;const u=n.internalFormat||n.format||X,l=nr(u),c=n.format||l.format,h=n.type||l.type;if(e.bindTexture(s,t),s===De){const f=r.width,d=r.height;let m,x;if(f/6===d)m=d,x=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===f)m=f,x=[0,0,0,1,0,2,0,3,0,4,0,5];else if(f/3===d/2)m=f/3,x=[0,0,1,0,2,0,0,1,1,1,2,1];else if(f/2===d/3)m=f/2,x=[0,0,1,0,0,1,1,1,0,2,1,2];else throw new Error(`can't figure out cube map from element: ${r.src?r.src:r.nodeName}`);const _=Xa();_?(_.canvas.width=m,_.canvas.height=m,a=m,i=m,rt(e,n,()=>{rs(e,n).forEach(function(p){const g=x[p.ndx*2+0]*m,b=x[p.ndx*2+1]*m;_.drawImage(r,g,b,m,m,0,0,m,m),e.texImage2D(p.face,o,u,c,h,_.canvas)}),_.canvas.width=1,_.canvas.height=1})):typeof createImageBitmap<"u"&&(a=m,i=m,rs(e,n).forEach(function(p){const g=x[p.ndx*2+0]*m,b=x[p.ndx*2+1]*m;e.texImage2D(p.face,o,u,m,m,0,c,h,null),createImageBitmap(r,g,b,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(S){rt(e,n,()=>{e.bindTexture(s,t),e.texImage2D(p.face,o,u,c,h,S),Sr(n)&&Di(e,t,n,a,i,u)})})}))}else s===ct||s===ut?rt(e,n,()=>{const f=Math.min(r.width,r.height),d=Math.max(r.width,r.height),m=d/f;if(m%1!==0)throw new Error("can not compute 3D dimensions of element");const x=r.width===d?1:0,_=r.height===d?1:0;e.pixelStorei(Us,1),e.pixelStorei($a,r.width),e.pixelStorei(qa,0),e.pixelStorei(Wa,0),e.texImage3D(s,o,u,f,f,f,0,c,h,null);for(let p=0;p<m;++p){const g=p*f*x,b=p*f*_;e.pixelStorei(Ka,g),e.pixelStorei(Ya,b),e.texSubImage3D(s,o,0,0,p,f,f,1,c,h,r)}Ja(e)}):rt(e,n,()=>{e.texImage2D(s,o,u,c,h,r)});Sr(n)&&Di(e,t,n,a,i,u),eu(e,t,n)}function wr(){}function fd(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function dd(e,t){return t===void 0&&!fd(e)?"anonymous":t}function hd(e,t,r){r=r||wr;let n;if(t=t!==void 0?t:lt.crossOrigin,t=dd(e,t),typeof Image<"u"){n=new Image,t!==void 0&&(n.crossOrigin=t);const s=function(){n.removeEventListener("error",o),n.removeEventListener("load",a),n=null},o=function(){const u="couldn't load image: "+e;Pa(u),r(u,n),s()},a=function(){r(null,n),s()};return n.addEventListener("error",o),n.addEventListener("load",a),n.src=e,n}else if(typeof ImageBitmap<"u"){let s,o;const a=function(){r(s,o)},i={};t&&(i.mode="cors"),fetch(e,i).then(function(u){if(!u.ok)throw u;return u.blob()}).then(function(u){return createImageBitmap(u,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(u){o=u,setTimeout(a)}).catch(function(u){s=u,setTimeout(a)}),n=null}return n}function nu(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function Vs(e,t,r){return nu(e)?(setTimeout(function(){r(null,e)}),e):hd(e,t,r)}function zs(e,t,r){r=r||lt.textureOptions;const n=r.target||Ie;if(e.bindTexture(n,t),r.color===!1)return;const s=cd(r.color);if(n===De)for(let o=0;o<6;++o)e.texImage2D(mn+o,0,X,1,1,0,X,H,s);else n===ct||n===ut?e.texImage3D(n,0,X,1,1,1,0,X,H,s):e.texImage2D(n,0,X,1,1,0,X,H,s)}function md(e,t,r,n){return n=n||wr,r=r||lt.textureOptions,zs(e,t,r),r=Os(e,r),Vs(r.src,r.crossOrigin,function(o,a){o?n(o,t,a):(ru(e,t,a,r),n(null,t,a))})}function _d(e,t,r,n){n=n||wr;const s=r.src;if(s.length!==6)throw new Error("there must be 6 urls for a cubemap");const o=r.level||0,a=r.internalFormat||r.format||X,i=nr(a),u=r.format||i.format,l=r.type||H,c=r.target||Ie;if(c!==De)throw new Error("target must be TEXTURE_CUBE_MAP");zs(e,t,r),r=Os(e,r);let h=6;const f=[],d=ts(e,r);let m;function x(_){return function(p,g){--h,p?f.push(p):g.width!==g.height?f.push("cubemap face img is not a square: "+g.src):rt(e,r,()=>{e.bindTexture(c,t),h===5?ts().forEach(function(b){e.texImage2D(b,o,a,u,l,g)}):e.texImage2D(_,o,a,u,l,g),Sr(r)&&e.generateMipmap(c)}),h===0&&n(f.length?f:void 0,t,m)}}m=s.map(function(_,p){return Vs(_,r.crossOrigin,x(d[p]))})}function xd(e,t,r,n){n=n||wr;const s=r.src,o=r.internalFormat||r.format||X,a=nr(o),i=r.format||a.format,u=r.type||H,l=r.target||ut;if(l!==ct&&l!==ut)throw new Error("target must be TEXTURE_3D or TEXTURE_2D_ARRAY");zs(e,t,r),r=Os(e,r);let c=s.length;const h=[];let f;const d=r.level||0;let m=r.width,x=r.height;const _=s.length;let p=!0;function g(b){return function(S,R){--c,S?h.push(S):rt(e,r,()=>{if(e.bindTexture(l,t),p){p=!1,m=r.width||R.width,x=r.height||R.height,e.texImage3D(l,d,o,m,x,_,0,i,u,null);for(let E=0;E<_;++E)e.texSubImage3D(l,d,0,0,E,m,x,1,i,u,R)}else{let E=R,y;(R.width!==m||R.height!==x)&&(y=Xa(),E=y.canvas,y.canvas.width=m,y.canvas.height=x,y.drawImage(R,0,0,m,x)),e.texSubImage3D(l,d,0,0,b,m,x,1,i,u,E),y&&E===y.canvas&&(y.canvas.width=0,y.canvas.height=0)}Sr(r)&&e.generateMipmap(l)}),c===0&&n(h.length?h:void 0,t,f)}}f=s.map(function(b,S){return Vs(b,r.crossOrigin,g(S))})}function vd(e,t,r,n){n=n||lt.textureOptions;const s=n.target||Ie;e.bindTexture(s,t);const o=n.level||0,a=n.internalFormat||n.format||X,i=nr(a),u=n.format||i.format,l=n.type||Za(e,r,i.type);if(Zt(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const x=Fa(l);r=new x(r)}const{width:c,height:h,depth:f}=pd(s,r,n,a,u,l),d=Qa(a);Ja(e),e.pixelStorei(Us,n.unpackAlignment||1);let m=0;return rt(e,n,()=>{let x=0;const{blockWidth:_,blockHeight:p,bytesPerBlock:g}=ad(a,l);for(;x<r.byteLength;){const b=Math.max(1,c>>m),S=Math.max(1,h>>m),R=s===Ie?Math.max(1,f>>m):f,E=Math.ceil(b/_),y=Math.ceil(S/p),T=s===De?6:1,A=E*y*g*R*T;if(x+A>r.byteLength)throw new Error("src size does not match number of mip levels");const C=r.subarray(x/r.BYTES_PER_ELEMENT,(x+A)/r.BYTES_PER_ELEMENT),M=o+m;if(s===De){const ee=C.length/6;rs(e,n).forEach(Y=>{const le=ee*Y.ndx,ce=C.subarray(le,le+ee);d?e.compressedTexImage2D(Y.face,M,a,b,S,0,ce):e.texImage2D(Y.face,M,a,b,S,0,u,l,ce)})}else s===ct||s===ut?e.texImage3D(s,M,a,b,S,R,0,u,l,C):d?e.compressedTexImage2D(s,M,a,b,S,0,C):e.texImage2D(s,M,a,b,S,0,u,l,C);if(++m,x+=A,b===1&&S===1&&R===1&&x!==r.byteLength)throw new Error("src size has more data than can fit in mip levels")}}),{width:c,height:h,depth:f,type:l,lastMipLevelUploaded:o+m-1}}function pd(e,t,r,n,s,o){let a=r.width,i=r.height,u=r.depth;const l=Qa(n);if(l){if(!a||!i)throw new Error("compressed texture needs to set width and height!");u=u||1}else{const c=ja(n,o),h=t.byteLength/c;if(h%1)throw new Error(`length wrong size for format: ${Ha(dr,s)}`);if(l&&(!a||!i))throw new Error("compressed texture needs to set width and height!");let f;if(e===ct||e===ut)if(!a&&!i&&!u){const d=Math.cbrt(h);if(d%1!==0)throw new Error(`can't guess cube size of array of numElements: ${h}`);a=d,i=d,u=d}else a&&(!i||!u)?(f=Lr(dr,e,i,u,h/a),i=f.width,u=f.height):i&&(!a||!u)?(f=Lr(dr,e,a,u,h/i),a=f.width,u=f.height):(f=Lr(dr,e,a,i,h/u),a=f.width,i=f.height);else f=Lr(dr,e,a,i,h),a=f.width,i=f.height}return{width:a,height:i,depth:u}}function bd(e,t,r){const n=r.target||Ie;e.bindTexture(n,t);const s=r.level||0,o=r.internalFormat||r.format||X,a=nr(o),i=r.format||a.format,u=r.type||a.type;rt(e,r,()=>{if(n===De)for(let l=0;l<6;++l)e.texImage2D(mn+l,s,o,r.width,r.height,0,i,u,null);else n===ct||n===ut?e.texImage3D(n,s,o,r.width,r.height,r.depth,0,i,u,null):e.texImage2D(n,s,o,r.width,r.height,0,i,u,null)})}function su(e,t,r){r=r||wr,t=t||lt.textureOptions;const n=e.createTexture(),s=t.target||Ie;let o=t.width||1,a=t.height||1,i=0;const u=t.internalFormat||X;e.bindTexture(s,n),s===De&&(e.texParameteri(s,jr,Kr),e.texParameteri(s,Qr,Kr));let l=t.src;if(l)if(typeof l=="function"&&(l=l(e,t)),typeof l=="string")md(e,n,t,r);else if(Zt(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||Zt(l[0]))){const c=vd(e,n,l,t);o=c.width,a=c.height,i=c.lastMipLevelUploaded}else Array.isArray(l)&&(typeof l[0]=="string"||nu(l[0]))?s===De?_d(e,n,t,r):xd(e,n,t,r):(ru(e,n,l,t),o=l.width,a=l.height);else bd(e,n,t);return Sr(t)&&tu(e,n,{options:t,width:o,height:a,internalFormat:u,lastMipLevelUploaded:i}),eu(e,n,t),n}function ou(e,t,r,n,s,o){n=n||r.width,s=s||r.height,o=o||r.depth;const a=r.target||Ie;e.bindTexture(a,t);const i=r.level||0,u=r.internalFormat||r.format||X,l=nr(u),c=r.format||l.format;let h;const f=r.src;if(f&&(Zt(f)||Array.isArray(f)&&typeof f[0]=="number")?h=r.type||Za(e,f,l.type):h=r.type||l.type,a===De)for(let d=0;d<6;++d)e.texImage2D(mn+d,i,u,n,s,0,c,h,null);else a===ct||a===ut?e.texImage3D(a,i,u,n,s,o,0,c,h,null):e.texImage2D(a,i,u,n,s,0,c,h,null)}const Hs=Pa;function iu(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const Zr=33984,_n=34962,Ed=34963,yd=35713,gd=35714,Rd=35632,Sd=35633,Td=35981,au=35718,Ad=35721,Fd=35971,Pd=35382,wd=35396,Cd=35398,Bd=35392,Id=35395,xn=5126,uu=35664,lu=35665,cu=35666,Xs=5124,fu=35667,du=35668,hu=35669,mu=35670,_u=35671,xu=35672,vu=35673,pu=35674,bu=35675,Eu=35676,Dd=35678,Md=35680,Nd=35679,kd=35682,Gd=35685,Ld=35686,Ud=35687,Od=35688,Vd=35689,zd=35690,Hd=36289,Xd=36292,$d=36293,$s=5125,yu=36294,gu=36295,Ru=36296,qd=36298,Kd=36299,Yd=36300,Wd=36303,jd=36306,Qd=36307,Zd=36308,Jd=36311,vn=3553,pn=34067,qs=32879,bn=35866,B={};function Su(e,t){return B[t].bindPoint}function eh(e,t){return function(r){e.uniform1f(t,r)}}function th(e,t){return function(r){e.uniform1fv(t,r)}}function rh(e,t){return function(r){e.uniform2fv(t,r)}}function nh(e,t){return function(r){e.uniform3fv(t,r)}}function sh(e,t){return function(r){e.uniform4fv(t,r)}}function Tu(e,t){return function(r){e.uniform1i(t,r)}}function Au(e,t){return function(r){e.uniform1iv(t,r)}}function Fu(e,t){return function(r){e.uniform2iv(t,r)}}function Pu(e,t){return function(r){e.uniform3iv(t,r)}}function wu(e,t){return function(r){e.uniform4iv(t,r)}}function oh(e,t){return function(r){e.uniform1ui(t,r)}}function ih(e,t){return function(r){e.uniform1uiv(t,r)}}function ah(e,t){return function(r){e.uniform2uiv(t,r)}}function uh(e,t){return function(r){e.uniform3uiv(t,r)}}function lh(e,t){return function(r){e.uniform4uiv(t,r)}}function ch(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}function fh(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}function dh(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}function hh(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}function mh(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}function _h(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}function xh(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}function vh(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}function ph(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}function ne(e,t,r,n){const s=Su(e,t);return Pr(e)?function(o){let a,i;!o||cn(e,o)?(a=o,i=null):(a=o.texture,i=o.sampler),e.uniform1i(n,r),e.activeTexture(Zr+r),e.bindTexture(s,a),e.bindSampler(r,i)}:function(o){e.uniform1i(n,r),e.activeTexture(Zr+r),e.bindTexture(s,o)}}function se(e,t,r,n,s){const o=Su(e,t),a=new Int32Array(s);for(let i=0;i<s;++i)a[i]=r+i;return Pr(e)?function(i){e.uniform1iv(n,a),i.forEach(function(u,l){e.activeTexture(Zr+a[l]);let c,h;!u||cn(e,u)?(c=u,h=null):(c=u.texture,h=u.sampler),e.bindSampler(r,h),e.bindTexture(o,c)})}:function(i){e.uniform1iv(n,a),i.forEach(function(u,l){e.activeTexture(Zr+a[l]),e.bindTexture(o,u)})}}B[xn]={Type:Float32Array,size:4,setter:eh,arraySetter:th};B[uu]={Type:Float32Array,size:8,setter:rh,cols:2};B[lu]={Type:Float32Array,size:12,setter:nh,cols:3};B[cu]={Type:Float32Array,size:16,setter:sh,cols:4};B[Xs]={Type:Int32Array,size:4,setter:Tu,arraySetter:Au};B[fu]={Type:Int32Array,size:8,setter:Fu,cols:2};B[du]={Type:Int32Array,size:12,setter:Pu,cols:3};B[hu]={Type:Int32Array,size:16,setter:wu,cols:4};B[$s]={Type:Uint32Array,size:4,setter:oh,arraySetter:ih};B[yu]={Type:Uint32Array,size:8,setter:ah,cols:2};B[gu]={Type:Uint32Array,size:12,setter:uh,cols:3};B[Ru]={Type:Uint32Array,size:16,setter:lh,cols:4};B[mu]={Type:Uint32Array,size:4,setter:Tu,arraySetter:Au};B[_u]={Type:Uint32Array,size:8,setter:Fu,cols:2};B[xu]={Type:Uint32Array,size:12,setter:Pu,cols:3};B[vu]={Type:Uint32Array,size:16,setter:wu,cols:4};B[pu]={Type:Float32Array,size:32,setter:ch,rows:2,cols:2};B[bu]={Type:Float32Array,size:48,setter:fh,rows:3,cols:3};B[Eu]={Type:Float32Array,size:64,setter:dh,rows:4,cols:4};B[Gd]={Type:Float32Array,size:32,setter:hh,rows:2,cols:3};B[Ld]={Type:Float32Array,size:32,setter:_h,rows:2,cols:4};B[Ud]={Type:Float32Array,size:48,setter:mh,rows:3,cols:2};B[Od]={Type:Float32Array,size:48,setter:vh,rows:3,cols:4};B[Vd]={Type:Float32Array,size:64,setter:xh,rows:4,cols:2};B[zd]={Type:Float32Array,size:64,setter:ph,rows:4,cols:3};B[Dd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:vn};B[Md]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:pn};B[Nd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:qs};B[kd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:vn};B[Hd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:bn};B[Xd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:bn};B[$d]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:pn};B[qd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:vn};B[Kd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:qs};B[Yd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:pn};B[Wd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:bn};B[jd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:vn};B[Qd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:qs};B[Zd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:pn};B[Jd]={Type:null,size:0,setter:ne,arraySetter:se,bindPoint:bn};function En(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(_n,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||xn,r.normalize||!1,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function ft(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4iv(t,r.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(_n,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||Xs,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function yn(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4uiv(t,r.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(_n,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||$s,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function Ks(e,t,r){const n=r.size,s=r.count;return function(o){e.bindBuffer(_n,o.buffer);const a=o.size||o.numComponents||n,i=a/s,u=o.type||xn,c=B[u].size*a,h=o.normalize||!1,f=o.offset||0,d=c/s;for(let m=0;m<s;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,i,u,h,c,f+d*m),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+m,o.divisor||0)}}const K={};K[xn]={size:4,setter:En};K[uu]={size:8,setter:En};K[lu]={size:12,setter:En};K[cu]={size:16,setter:En};K[Xs]={size:4,setter:ft};K[fu]={size:8,setter:ft};K[du]={size:12,setter:ft};K[hu]={size:16,setter:ft};K[$s]={size:4,setter:yn};K[yu]={size:8,setter:yn};K[gu]={size:12,setter:yn};K[Ru]={size:16,setter:yn};K[mu]={size:4,setter:ft};K[_u]={size:8,setter:ft};K[xu]={size:12,setter:ft};K[vu]={size:16,setter:ft};K[pu]={size:4,setter:Ks,count:2};K[bu]={size:9,setter:Ks,count:3};K[Eu]={size:16,setter:Ks,count:4};const bh=/ERROR:\s*\d+:(\d+)/gi;function Eh(e,t="",r=0){const n=[...t.matchAll(bh)],s=new Map(n.map((o,a)=>{const i=parseInt(o[1]),u=n[a+1],l=u?u.index:t.length,c=t.substring(o.index,l);return[i-1,c]}));return e.split(`
`).map((o,a)=>{const i=s.get(a);return`${a+1+r}: ${o}${i?`

^^^ ${i}`:""}`}).join(`
`)}const Mi=/^[ \t]*\n/;function Cu(e){let t=0;return Mi.test(e)&&(t=1,e=e.replace(Mi,"")),{lineOffset:t,shaderSource:e}}function yh(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function gh(e,t,r,n){if(n=n||Hs,!e.getShaderParameter(r,yd)){const o=e.getShaderInfoLog(r),{lineOffset:a,shaderSource:i}=Cu(e.getShaderSource(r)),u=`${Eh(i,o,a)}
Error compiling ${Ha(e,t)}: ${o}`;return n(u),u}return""}function Ys(e,t,r){let n,s,o;if(typeof t=="function"&&(r=t,t=void 0),typeof e=="function")r=e,e=void 0;else if(e&&!Array.isArray(e)){const l=e;r=l.errorCallback,e=l.attribLocations,n=l.transformFeedbackVaryings,s=l.transformFeedbackMode,o=l.callback}const a=r||Hs,i=[],u={errorCallback(l,...c){i.push(l),a(l,...c)},transformFeedbackVaryings:n,transformFeedbackMode:s,callback:o,errors:i};{let l={};Array.isArray(e)?e.forEach(function(c,h){l[c]=t?t[h]:h}):l=e||{},u.attribLocations=l}return u}const Rh=["VERTEX_SHADER","FRAGMENT_SHADER"];function Sh(e,t){if(t.indexOf("frag")>=0)return Rd;if(t.indexOf("vert")>=0)return Sd}function Th(e,t,r){const n=e.getAttachedShaders(t);for(const s of n)r.has(s)||e.deleteShader(s);e.deleteProgram(t)}const Ah=(e=0)=>new Promise(t=>setTimeout(t,e));function Fh(e,t,r){const n=e.createProgram(),{attribLocations:s,transformFeedbackVaryings:o,transformFeedbackMode:a}=Ys(r);for(let i=0;i<t.length;++i){let u=t[i];if(typeof u=="string"){const l=iu(u),c=l?l.text:u;let h=e[Rh[i]];l&&l.type&&(h=Sh(e,l.type)||h),u=e.createShader(h),e.shaderSource(u,Cu(c).shaderSource),e.compileShader(u)}e.attachShader(n,u)}Object.entries(s).forEach(([i,u])=>e.bindAttribLocation(n,u,i));{let i=o;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(n,i,a||Td))}return e.linkProgram(n),n}function Ph(e,t,r,n,s){const o=Ys(r,n,s),a=new Set(t),i=Fh(e,t,o);function u(l,c){const h=Ch(l,c,o.errorCallback);return h&&Th(l,c,a),h}if(o.callback){wh(e,i).then(()=>{const l=u(e,i);o.callback(l,l?void 0:i)});return}return u(e,i)?void 0:i}async function wh(e,t){const r=e.getExtension("KHR_parallel_shader_compile"),n=r?(o,a)=>o.getProgramParameter(a,r.COMPLETION_STATUS_KHR):()=>!0;let s=0;do await Ah(s),s=1e3/60;while(!n(e,t))}function Ch(e,t,r){if(r=r||Hs,!e.getProgramParameter(t,gd)){const s=e.getProgramInfoLog(t);r(`Error in program linking: ${s}`);const a=e.getAttachedShaders(t).map(i=>gh(e,e.getShaderParameter(i,e.SHADER_TYPE),i,r));return`${s}
${a.filter(i=>i).join(`
`)}`}}function Bh(e,t,r,n,s){return Ph(e,t,r,n,s)}function Bu(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const Ih=/(\.|\[|]|\w+)/g,Dh=e=>e>="0"&&e<="9";function Mh(e,t,r,n){const s=e.split(Ih).filter(i=>i!=="");let o=0,a="";for(;;){const i=s[o++];a+=i;const u=Dh(i[0]),l=u?parseInt(i):i;if(u&&(a+=s[o++]),o===s.length){r[l]=t;break}else{const h=s[o++],f=h==="[",d=r[l]||(f?[]:{});r[l]=d,r=d,n[a]=n[a]||(function(m){return function(x){Iu(m,x)}})(d),a+=h}}}function Nh(e,t){let r=0;function n(i,u,l){const c=u.name.endsWith("[0]"),h=u.type,f=B[h];if(!f)throw new Error(`unknown type: 0x${h.toString(16)}`);let d;if(f.bindPoint){const m=r;r+=u.size,c?d=f.arraySetter(e,h,m,l,u.size):d=f.setter(e,h,m,l,u.size)}else f.arraySetter&&c?d=f.arraySetter(e,l):d=f.setter(e,l);return d.location=l,d}const s={},o={},a=e.getProgramParameter(t,au);for(let i=0;i<a;++i){const u=e.getActiveUniform(t,i);if(Bu(u))continue;let l=u.name;l.endsWith("[0]")&&(l=l.substr(0,l.length-3));const c=e.getUniformLocation(t,u.name);if(c){const h=n(t,u,c);s[l]=h,Mh(l,h,o,s)}}return s}function kh(e,t){const r={},n=e.getProgramParameter(t,Fd);for(let s=0;s<n;++s){const o=e.getTransformFeedbackVarying(t,s);r[o.name]={index:s,type:o.type,size:o.size}}return r}function Gh(e,t){const r=e.getProgramParameter(t,au),n=[],s=[];for(let i=0;i<r;++i){s.push(i),n.push({});const u=e.getActiveUniform(t,i);n[i].name=u.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){const u=i[0],l=i[1];e.getActiveUniforms(t,s,e[u]).forEach(function(c,h){n[h][l]=c})});const o={},a=e.getProgramParameter(t,Pd);for(let i=0;i<a;++i){const u=e.getActiveUniformBlockName(t,i),l={index:e.getUniformBlockIndex(t,u),usedByVertexShader:e.getActiveUniformBlockParameter(t,i,wd),usedByFragmentShader:e.getActiveUniformBlockParameter(t,i,Cd),size:e.getActiveUniformBlockParameter(t,i,Bd),uniformIndices:e.getActiveUniformBlockParameter(t,i,Id)};l.used=l.usedByVertexShader||l.usedByFragmentShader,o[u]=l}return{blockSpecs:o,uniformData:n}}function Iu(e,t){for(const r in t){const n=e[r];typeof n=="function"?n(t[r]):Iu(e[r],t[r])}}function Du(e,...t){const r=e.uniformSetters||e,n=t.length;for(let s=0;s<n;++s){const o=t[s];if(Array.isArray(o)){const a=o.length;for(let i=0;i<a;++i)Du(r,o[i])}else for(const a in o){const i=r[a];i&&i(o[a])}}}function Lh(e,t){const r={},n=e.getProgramParameter(t,Ad);for(let s=0;s<n;++s){const o=e.getActiveAttrib(t,s);if(Bu(o))continue;const a=e.getAttribLocation(t,o.name),i=K[o.type],u=i.setter(e,a,i);u.location=a,r[o.name]=u}return r}function Uh(e,t){for(const r in t){const n=e[r];n&&n(t[r])}}function Oh(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(Uh(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(Ed,r.indices))}function Ni(e,t){const r=Nh(e,t),n=Lh(e,t),s={program:t,uniformSetters:r,attribSetters:n,uniformLocations:Object.fromEntries(Object.entries(r).map(([o,a])=>[o,a.location])),attribLocations:Object.fromEntries(Object.entries(n).map(([o,a])=>[o,a.location]))};return Pr(e)&&(s.uniformBlockSpec=Gh(e,t),s.transformFeedbackInfo=kh(e,t)),s}const Vh=/\s|{|}|;/;function zh(e,t,r,n,s){const o=Ys(r,n,s),a=[];if(t=t.map(function(l){if(!Vh.test(l)){const c=iu(l);if(c)l=c.text;else{const h=`no element with id: ${l}`;o.errorCallback(h),a.push(h)}}return l}),a.length)return yh(o,"");const i=o.callback;i&&(o.callback=(l,c)=>{i(l,l?void 0:Ni(e,c))});const u=Bh(e,t,o);return u?Ni(e,u):null}const Hh=4,ki=5123;function Xh(e,t,r,n,s,o){r=r===void 0?Hh:r;const a=t.indices,i=t.elementType,u=n===void 0?t.numElements:n;s=s===void 0?0:s,i||a?o!==void 0?e.drawElementsInstanced(r,u,i===void 0?ki:t.elementType,s,o):e.drawElements(r,u,i===void 0?ki:t.elementType,s):o!==void 0?e.drawArraysInstanced(r,s,u,o):e.drawArrays(r,s,u)}const Mu=36160,pt=36161,$h=3553,qh=5121,Kh=6402,Yh=6408,Wh=33190,jh=36012,Qh=35056,Zh=36013,Jh=32854,em=32855,tm=36194,Nu=33189,ku=6401,Gu=36168,Ws=34041,ns=36064,gn=36096,Lu=36128,js=33306,ss=33071,os=9729,Uu=[{format:Yh,type:qh,min:os,wrap:ss},{format:Ws}],Re={};Re[Ws]=js;Re[ku]=Lu;Re[Gu]=Lu;Re[Kh]=gn;Re[Nu]=gn;Re[Wh]=gn;Re[jh]=gn;Re[Qh]=js;Re[Zh]=js;function rm(e,t){return Re[e]||Re[t]}const dt={};dt[Jh]=!0;dt[em]=!0;dt[tm]=!0;dt[Ws]=!0;dt[Nu]=!0;dt[ku]=!0;dt[Gu]=!0;function nm(e){return dt[e]}const sm=32;function om(e){return e>=ns&&e<ns+sm}function im(e,t,r,n){const s=Mu,o=e.createFramebuffer();e.bindFramebuffer(s,o),r=r||e.drawingBufferWidth,n=n||e.drawingBufferHeight,t=t||Uu;const a=[],i={framebuffer:o,attachments:[],width:r,height:n};return t.forEach(function(u,l){let c=u.attachment;const h=u.samples,f=u.format;let d=u.attachmentPoint||rm(f,u.internalFormat);if(d||(d=ns+l),om(d)&&a.push(d),!c)if(h!==void 0||nm(f))c=e.createRenderbuffer(),e.bindRenderbuffer(pt,c),h>1?e.renderbufferStorageMultisample(pt,h,f,r,n):e.renderbufferStorage(pt,f,r,n);else{const m=Object.assign({},u);m.width=r,m.height=n,m.auto===void 0&&(m.auto=!1,m.min=m.min||m.minMag||os,m.mag=m.mag||m.minMag||os,m.wrapS=m.wrapS||m.wrap||ss,m.wrapT=m.wrapT||m.wrap||ss),c=su(e,m)}if(wa(e,c))e.framebufferRenderbuffer(s,d,pt,c);else if(cn(e,c))u.layer!==void 0?e.framebufferTextureLayer(s,d,c,u.level||0,u.layer):e.framebufferTexture2D(s,d,u.target||$h,c,u.level||0);else throw new Error("unknown attachment type");i.attachments.push(c)}),e.drawBuffers&&e.drawBuffers(a),i}function am(e,t,r,n,s){n=n||e.drawingBufferWidth,s=s||e.drawingBufferHeight,t.width=n,t.height=s,r=r||Uu,r.forEach(function(o,a){const i=t.attachments[a],u=o.format,l=o.samples;if(l!==void 0||wa(e,i))e.bindRenderbuffer(pt,i),l>1?e.renderbufferStorageMultisample(pt,l,u,n,s):e.renderbufferStorage(pt,u,n,s);else if(cn(e,i))ou(e,i,o,n,s);else throw new Error("unknown attachment type")})}function Gi(e,t,r){r=r||Mu,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}class oe{constructor(t,r,n,s){this.gl=t,this.internalFormat=r,this.format=n,this.texture=su(t,{width:t.canvas.width,height:t.canvas.height,internalFormat:r,format:n,type:t.UNSIGNED_BYTE,minMag:s,wrap:t.CLAMP_TO_EDGE}),this.framebufferInfo=im(t,[{attachment:this.texture}],t.canvas.width,t.canvas.height)}framebufferInfo;texture;get isRGBA8(){return this.internalFormat===this.gl.RGBA8&&this.format===this.gl.RGBA}get isR8(){return this.internalFormat===this.gl.R8&&this.format===this.gl.RED}static createRGBA8(t,r=t.LINEAR){return new oe(t,t.RGBA8,t.RGBA,r)}static createR8(t,r=t.LINEAR){return new oe(t,t.R8,t.RED,r)}resize(t,r){ou(this.gl,this.texture,{width:t,height:r}),am(this.gl,this.framebufferInfo,[{attachment:this.texture}],t,r)}}class um{constructor(t){this.gl=t,this.bitmapRenderTarget=oe.createRGBA8(t)}passes=[];bitmapRenderTarget;addPass(t){this.passes.push(t)}applyBitmap(t,r){this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r)}resize(t,r){this.gl.canvas.width=t,this.gl.canvas.height=r,this.bitmapRenderTarget.resize(t,r)}async render(t){(this.gl.canvas.width!==t.width||this.gl.canvas.height!==t.height)&&this.resize(t.width,t.height),this.applyBitmap(this.bitmapRenderTarget.texture,t);const r=this.passes.filter(o=>o.enabled);if(r.length===0)throw new Error("No passes in pipeline");let n=this.bitmapRenderTarget;for(let o=0;o<r.length-1;o++)n=r[o].apply(n);r[r.length-1].applyToScreen(n)}}const lm=`#version 300 es

in vec2 position;
in vec2 texcoord;

out vec2 v_uv;

void main() {
  v_uv = texcoord;
  gl_Position = vec4(position, 0.0, 1.0);
}`;class sr{constructor(t,r){this.gl=t,this.settings=r,this.quadBufferInfo=Xf.createXYQuadBufferInfo(t)}get enabled(){return this.settings.enabled}set enabled(t){this.settings.enabled=t}quadBufferInfo;apply(t){return this.applyInternal(t,!1)}applyToScreen(t){this.applyInternal(t,!0)}executeProgram(t,r,n,s=!1){this.settings.input=r.texture,t.uniformSetters.u_texelSize&&this.settings.setTextelSize(r.framebufferInfo.width,r.framebufferInfo.height),n&&!s&&(n.framebufferInfo.width!==this.gl.canvas.width||n.framebufferInfo.height!==this.gl.canvas.height)&&n.resize(this.gl.canvas.width,this.gl.canvas.height);const o=n?n.framebufferInfo.width:this.gl.canvas.width,a=n?n.framebufferInfo.height:this.gl.canvas.height;n?Gi(this.gl,n.framebufferInfo):Gi(this.gl,null),this.gl.useProgram(t.program),this.gl.viewport(0,0,o,a),Oh(this.gl,t,this.quadBufferInfo),Du(t,this.settings.uniforms),Xh(this.gl,this.quadBufferInfo)}createProgramInfo(t){return zh(this.gl,[lm,t])}}const cm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;        // R8 luma input
uniform vec2      u_texelSize;    // 1 / texture resolution

uniform float u_sigmaSpatial;     // spatial Gaussian sigma
uniform float u_sigmaRange;       // range (luma) Gaussian sigma
uniform int   u_kernelRadius;     // must be <= MAX_KERNEL_RADIUS

out vec4 outColor;

const int MAX_KERNEL_RADIUS = 5;

void main() {

    vec2 uv = v_uv;

    // Center pixel (luma)
    float centerLuma = texture(u_input, uv).r;

    float weightedSum = 0.0;
    float weightTotal = 0.0;

    // Precompute inverse variances
    float invSpatialVar = 1.0 / (2.0 * u_sigmaSpatial * u_sigmaSpatial);
    float invRangeVar   = 1.0 / (2.0 * u_sigmaRange   * u_sigmaRange);

    for (int ky = -MAX_KERNEL_RADIUS; ky <= MAX_KERNEL_RADIUS; ++ky) {
        for (int kx = -MAX_KERNEL_RADIUS; kx <= MAX_KERNEL_RADIUS; ++kx) {

            // Branchless kernel mask
            float maskX = step(float(abs(kx)), float(u_kernelRadius));
            float maskY = step(float(abs(ky)), float(u_kernelRadius));
            float kernelMask = maskX * maskY;

            vec2 offsetTexel =
                vec2(float(kx), float(ky)) * u_texelSize;

            float neighborLuma =
                texture(u_input, uv + offsetTexel).r;

            float spatialDist2 =
                float(kx * kx + ky * ky);

            float rangeDist2 =
                (neighborLuma - centerLuma) *
                (neighborLuma - centerLuma);

            float weightSpatial =
                exp(-spatialDist2 * invSpatialVar);

            float weightRange =
                exp(-rangeDist2 * invRangeVar);

            float kernelWeight =
                weightSpatial * weightRange * kernelMask;

            weightedSum += neighborLuma * kernelWeight;
            weightTotal += kernelWeight;
        }
    }

    float filteredLuma = weightedSum / weightTotal;

    outColor = vec4(filteredLuma,
                    filteredLuma,
                    filteredLuma,
                    1.0);
}
`;class fm extends sr{bilateralProgramInfo;outputRenderTarget;constructor(t,r){super(t,r),this.bilateralProgramInfo=this.createProgramInfo(cm),this.outputRenderTarget=oe.createRGBA8(t)}applyInternal(t,r){if(!t.isR8)throw new Error("BilateralPass only supports R8 render targets");return this.executeProgram(this.bilateralProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class or{_enabled=!0;get enabled(){return this._enabled}set enabled(t){this._enabled=t}get input(){return this.uniforms.u_input}set input(t){this.uniforms.u_input=t}get textelSize(){return this.uniforms.u_texelSize}setTextelSize(t,r){this.uniforms.u_texelSize=[1/t,1/r]}uniforms={}}class dm extends or{get sigmaSpatial(){return this.uniforms.u_sigmaSpatial}set sigmaSpatial(t){this.uniforms.u_sigmaSpatial=t}get sigmaRange(){return this.uniforms.u_sigmaRange}set sigmaRange(t){this.uniforms.u_sigmaRange=t}get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}}const hm=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;

out vec4 outColor;

void main() {
    vec3 color = texture(u_input, v_uv).rgb;

    // Rec.709 luma
    float luma = dot(color, vec3(
        0.2126,  // R
        0.7152,  // G
        0.0722   // B
    ));

    outColor = vec4(luma, luma, luma, 1.0);
}
`;class mm extends sr{lum709ProgramInfo;outputRenderTarget;constructor(t){super(t,new or),this.lum709ProgramInfo=this.createProgramInfo(hm),this.outputRenderTarget=oe.createR8(t)}applyInternal(t,r){if(!t.isRGBA8)throw new Error("Rec709LumPass only supports RGBA8 render targets");return this.executeProgram(this.lum709ProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}const _m=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2      u_texelSize;

uniform int   u_kernelRadius;     // 1 = 3x3, 2 = 5x5
uniform float u_directionBias;    // -1 vertical, +1 horizontal
uniform float u_edgeGain;
uniform float u_minEdge;

out vec4 outColor;

/* 3x3 Sobel expanded into 5x5 space */
const float d3[5] = float[5](0.0, -1.0, 0.0, 1.0, 0.0);
const float s3[5] = float[5](0.0,  1.0, 2.0, 1.0, 0.0);

/* True 5x5 Sobel */
const float d5[5] = float[5](-2.0, -1.0, 0.0, 1.0, 2.0);
const float s5[5] = float[5]( 1.0,  4.0, 6.0, 4.0, 1.0);

void main() {
    vec2 uv = v_uv;
    vec2 t  = u_texelSize;

    float gradX = 0.0;
    float gradY = 0.0;

    float use5 = step(1.5, float(u_kernelRadius));
    float use3 = 1.0 - use5;

    float kernelNormalization =
    mix(1.0, 1.0 / 12.0, use5);

    for (int y = 0; y < 5; ++y) {
        for (int x = 0; x < 5; ++x) {

            vec2 offset = vec2(float(x - 2), float(y - 2)) * t;
            float luma  = texture(u_input, uv + offset).r;

            float gx =
                d3[x] * s3[y] * use3 +
                d5[x] * s5[y] * use5;

            float gy =
                s3[x] * d3[y] * use3 +
                s5[x] * d5[y] * use5;

            gradX += luma * gx;
            gradY += luma * gy;
        }
    }

    float ax = abs(gradX);
    float ay = abs(gradY);

    float wX = clamp(1.0 - u_directionBias, 0.0, 2.0) * 0.5;
    float wY = clamp(1.0 + u_directionBias, 0.0, 2.0) * 0.5;

    float edge =
        wX * ax +
        wY * ay;

    edge = edge * kernelNormalization;
    edge = max(edge * u_edgeGain - u_minEdge, 0.0);

    outColor = vec4(edge, edge, edge, 1.0);
}
`;class xm extends sr{sobelProgramInfo;outputRenderTarget;constructor(t,r){super(t,r),this.sobelProgramInfo=this.createProgramInfo(_m),this.outputRenderTarget=oe.createRGBA8(t)}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("SobelPass expects R8 or RGBA8 render targets");return this.executeProgram(this.sobelProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class vm extends or{get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}get directionBias(){return this.uniforms.u_directionBias}set directionBias(t){this.uniforms.u_directionBias=t}get edgeGain(){return this.uniforms.u_edgeGain}set edgeGain(t){this.uniforms.u_edgeGain=t}get minEdge(){return this.uniforms.u_minEdge}set minEdge(t){this.uniforms.u_minEdge=t}}const pm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;   // Sobel magnitude (0..1)
uniform float u_threshold;

out vec4 outColor;

void main() {
    float strength = texture(u_input, v_uv).r;

    // Drop below threshold, preserve magnitude
    float edge = strength * step(u_threshold, strength);

    outColor = vec4(edge, edge, edge, 1.0);
}`;class bm extends sr{programInfo;outputRenderTarget;constructor(t,r){super(t,r),this.programInfo=this.createProgramInfo(pm),this.outputRenderTarget=oe.createRGBA8(t)}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("MagnatudeGatePass expects R8 or RGBA8 render targets");return this.executeProgram(this.programInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class Em extends or{get threshold(){return this.uniforms.u_threshold}set threshold(t){this.uniforms.u_threshold=t}}const ym=`#version 300 es
precision highp float;

in vec2 v_uv;

/*
  u_input is always bound by the pipeline
  and represents the CURRENT frame.
*/
uniform sampler2D u_input;

uniform sampler2D u_frame1;
uniform sampler2D u_frame2;
uniform sampler2D u_frame3;
uniform sampler2D u_frame4;

out vec4 outColor;

/*
  Exact median of 5 values.
  Deterministic, branchless.
*/
float median5(
    float v0,
    float v1,
    float v2,
    float v3,
    float v4
) {
    float a = min(v0, v1);
    float b = max(v0, v1);
    float c = min(v2, v3);
    float d = max(v2, v3);

    float e = max(a, c);
    float f = min(b, d);

    float g = min(e, f);
    float h = max(e, f);

    return max(min(h, v4), g);
}

void main() {
    float value0 = texture(u_input,  v_uv).r;
    float value1 = texture(u_frame1, v_uv).r;
    float value2 = texture(u_frame2, v_uv).r;
    float value3 = texture(u_frame3, v_uv).r;
    float value4 = texture(u_frame4, v_uv).r;

    float medianValue =
        median5(value0, value1, value2, value3, value4);

    outColor = vec4(medianValue, medianValue, medianValue, 1.0);
}
`;class gm extends sr{programInfo;outputRenderTarget;history=[];historyWriteIndex=0;historyInitialized=!1;constructor(t,r){super(t,r),this.programInfo=this.createProgramInfo(ym),this.outputRenderTarget=oe.createRGBA8(t),this.history=[oe.createRGBA8(t),oe.createRGBA8(t),oe.createRGBA8(t),oe.createRGBA8(t)]}ensureHistorySized(t,r){for(const n of this.history)(n.framebufferInfo.width!==t||n.framebufferInfo.height!==r)&&n.resize(t,r)}copyToHistory(t){const r=this.gl,n=this.history[this.historyWriteIndex];r.bindFramebuffer(r.READ_FRAMEBUFFER,t.framebufferInfo.framebuffer),r.bindTexture(r.TEXTURE_2D,n.texture),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,0,0,t.framebufferInfo.width,t.framebufferInfo.height),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),this.historyWriteIndex=(this.historyWriteIndex+1)%this.history.length}seedHistory(t){for(let r=0;r<this.history.length;r++)this.historyWriteIndex=r,this.copyToHistory(t);this.historyInitialized=!0}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("TemporalPass expects R8 or RGBA8 render targets");return this.ensureHistorySized(t.framebufferInfo.width,t.framebufferInfo.height),(this.outputRenderTarget.framebufferInfo.width!==t.framebufferInfo.width||this.outputRenderTarget.framebufferInfo.height!==t.framebufferInfo.height)&&this.outputRenderTarget.resize(t.framebufferInfo.width,t.framebufferInfo.height),this.historyInitialized||this.seedHistory(t),this.settings.uniforms.u_frame1=this.history[0].texture,this.settings.uniforms.u_frame2=this.history[1].texture,this.settings.uniforms.u_frame3=this.history[2].texture,this.settings.uniforms.u_frame4=this.history[3].texture,this.executeProgram(this.programInfo,t,r?null:this.outputRenderTarget),this.copyToHistory(t),this.outputRenderTarget}}class Rm extends or{}const Sm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2 u_corners[4];
uniform float u_thickness;

out vec4 outColor;

float segmentDistance(vec2 p, vec2 a, vec2 b) {
    vec2 ab = b - a;
    float t = clamp(dot(p - a, ab) / dot(ab, ab), 0.0, 1.0);
    vec2 closest = a + t * ab;
    return length(p - closest);
}

void main() {
    vec4 base = texture(u_input, v_uv);

    vec2 p = v_uv;
    float d0 = segmentDistance(p, u_corners[0], u_corners[1]);
    float d1 = segmentDistance(p, u_corners[1], u_corners[2]);
    float d2 = segmentDistance(p, u_corners[2], u_corners[3]);
    float d3 = segmentDistance(p, u_corners[3], u_corners[0]);

    float minDist = min(min(d0, d1), min(d2, d3));

    float edge = step(u_thickness, minDist);
    float mask = 1.0 - edge;

    outColor = mix(base, vec4(1.0, 1.0, 1.0, 1.0), mask);
}
`;class Tm extends sr{boxProgramInfo;outputRenderTarget;pixelBuffer=null;pixelChannels=0;constructor(t,r){super(t,r),this.boxProgramInfo=this.createProgramInfo(Sm),this.outputRenderTarget=oe.createRGBA8(t)}ensurePixelBuffer(t,r,n){const s=t*r*n;(!this.pixelBuffer||this.pixelBuffer.length!==s)&&(this.pixelBuffer=new Uint8Array(s)),this.pixelChannels=n}readPixelsToBuffer(t){const r=t.framebufferInfo.width,n=t.framebufferInfo.height,s=t.isR8,o=s?this.gl.RED:this.gl.RGBA,a=s?1:4;return this.ensurePixelBuffer(r,n,a),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t.framebufferInfo.framebuffer),this.gl.readPixels(0,0,r,n,o,this.gl.UNSIGNED_BYTE,this.pixelBuffer),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),{width:r,height:n}}sampleMax3x3(t,r,n,s){if(!this.pixelBuffer)return 0;const o=Math.round(t),a=Math.round(r);let i=0;for(let u=-1;u<=1;u++)for(let l=-1;l<=1;l++){const c=Math.max(0,Math.min(n-1,o+l)),h=Math.max(0,Math.min(s-1,a+u)),d=((s-1-h)*n+c)*this.pixelChannels,m=this.pixelBuffer[d]/255;m>i&&(i=m)}return i}findRayHits(t,r,n,s,o){const a=(t-1)*.5,i=(r-1)*.5,u=[];for(let l=0;l<s;l++){const c=l/s*Math.PI*2,h=Math.cos(c),f=Math.sin(c),d=h>0?(t-1-a)/h:h<0?-a/h:1/0,m=f>0?(r-1-i)/f:f<0?-i/f:1/0,x=Math.min(d,m);if(isFinite(x))for(let _=x;_>=0;_-=o){const p=a+h*_,g=i+f*_;if(this.sampleMax3x3(p,g,t,r)>=n){u.push({x:p/(t-1),y:g/(r-1)});break}}}return u}computeOBBCorners(t,r){if(t.length<4)return[{x:.5-.25,y:.5-.25},{x:.5+.25,y:.5-.25},{x:.5+.25,y:.5+.25},{x:.5-.25,y:.5+.25}];let n=0,s=0;for(const A of t)n+=A.x,s+=A.y;n/=t.length,s/=t.length;let o=0,a=0,i=0;for(const A of t){const C=A.x-n,M=A.y-s;o+=C*C,a+=C*M,i+=M*M}const u=o+i,l=o*i-a*a,c=Math.sqrt(Math.max(0,u*u-4*l)),h=(u+c)*.5;let f=a,d=h-o;const m=Math.hypot(f,d)||1;f/=m,d/=m;const x=-d,_=f,p=[],g=[];for(const A of t){const C=A.x-n,M=A.y-s;p.push(C*f+M*d),g.push(C*x+M*_)}p.sort((A,C)=>A-C),g.sort((A,C)=>A-C);const b=Math.floor(p.length*Math.min(Math.max(r,0),.45)),S=p[b],R=p[p.length-1-b],E=g[b],y=g[g.length-1-b],T=[{x:n+S*f+E*x,y:s+S*d+E*_},{x:n+R*f+E*x,y:s+R*d+E*_},{x:n+R*f+y*x,y:s+R*d+y*_},{x:n+S*f+y*x,y:s+S*d+y*_}];for(const A of T)A.x=Math.max(0,Math.min(1,A.x)),A.y=Math.max(0,Math.min(1,A.y));return T}applyInternal(t,r){const n=this.settings,{width:s,height:o}=this.readPixelsToBuffer(t),a=this.findRayHits(s,o,n.threshold,Math.max(32,n.rayCount),n.step),i=this.computeOBBCorners(a,n.trimFraction);return this.settings.uniforms.u_corners=[i[0].x,1-i[0].y,i[1].x,1-i[1].y,i[2].x,1-i[2].y,i[3].x,1-i[3].y],this.settings.uniforms.u_thickness=1.5/Math.max(s,o),this.settings.uniforms.u_input=t.texture,this.executeProgram(this.boxProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class Am extends or{_threshold=.2;_rayCount=64;_step=.5;_trimFraction=.12;_angleThreshold=0;_distanceThreshold=0;get threshold(){return this._threshold}set threshold(t){this._threshold=t}get rayCount(){return this._rayCount}set rayCount(t){this._rayCount=t}get step(){return this._step}set step(t){this._step=t}get trimFraction(){return this._trimFraction}set trimFraction(t){this._trimFraction=t}get angleThreshold(){return this._angleThreshold}set angleThreshold(t){this._angleThreshold=t}get distanceThreshold(){return this._distanceThreshold}set distanceThreshold(t){this._distanceThreshold=t}}class Li{pipeline;passes;passMap;constructor(t){this.pipeline=new um(t);const r=new mm(t),n=new dm;n.kernelRadius=2,n.sigmaSpatial=2,n.sigmaRange=.1;const s=new fm(t,n),o=new vm;o.kernelRadius=1,o.directionBias=0,o.edgeGain=1,o.minEdge=0;const a=new xm(t,o),i=new Em;i.threshold=.15;const u=new bm(t,i),l=new Rm;l.enabled=!0;const c=new gm(t,l),h=new Am;h.threshold=.12,h.rayCount=64,h.angleThreshold=.35,h.distanceThreshold=.5;const f=new Tm(t,h);this.passes=[{id:"rec709-luma",label:"Rec709 Luma",required:!0,pass:r},{id:"bilateral",label:"Bilateral",required:!1,pass:s},{id:"sobel",label:"Sobel",required:!1,pass:a},{id:"magnatude-gate",label:"Magnitude Gate",required:!1,pass:u},{id:"temporal",label:"Temporal Median",required:!1,pass:c},{id:"ray-box",label:"Ray Box",required:!1,pass:f}],this.passMap=new Map(this.passes.map(d=>[d.id,d]));for(const d of this.passes)this.pipeline.addPass(d.pass)}getPass(t){return this.passMap.get(t)?.pass}}class Wt{constructor(t){this.mediaStreamTrack=t,this.imageCapture=new ImageCapture(t)}static _imageCaptureContexts=new Map;static _initialized=!1;static get imageCaptureContexts(){if(!Wt._initialized)throw new Error("ImageCaptureContext not initialized. Call ImageCaptureContext.initialize() first.");return Wt._imageCaptureContexts}imageCapture;static async initialize(){await this.refreshVideoTracks(),this._initialized=!0}static async refreshVideoTracks(){await navigator.mediaDevices.getUserMedia({video:!0});const r=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),n=new Set;for(const s of r){const a=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:s.deviceId}}})).getVideoTracks()[0];n.add(a.id),this._imageCaptureContexts.has(a.id)||this._imageCaptureContexts.set(a.id,new Wt(a))}for(const[s]of this._imageCaptureContexts)n.has(s)||this._imageCaptureContexts.delete(s)}}var Fm=re('<button type="button" role="tab"> </button>'),Pm=re('<div class="passBar" role="tablist" aria-label="Pipeline passes"></div>');function wm(e,t){Se(t,!1);let r=$(t,"passes",24,()=>[]),n=$(t,"selectedPassId",8);const s=vs();Ke();var o=Pm();Jn(o,5,r,a=>a.id,(a,i)=>{var u=Fm();let l;var c=U(u);Ue(()=>{l=fc(u,1,"passButton",null,l,{passButtonActive:n()===v(i).id}),Or(u,"aria-selected",(ba(n()),v(i),Xe(()=>n()===v(i).id))),it(c,(v(i),Xe(()=>v(i).label)))}),_s("click",u,()=>s("select",{passId:v(i).id})),O(a,u)}),O(e,o),Te()}var Cm=re('<label class="setting"><div class="settingLabel"> </div> <div class="settingControl sliderControl svelte-2wv2v5"><div class="sliderShell svelte-2wv2v5"><div class="sliderTrack svelte-2wv2v5"><input class="sliderInput svelte-2wv2v5" type="range"/></div> <div class="settingValue svelte-2wv2v5"> </div></div></div></label>');function be(e,t){Se(t,!1);let r=$(t,"label",8),n=$(t,"min",8),s=$(t,"max",8),o=$(t,"step",8),a=$(t,"value",8);const i=vs();Ke();var u=Cm(),l=U(u),c=U(l),h=z(l,2),f=U(h),d=U(f),m=U(d),x=z(d,2),_=U(x);Ue(()=>{it(c,r()),Or(m,"min",n()),Or(m,"max",s()),Or(m,"step",o()),_c(m,a()),it(_,a())}),_s("input",m,p=>i("input",{value:Number(p.currentTarget.value)})),O(e,u),Te()}var Bm=re('<label class="setting toggleSetting"><div class="settingLabel"> </div> <div class="settingControl"><input type="checkbox"/></div></label>');function Cr(e,t){Se(t,!1);let r=$(t,"label",8),n=$(t,"checked",8);const s=vs();Ke();var o=Bm(),a=U(o),i=U(a),u=z(a,2),l=U(u);Ue(()=>{it(i,r()),xc(l,n())}),_s("change",l,c=>s("change",{checked:c.currentTarget.checked})),O(e,o),Te()}var Im=re('<div class="settings"><!> <!> <!> <!></div>');function Dm(e,t){Se(t,!1);let r=$(t,"frontSettings",12),n=$(t,"rearSettings",12),s=$(t,"required",8,!1),o=k(r().enabled),a=k(r().kernelRadius),i=k(r().sigmaSpatial),u=k(r().sigmaRange);function l(b){w(o,b),r(r().enabled=b,!0),n()&&n(n().enabled=b,!0)}function c(b){w(a,b),r(r().kernelRadius=b,!0),n()&&n(n().kernelRadius=b,!0)}function h(b){w(i,b),r(r().sigmaSpatial=b,!0),n()&&n(n().sigmaSpatial=b,!0)}function f(b){w(u,b),r(r().sigmaRange=b,!0),n()&&n(n().sigmaRange=b,!0)}Ke();var d=Im(),m=U(d);{var x=b=>{Cr(b,{label:"Enabled",get checked(){return v(o)},$$events:{change:S=>l(S.detail.checked)}})};de(m,b=>{s()||b(x)})}var _=z(m,2);be(_,{label:"Kernel Radius",min:1,max:5,step:1,get value(){return v(a)},$$events:{input:b=>c(b.detail.value)}});var p=z(_,2);be(p,{label:"Sigma Spatial",min:.5,max:10,step:.25,get value(){return v(i)},$$events:{input:b=>h(b.detail.value)}});var g=z(p,2);be(g,{label:"Sigma Range",min:.01,max:.5,step:.01,get value(){return v(u)},$$events:{input:b=>f(b.detail.value)}}),O(e,d),Te()}var Mm=re('<div class="settings"><div class="settingsEmpty">Rec709 is required and has no settings.</div></div>');function Nm(e){var t=Mm();O(e,t)}var km=re('<div class="settings"><!> <!> <!> <!> <!></div>');function Gm(e,t){Se(t,!1);let r=$(t,"frontSettings",12),n=$(t,"rearSettings",12),s=$(t,"required",8,!1),o=k(r().enabled),a=k(r().kernelRadius),i=k(r().directionBias),u=k(r().edgeGain),l=k(r().minEdge);function c(E){w(o,E),r(r().enabled=E,!0),n()&&n(n().enabled=E,!0)}function h(E){w(a,E),r(r().kernelRadius=E,!0),n()&&n(n().kernelRadius=E,!0)}function f(E){w(i,E),r(r().directionBias=E,!0),n()&&n(n().directionBias=E,!0)}function d(E){w(u,E),r(r().edgeGain=E,!0),n()&&n(n().edgeGain=E,!0)}function m(E){w(l,E),r(r().minEdge=E,!0),n()&&n(n().minEdge=E,!0)}Ke();var x=km(),_=U(x);{var p=E=>{Cr(E,{label:"Enabled",get checked(){return v(o)},$$events:{change:y=>c(y.detail.checked)}})};de(_,E=>{s()||E(p)})}var g=z(_,2);be(g,{label:"Kernel Radius",min:1,max:2,step:1,get value(){return v(a)},$$events:{input:E=>h(E.detail.value)}});var b=z(g,2);be(b,{label:"Direction Bias",min:-1,max:1,step:.1,get value(){return v(i)},$$events:{input:E=>f(E.detail.value)}});var S=z(b,2);be(S,{label:"Edge Gain",min:0,max:8,step:.1,get value(){return v(u)},$$events:{input:E=>d(E.detail.value)}});var R=z(S,2);be(R,{label:"Min Edge",min:0,max:1,step:.01,get value(){return v(l)},$$events:{input:E=>m(E.detail.value)}}),O(e,x),Te()}var Lm=re('<div class="settings"><!> <!></div>');function Um(e,t){Se(t,!1);let r=$(t,"frontSettings",12),n=$(t,"rearSettings",12),s=$(t,"required",8,!1),o=k(r().enabled),a=k(r().threshold);function i(d){w(o,d),r(r().enabled=d,!0),n()&&n(n().enabled=d,!0)}function u(d){w(a,d),r(r().threshold=d,!0),n()&&n(n().threshold=d,!0)}Ke();var l=Lm(),c=U(l);{var h=d=>{Cr(d,{label:"Enabled",get checked(){return v(o)},$$events:{change:m=>i(m.detail.checked)}})};de(c,d=>{s()||d(h)})}var f=z(c,2);be(f,{label:"Threshold",min:0,max:.5,step:.005,get value(){return v(a)},$$events:{input:d=>u(d.detail.value)}}),O(e,l),Te()}var Om=re('<div class="settings"><!> <div class="settingsEmpty">Uses last 4 frames (median). No tunable parameters.</div></div>');function Vm(e,t){Se(t,!1);let r=$(t,"frontSettings",12),n=$(t,"rearSettings",12),s=$(t,"required",8,!1),o=k(r().enabled);function a(c){w(o,c),r(r().enabled=c,!0),n()&&n(n().enabled=c,!0)}Ke();var i=Om(),u=U(i);{var l=c=>{Cr(c,{label:"Enabled",get checked(){return v(o)},$$events:{change:h=>a(h.detail.checked)}})};de(u,c=>{s()||c(l)})}O(e,i),Te()}var zm=re('<div class="settings"><!> <!> <!> <!> <!></div>');function Hm(e,t){Se(t,!1);let r=$(t,"frontSettings",8),n=$(t,"rearSettings",8),s=$(t,"required",8,!1),o=k(r().enabled),a=k(r().threshold),i=k(r().rayCount),u=k(r().step),l=k(r().trimFraction);function c(y,T){y(r(),T),n()&&y(n(),T)}function h(y){w(o,y),c((T,A)=>T.enabled=A,y)}function f(y){w(a,y),c((T,A)=>T.threshold=A,y)}function d(y){w(i,y),c((T,A)=>T.rayCount=A,y)}function m(y){w(u,y),c((T,A)=>T.step=A,y)}function x(y){w(l,y),c((T,A)=>T.trimFraction=A,y)}Ke();var _=zm(),p=U(_);{var g=y=>{Cr(y,{label:"Enabled",get checked(){return v(o)},$$events:{change:T=>h(T.detail.checked)}})};de(p,y=>{s()||y(g)})}var b=z(p,2);be(b,{label:"Threshold",min:0,max:.5,step:.005,get value(){return v(a)},$$events:{input:y=>f(y.detail.value)}});var S=z(b,2);be(S,{label:"Ray Count",min:32,max:256,step:8,get value(){return v(i)},$$events:{input:y=>d(Math.round(y.detail.value))}});var R=z(S,2);be(R,{label:"Step (px)",min:.25,max:5,step:.25,get value(){return v(u)},$$events:{input:y=>m(y.detail.value)}});var E=z(R,2);be(E,{label:"Trim Fraction",min:0,max:.4,step:.01,get value(){return v(l)},$$events:{input:y=>x(y.detail.value)}}),O(e,_),Te()}var Xm=re('<div class="fpsBadge svelte-1dp3x29" aria-label="Frames per second"> </div>');function $m(e,t){Se(t,!1);let r=k(0),n=0,s=performance.now();function o(){const l=performance.now();n+=1;const c=l-s;c>=500&&(w(r,Math.round(n*1e3/c)),n=0,s=l)}var a={measure:o},i=Xm(),u=U(i);return Ue(()=>it(u,`${v(r)??""} fps`)),O(e,i),pc(t,"measure",o),Te(a)}var qm=re("<option> </option>"),Km=re("<option> </option>"),Ym=re('<div class="errorBanner svelte-1n46o8q" role="alert"> </div>'),Wm=re('<main class="app svelte-1n46o8q"><section class="controls svelte-1n46o8q"><!> <!></section> <section class="views svelte-1n46o8q"><div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Front</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div> <div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Rear</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div></section> <!> <!></main>');function jm(e,t){Se(t,!1);const r={"rec709-luma":Nm,bilateral:Dm,sobel:Gm,"magnatude-gate":Um,temporal:Vm,"ray-box":Hm};let n=k(""),s=new Map,o=k([]),a=k(""),i=k(""),u=k(null),l=k(null),c=k(null),h=k(null),f=k([]),d=k(null),m=!1,x=!1,_=k(null);function p(){w(o,Array.from(s.entries()).map(([F,P])=>({id:F,label:`${P.mediaStreamTrack.label||"Camera"} (${F})`})))}async function g(){await Wt.initialize(),s=Wt.imageCaptureContexts,p(),!v(a)&&v(o)[0]&&w(a,v(o)[0].id),!v(i)&&v(o)[1]&&w(i,v(o)[1].id),!v(i)&&v(o)[0]&&w(i,v(o)[0].id)}function b(F,P){const L=P?.getPass(F);return L?L.settings:null}async function S(F,P){if(!F||!P)return;const L=s.get(P);if(!L)return;const N=await L.imageCapture.grabFrame();try{await F.pipeline.render(N)}finally{N.close()}}async function R(){if(m){if(x){v(_)?.measure(),requestAnimationFrame(()=>{R()});return}x=!0;try{v(_)?.measure(),await S(v(c),v(a)),await S(v(h),v(i)),w(d,null)}catch(F){w(d,F instanceof Error?F.message:String(F))}finally{x=!1,requestAnimationFrame(()=>{R()})}}}Ra(async()=>{try{await g();const F=v(u)?.getContext("webgl2"),P=v(l)?.getContext("webgl2");if(!F||!P){w(d,"WebGL2 not available for one or both canvases.");return}w(c,new Li(F)),w(h,new Li(P)),w(f,v(c).passes),w(n,v(f)[0]?.id??""),m=!0,R()}catch(F){w(d,F instanceof Error?F.message:String(F))}}),Ec(()=>{m=!1}),Ke();var E=Wm(),y=U(E),T=U(y);{let F=tt(()=>v(f).map(P=>({id:P.id,label:P.label})));wm(T,{get passes(){return v(F)},get selectedPassId(){return v(n)},$$events:{select:P=>w(n,P.detail.passId)}})}var A=z(T,2);{var C=F=>{const P=tt(()=>v(f).find(ir=>ir.id===v(n))),L=tt(()=>v(P)?r[v(P).id]:null),N=tt(()=>v(P)?b(v(P).id,v(c)):null),Ee=tt(()=>v(P)?b(v(P).id,v(h)):null);var Qs=_e(),Ou=me(Qs);{var Vu=ir=>{var Zs=_e(),zu=me(Zs);{var Hu=Dt=>{var ar=_e(),Rn=me(ar);Ut(Rn,()=>v(L),(Sn,Tn)=>{Tn(Sn,{get required(){return v(P).required},get frontSettings(){return v(N)},get rearSettings(){return v(Ee)}})}),O(Dt,ar)},Xu=Dt=>{var ar=_e(),Rn=me(ar);{var Sn=Mt=>{var ur=_e(),An=me(ur);Ut(An,()=>v(L),(Fn,Pn)=>{Pn(Fn,{get required(){return v(P).required},get frontSettings(){return v(N)},get rearSettings(){return v(Ee)}})}),O(Mt,ur)},Tn=Mt=>{var ur=_e(),An=me(ur);{var Fn=Nt=>{var lr=_e(),wn=me(lr);Ut(wn,()=>v(L),(Cn,Bn)=>{Bn(Cn,{get required(){return v(P).required},get frontSettings(){return v(N)},get rearSettings(){return v(Ee)}})}),O(Nt,lr)},Pn=Nt=>{var lr=_e(),wn=me(lr);{var Cn=kt=>{var cr=_e(),In=me(cr);Ut(In,()=>v(L),(Dn,Mn)=>{Mn(Dn,{get required(){return v(P).required},get frontSettings(){return v(N)},get rearSettings(){return v(Ee)}})}),O(kt,cr)},Bn=kt=>{var cr=_e(),In=me(cr);{var Dn=Gt=>{var fr=_e(),Nn=me(fr);Ut(Nn,()=>v(L),(kn,Gn)=>{Gn(kn,{get required(){return v(P).required},get frontSettings(){return v(N)},get rearSettings(){return v(Ee)}})}),O(Gt,fr)},Mn=Gt=>{var fr=_e(),Nn=me(fr);Ut(Nn,()=>v(L),(kn,Gn)=>{Gn(kn,{})}),O(Gt,fr)};de(In,Gt=>{v(P).id==="ray-box"?Gt(Dn):Gt(Mn,!1)},!0)}O(kt,cr)};de(wn,kt=>{v(P).id==="temporal"?kt(Cn):kt(Bn,!1)},!0)}O(Nt,lr)};de(An,Nt=>{v(P).id==="magnatude-gate"?Nt(Fn):Nt(Pn,!1)},!0)}O(Mt,ur)};de(Rn,Mt=>{v(P).id==="sobel"?Mt(Sn):Mt(Tn,!1)},!0)}O(Dt,ar)};de(zu,Dt=>{v(P).id==="bilateral"?Dt(Hu):Dt(Xu,!1)})}O(ir,Zs)};de(Ou,ir=>{v(P)&&v(L)&&v(N)&&ir(Vu)})}O(F,Qs)};de(A,F=>{v(n)&&F(C)})}var M=z(y,2),ee=U(M),Y=U(ee),le=z(U(Y),2);Ue(()=>{v(a),oo(()=>{v(o)})});var ce=U(le);ce.value=ce.__value="";var Ye=z(ce);Jn(Ye,1,()=>v(o),F=>F.id,(F,P)=>{var L=qm(),N=U(L),Ee={};Ue(()=>{it(N,v(P).id),Ee!==(Ee=v(P).id)&&(L.value=(L.__value=v(P).id)??"")}),O(F,L)});var We=z(Y,2);Ln(We,F=>w(u,F),()=>v(u));var je=z(ee,2),Ge=U(je),ht=z(U(Ge),2);Ue(()=>{v(i),oo(()=>{v(o)})});var Qe=U(ht);Qe.value=Qe.__value="";var Ct=z(Qe);Jn(Ct,1,()=>v(o),F=>F.id,(F,P)=>{var L=Km(),N=U(L),Ee={};Ue(()=>{it(N,v(P).id),Ee!==(Ee=v(P).id)&&(L.value=(L.__value=v(P).id)??"")}),O(F,L)});var Bt=z(Ge,2);Ln(Bt,F=>w(l,F),()=>v(l));var mt=z(M,2);{var It=F=>{var P=Ym(),L=U(P);Ue(()=>it(L,v(d))),O(F,P)};de(mt,F=>{v(d)&&F(It)})}var Br=z(mt,2);Ln($m(Br,{$$legacy:!0}),F=>w(_,F),()=>v(_)),ho(le,()=>v(a),F=>w(a,F)),ho(ht,()=>v(i),F=>w(i,F)),O(e,E),Te()}sc(jm,{target:document.getElementById("app")});
