(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const ds=!1;var _r=Array.isArray,yu=Array.prototype.indexOf,vr=Array.from,gu=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,ha=Object.getOwnPropertyDescriptors,Su=Object.prototype,Ru=Array.prototype,Is=Object.getPrototypeOf,Ao=Object.isExtensible;function Tu(e){return typeof e=="function"}const Pn=()=>{};function Au(e){return e()}function hs(e){for(var t=0;t<e.length;t++)e[t]()}function ma(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const ee=2,Cs=4,pr=8,Fu=1<<24,Oe=16,et=32,Dt=64,xr=128,Te=512,Q=1024,he=2048,Ae=4096,ve=8192,je=16384,br=32768,ft=65536,Fo=1<<17,_a=1<<18,dn=1<<19,va=1<<20,We=1<<25,Pt=32768,ms=1<<21,Bs=1<<22,it=1<<23,Ze=Symbol("$state"),wu=Symbol("legacy props"),Pu=Symbol(""),tn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ds(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Iu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Cu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Bu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Du(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Mu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nu(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ku(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Lu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Uu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ou(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Gu=1,Vu=2,pa=4,Hu=8,zu=16,Xu=1,$u=2,qu=4,Yu=8,Ku=16,Wu=4,ju=2,re=Symbol(),Zu="http://www.w3.org/1999/xhtml";function Qu(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ju(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function xa(e){return e===this.v}function ec(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ba(e){return!ec(e,this.v)}let hn=!1,tc=!1;function nc(){hn=!0}let $=null;function ln(e){$=e}function pe(e,t=!1,n){$={p:$,i:!1,c:null,e:null,s:e,x:null,l:hn&&!t?{s:null,u:null,$:[]}:null}}function xe(e){var t=$,n=t.e;if(n!==null){t.e=null;for(var r of n)Ba(r)}return e!==void 0&&(t.x=e),t.i=!0,$=t.p,e??{}}function Hn(){return!hn||$!==null&&$.l===null}let nn=[];function rc(){var e=nn;nn=[],hs(e)}function Mt(e){if(nn.length===0){var t=nn;queueMicrotask(()=>{t===nn&&rc()})}nn.push(e)}function Ea(e){var t=G;if(t===null)return L.f|=it,e;if((t.f&br)===0){if((t.f&xr)===0)throw e;t.b.error(e)}else un(e,t)}function un(e,t){for(;t!==null;){if((t.f&xr)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Yn=new Set;let z=null,tr=null,ge=null,Ce=[],Ms=null,_s=!1;class Be{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#o=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Ce=[],tr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#a(n.effects),this.#a(n.render_effects)):(tr=this,z=null,wo(n.render_effects),wo(n.effects),tr=null,this.#l?.resolve()),ge=null}#i(t,n){t.f^=Q;for(var r=t.first;r!==null;){var s=r.f,o=(s&(et|Dt))!==0,a=o&&(s&Q)!==0,i=a||(s&ve)!==0||this.skipped_effects.has(r);if((r.f&xr)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!i&&r.fn!==null){o?r.f^=Q:(s&Cs)!==0?n.effects.push(r):_n(r)&&((r.f&Oe)!==0&&this.#o.add(r),cn(r));var l=r.first;if(l!==null){r=l;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#a(n.effects),this.#a(n.render_effects),n=n.parent),r=u.next,u=u.parent}}#a(t){for(const n of t)(n.f&he)!==0?this.#o.add(n):(n.f&Ae)!==0&&this.#s.add(n),this.#u(n.deps),J(n,Q)}#u(t){if(t!==null)for(const n of t)(n.f&ee)===0||(n.f&Pt)===0||(n.f^=Pt,this.#u(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&it)===0&&(this.current.set(t,t.v),ge?.set(t,t.v))}activate(){z=this,this.apply()}deactivate(){z===this&&(z=null,ge=null)}flush(){if(this.activate(),Ce.length>0){if(sc(),z!==null&&z!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Yn.size>1){this.previous.clear();var t=ge,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const o of Yn){if(o===this){n=!1;continue}const a=[];for(const[l,u]of this.current){if(o.current.has(l))if(n&&u!==o.current.get(l))o.current.set(l,u);else continue;a.push(l)}if(a.length===0)continue;const i=[...o.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){var s=Ce;Ce=[];const l=new Set,u=new Map;for(const f of a)ya(f,i,l,u);if(Ce.length>0){z=o,o.apply();for(const f of Ce)o.#i(f,r);o.deactivate()}Ce=s}}z=null,ge=t}this.committed=!0,Yn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#o)this.#s.delete(t),J(t,he),It(t);for(const t of this.#s)J(t,Ae),It(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ma()).promise}static ensure(){if(z===null){const t=z=new Be;Yn.add(z),Be.enqueue(()=>{z===t&&t.flush()})}return z}static enqueue(t){Mt(t)}apply(){}}function sc(){var e=Ft;_s=!0;var t=null;try{var n=0;for(ar(!0);Ce.length>0;){var r=Be.ensure();if(n++>1e3){var s,o;oc()}r.process(Ce),at.clear()}}finally{_s=!1,ar(e),Ms=null}}function oc(){try{Mu()}catch(e){un(e,Ms)}}let Ye=null;function wo(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(je|ve))===0&&_n(r)&&(Ye=new Set,cn(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Na(r):r.fn=null),Ye?.size>0)){at.clear();for(const s of Ye){if((s.f&(je|ve))!==0)continue;const o=[s];let a=s.parent;for(;a!==null;)Ye.has(a)&&(Ye.delete(a),o.push(a)),a=a.parent;for(let i=o.length-1;i>=0;i--){const l=o[i];(l.f&(je|ve))===0&&cn(l)}}Ye.clear()}}Ye=null}}function ya(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&ee)!==0?ya(s,t,n,r):(o&(Bs|Oe))!==0&&(o&he)===0&&ga(s,t,r)&&(J(s,he),It(s))}}function ga(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&ee)!==0&&ga(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function It(e){for(var t=Ms=e;t.parent!==null;){t=t.parent;var n=t.f;if(_s&&t===G&&(n&Oe)!==0&&(n&_a)===0)return;if((n&(Dt|et))!==0){if((n&Q)===0)return;t.f^=Q}}Ce.push(t)}function ic(e){let t=0,n=Ct(0),r;return()=>{Ln()&&(p(n),gr(()=>(t===0&&(r=Fe(()=>e(()=>Nn(n)))),t+=1,()=>{Mt(()=>{t-=1,t===0&&(r?.(),r=void 0,Nn(n))})})))}}var ac=ft|dn|xr;function lc(e,t,n){new uc(e,t,n)}class uc{parent;#e=!1;#t;#r=null;#n;#l;#o;#s=null;#i=null;#a=null;#u=null;#c=null;#f=0;#d=0;#m=!1;#h=null;#b=ic(()=>(this.#h=Ct(this.#f),()=>{this.#h=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=G.b,this.#e=!!this.#n.pending,this.#o=Sr(()=>{G.b=this;{var s=this.#p();try{this.#s=ye(()=>r(s))}catch(o){this.error(o)}this.#d>0?this.#v():this.#e=!1}return()=>{this.#c?.remove()}},ac)}#E(){try{this.#s=ye(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#n.pending;t&&(this.#i=ye(()=>t(this.#t)),Be.enqueue(()=>{var n=this.#p();this.#s=this.#_(()=>(Be.ensure(),ye(()=>this.#l(n)))),this.#d>0?this.#v():(At(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#p(){var t=this.#t;return this.#e&&(this.#c=lt(),this.#t.before(this.#c),t=this.#c),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var n=G,r=L,s=$;Ne(this.#o),fe(this.#o),ln(this.#o.ctx);try{return t()}catch(o){return Ea(o),null}finally{Ne(n),fe(r),ln(s)}}#v(){const t=this.#n.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),Ua(this.#s,this.#u)),this.#i===null&&(this.#i=ye(()=>t(this.#t)))}#x(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&At(this.#i,()=>{this.#i=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(t){this.#x(t),this.#f+=t,this.#h&&Bt(this.#h,this.#f)}get_effect_pending(){return this.#b(),p(this.#h)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#m||!n&&!r)throw t;this.#s&&(de(this.#s),this.#s=null),this.#i&&(de(this.#i),this.#i=null),this.#a&&(de(this.#a),this.#a=null);var s=!1,o=!1;const a=()=>{if(s){Ju();return}s=!0,o&&Ou(),Be.ensure(),this.#f=0,this.#a!==null&&At(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#s=this.#_(()=>(this.#m=!1,ye(()=>this.#l(this.#t)))),this.#d>0?this.#v():this.#e=!1};var i=L;try{fe(null),o=!0,n?.(t,a),o=!1}catch(l){un(l,this.#o&&this.#o.parent)}finally{fe(i)}r&&Mt(()=>{this.#a=this.#_(()=>{Be.ensure(),this.#m=!0;try{return ye(()=>{r(this.#t,()=>t,()=>a)})}catch(l){return un(l,this.#o.parent),null}finally{this.#m=!1}})})}}function cc(e,t,n,r){const s=Hn()?Er:st;if(n.length===0&&e.length===0){r(t.map(s));return}var o=z,a=G,i=fc();function l(){Promise.all(n.map(u=>dc(u))).then(u=>{i();try{r([...t.map(s),...u])}catch(f){(a.f&je)===0&&un(f,a)}o?.deactivate(),ir()}).catch(u=>{un(u,a)})}e.length>0?Promise.all(e).then(()=>{i();try{return l()}finally{o?.deactivate(),ir()}}):l()}function fc(){var e=G,t=L,n=$,r=z;return function(o=!0){Ne(e),fe(t),ln(n),o&&r?.activate()}}function ir(){Ne(null),fe(null),ln(null)}function Er(e){var t=ee|he,n=L!==null&&(L.f&ee)!==0?L:null;return G!==null&&(G.f|=dn),{ctx:$,deps:null,effects:null,equals:xa,f:t,fn:e,reactions:null,rv:0,v:re,wv:0,parent:n??G,ac:null}}function dc(e,t){let n=G;n===null&&Iu();var r=n.b,s=void 0,o=Ct(re),a=!L,i=new Map;return Sc(()=>{var l=ma();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{u===z&&u.committed&&u.deactivate(),ir()})}catch(c){l.reject(c),ir()}var u=z;if(a){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),i.get(u)?.reject(tn),i.delete(u),i.set(u,l)}const h=(c,d=void 0)=>{if(u.activate(),d)d!==tn&&(o.f|=it,Bt(o,d));else{(o.f&it)!==0&&(o.f^=it),Bt(o,c);for(const[m,_]of i){if(i.delete(m),m===u)break;_.reject(tn)}}a&&(r.update_pending_count(-1),u.decrement(f))};l.promise.then(h,c=>h(null,c||"unknown"))}),yr(()=>{for(const l of i.values())l.reject(tn)}),new Promise(l=>{function u(f){function h(){f===s?l(o):u(s)}f.then(h,h)}u(s)})}function st(e){const t=Er(e);return t.equals=ba,t}function Sa(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)de(t[n])}}function hc(e){for(var t=e.parent;t!==null;){if((t.f&ee)===0)return(t.f&je)===0?t:null;t=t.parent}return null}function Ns(e){var t,n=G;Ne(hc(e));try{e.f&=~Pt,Sa(e),t=Ha(e)}finally{Ne(n)}return t}function Ra(e){var t=Ns(e);if(e.equals(t)||(z?.is_fork||(e.v=t),e.wv=Ga()),!Lt)if(ge!==null)(Ln()||z?.is_fork)&&ge.set(e,t);else{var n=(e.f&Te)===0?Ae:Q;J(e,n)}}let vs=new Set;const at=new Map;let Ta=!1;function Ct(e,t){var n={f:0,v:e,reactions:null,equals:xa,rv:0,wv:0};return n}function tt(e,t){const n=Ct(e);return Fc(n),n}function N(e,t=!1,n=!0){const r=Ct(e);return t||(r.equals=ba),hn&&n&&$!==null&&$.l!==null&&($.l.s??=[]).push(r),r}function R(e,t,n=!1){L!==null&&(!De||(L.f&Fo)!==0)&&Hn()&&(L.f&(ee|Oe|Bs|Fo))!==0&&!Qe?.includes(e)&&Uu();let r=n?rn(t):t;return Bt(e,r)}function Bt(e,t){if(!e.equals(t)){var n=e.v;Lt?at.set(e,t):at.set(e,n),e.v=t;var r=Be.ensure();r.capture(e,n),(e.f&ee)!==0&&((e.f&he)!==0&&Ns(e),J(e,(e.f&Te)!==0?Q:Ae)),e.wv=Ga(),Aa(e,he),Hn()&&G!==null&&(G.f&Q)!==0&&(G.f&(et|Dt))===0&&(Ee===null?wc([e]):Ee.push(e)),!r.is_fork&&vs.size>0&&!Ta&&mc()}return t}function mc(){Ta=!1;var e=Ft;ar(!0);const t=Array.from(vs);try{for(const n of t)(n.f&Q)!==0&&J(n,Ae),_n(n)&&cn(n)}finally{ar(e)}vs.clear()}function Nn(e){R(e,e.v+1)}function Aa(e,t){var n=e.reactions;if(n!==null)for(var r=Hn(),s=n.length,o=0;o<s;o++){var a=n[o],i=a.f;if(!(!r&&a===G)){var l=(i&he)===0;if(l&&J(a,t),(i&ee)!==0){var u=a;ge?.delete(u),(i&Pt)===0&&(i&Te&&(a.f|=Pt),Aa(u,Ae))}else l&&((i&Oe)!==0&&Ye!==null&&Ye.add(a),It(a))}}}function rn(e){if(typeof e!="object"||e===null||Ze in e)return e;const t=Is(e);if(t!==Su&&t!==Ru)return e;var n=new Map,r=_r(e),s=tt(0),o=wt,a=i=>{if(wt===o)return i();var l=L,u=wt;fe(null),Mo(o);var f=i();return fe(l),Mo(u),f};return r&&n.set("length",tt(e.length)),new Proxy(e,{defineProperty(i,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ku();var f=n.get(l);return f===void 0?f=a(()=>{var h=tt(u.value);return n.set(l,h),h}):R(f,u.value,!0),!0},deleteProperty(i,l){var u=n.get(l);if(u===void 0){if(l in i){const f=a(()=>tt(re));n.set(l,f),Nn(s)}}else R(u,re),Nn(s);return!0},get(i,l,u){if(l===Ze)return e;var f=n.get(l),h=l in i;if(f===void 0&&(!h||Tt(i,l)?.writable)&&(f=a(()=>{var d=rn(h?i[l]:re),m=tt(d);return m}),n.set(l,f)),f!==void 0){var c=p(f);return c===re?void 0:c}return Reflect.get(i,l,u)},getOwnPropertyDescriptor(i,l){var u=Reflect.getOwnPropertyDescriptor(i,l);if(u&&"value"in u){var f=n.get(l);f&&(u.value=p(f))}else if(u===void 0){var h=n.get(l),c=h?.v;if(h!==void 0&&c!==re)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(i,l){if(l===Ze)return!0;var u=n.get(l),f=u!==void 0&&u.v!==re||Reflect.has(i,l);if(u!==void 0||G!==null&&(!f||Tt(i,l)?.writable)){u===void 0&&(u=a(()=>{var c=f?rn(i[l]):re,d=tt(c);return d}),n.set(l,u));var h=p(u);if(h===re)return!1}return f},set(i,l,u,f){var h=n.get(l),c=l in i;if(r&&l==="length")for(var d=u;d<h.v;d+=1){var m=n.get(d+"");m!==void 0?R(m,re):d in i&&(m=a(()=>tt(re)),n.set(d+"",m))}if(h===void 0)(!c||Tt(i,l)?.writable)&&(h=a(()=>tt(void 0)),R(h,rn(u)),n.set(l,h));else{c=h.v!==re;var _=a(()=>rn(u));R(h,_)}var v=Reflect.getOwnPropertyDescriptor(i,l);if(v?.set&&v.set.call(f,u),!c){if(r&&typeof l=="string"){var x=n.get("length"),y=Number(l);Number.isInteger(y)&&y>=x.v&&R(x,y+1)}Nn(s)}return!0},ownKeys(i){p(s);var l=Reflect.ownKeys(i).filter(h=>{var c=n.get(h);return c===void 0||c.v!==re});for(var[u,f]of n)f.v!==re&&!(u in i)&&l.push(u);return l},setPrototypeOf(){Lu()}})}function Po(e){try{if(e!==null&&typeof e=="object"&&Ze in e)return e[Ze]}catch{}return e}function _c(e,t){return Object.is(Po(e),Po(t))}var Io,Fa,wa,Pa;function vc(){if(Io===void 0){Io=window,Fa=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;wa=Tt(t,"firstChild").get,Pa=Tt(t,"nextSibling").get,Ao(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ao(n)&&(n.__t=void 0)}}function lt(e=""){return document.createTextNode(e)}function ks(e){return wa.call(e)}function zn(e){return Pa.call(e)}function O(e,t){return ks(e)}function ie(e,t=!1){{var n=ks(e);return n instanceof Comment&&n.data===""?zn(n):n}}function V(e,t=1,n=!1){let r=e;for(;t--;)r=zn(r);return r}function pc(e){e.textContent=""}function Ia(){return!1}let Co=!1;function xc(){Co||(Co=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function mn(e){var t=L,n=G;fe(null),Ne(null);try{return e()}finally{fe(t),Ne(n)}}function bc(e,t,n,r=n){e.addEventListener(t,()=>mn(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),xc()}function Ca(e){G===null&&(L===null&&Du(),Bu()),Lt&&Cu()}function Ec(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ge(e,t,n){var r=G;r!==null&&(r.f&ve)!==0&&(e|=ve);var s={ctx:$,deps:null,nodes:null,f:e|he|Te,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{cn(s),s.f|=br}catch(i){throw de(s),i}else t!==null&&It(s);var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&dn)===0&&(o=o.first,(e&Oe)!==0&&(e&ft)!==0&&o!==null&&(o.f|=ft)),o!==null&&(o.parent=r,r!==null&&Ec(o,r),L!==null&&(L.f&ee)!==0&&(e&Dt)===0)){var a=L;(a.effects??=[]).push(o)}return s}function Ln(){return L!==null&&!De}function yr(e){const t=Ge(pr,null,!1);return J(t,Q),t.teardown=e,t}function ps(e){Ca();var t=G.f,n=!L&&(t&et)!==0&&(t&br)===0;if(n){var r=$;(r.e??=[]).push(e)}else return Ba(e)}function Ba(e){return Ge(Cs|va,e,!1)}function yc(e){return Ca(),Ge(pr|va,e,!0)}function gc(e){Be.ensure();const t=Ge(Dt|dn,e,!0);return(n={})=>new Promise(r=>{n.outro?At(t,()=>{de(t),r(void 0)}):(de(t),r(void 0))})}function Ls(e){return Ge(Cs,e,!1)}function Nt(e,t){var n=$,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=gr(()=>{e(),!r.ran&&(r.ran=!0,Fe(t))})}function kt(){var e=$;gr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&Q)!==0&&J(n,Ae),_n(n)&&cn(n),t.ran=!1}})}function Sc(e){return Ge(Bs|dn,e,!0)}function gr(e,t=0){return Ge(pr|t,e,!0)}function Re(e,t=[],n=[],r=[]){cc(r,t,n,s=>{Ge(pr,()=>e(...s.map(p)),!0)})}function Sr(e,t=0){var n=Ge(Oe|t,e,!0);return n}function ye(e){return Ge(et|dn,e,!0)}function Da(e){var t=e.teardown;if(t!==null){const n=Lt,r=L;Do(!0),fe(null);try{t.call(null)}finally{Do(n),fe(r)}}}function Ma(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&mn(()=>{s.abort(tn)});var r=n.next;(n.f&Dt)!==0?n.parent=null:de(n,t),n=r}}function Rc(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&et)===0&&de(t),t=n}}function de(e,t=!0){var n=!1;(t||(e.f&_a)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Tc(e.nodes.start,e.nodes.end),n=!0),Ma(e,t&&!n),lr(e,0),J(e,je);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Da(e);var s=e.parent;s!==null&&s.first!==null&&Na(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Tc(e,t){for(;e!==null;){var n=e===t?null:zn(e);e.remove(),e=n}}function Na(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function At(e,t,n=!0){var r=[];ka(e,r,!0);var s=()=>{n&&de(e),t&&t()},o=r.length;if(o>0){var a=()=>--o||s();for(var i of r)i.out(a)}else s()}function ka(e,t,n){if((e.f&ve)===0){e.f^=ve;var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)(i.is_global||n)&&t.push(i);for(var s=e.first;s!==null;){var o=s.next,a=(s.f&ft)!==0||(s.f&et)!==0&&(e.f&Oe)!==0;ka(s,t,a?n:!1),s=o}}}function Us(e){La(e,!0)}function La(e,t){if((e.f&ve)!==0){e.f^=ve,(e.f&Q)===0&&(J(e,he),It(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&ft)!==0||(n.f&et)!==0;La(n,s?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const a of o)(a.is_global||t)&&a.in()}}function Ua(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var s=n===r?null:zn(n);t.append(n),n=s}}let en=null;function Ac(e){var t=en;try{if(en=new Set,Fe(e),t!==null)for(var n of en)t.add(n);return en}finally{en=t}}function Bo(e){for(var t of Ac(e))Bt(t,t.v)}let Ft=!1;function ar(e){Ft=e}let Lt=!1;function Do(e){Lt=e}let L=null,De=!1;function fe(e){L=e}let G=null;function Ne(e){G=e}let Qe=null;function Fc(e){L!==null&&(Qe===null?Qe=[e]:Qe.push(e))}let le=null,_e=0,Ee=null;function wc(e){Ee=e}let Oa=1,Un=0,wt=Un;function Mo(e){wt=e}function Ga(){return++Oa}function _n(e){var t=e.f;if((t&he)!==0)return!0;if(t&ee&&(e.f&=~Pt),(t&Ae)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var o=n[s];if(_n(o)&&Ra(o),o.wv>e.wv)return!0}(t&Te)!==0&&ge===null&&J(e,Q)}return!1}function Va(e,t,n=!0){var r=e.reactions;if(r!==null&&!Qe?.includes(e))for(var s=0;s<r.length;s++){var o=r[s];(o.f&ee)!==0?Va(o,t,!1):t===o&&(n?J(o,he):(o.f&Q)!==0&&J(o,Ae),It(o))}}function Ha(e){var t=le,n=_e,r=Ee,s=L,o=Qe,a=$,i=De,l=wt,u=e.f;le=null,_e=0,Ee=null,L=(u&(et|Dt))===0?e:null,Qe=null,ln(e.ctx),De=!1,wt=++Un,e.ac!==null&&(mn(()=>{e.ac.abort(tn)}),e.ac=null);try{e.f|=ms;var f=e.fn,h=f(),c=e.deps;if(le!==null){var d;if(lr(e,_e),c!==null&&_e>0)for(c.length=_e+le.length,d=0;d<le.length;d++)c[_e+d]=le[d];else e.deps=c=le;if(Ln()&&(e.f&Te)!==0)for(d=_e;d<c.length;d++)(c[d].reactions??=[]).push(e)}else c!==null&&_e<c.length&&(lr(e,_e),c.length=_e);if(Hn()&&Ee!==null&&!De&&c!==null&&(e.f&(ee|Ae|he))===0)for(d=0;d<Ee.length;d++)Va(Ee[d],e);return s!==null&&s!==e&&(Un++,Ee!==null&&(r===null?r=Ee:r.push(...Ee))),(e.f&it)!==0&&(e.f^=it),h}catch(m){return Ea(m)}finally{e.f^=ms,le=t,_e=n,Ee=r,L=s,Qe=o,ln(a),De=i,wt=l}}function Pc(e,t){let n=t.reactions;if(n!==null){var r=yu.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&ee)!==0&&(le===null||!le.includes(t))&&(J(t,Ae),(t.f&Te)!==0&&(t.f^=Te,t.f&=~Pt),Sa(t),lr(t,0))}function lr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Pc(e,n[r])}function cn(e){var t=e.f;if((t&je)===0){J(e,Q);var n=G,r=Ft;G=e,Ft=!0;try{(t&(Oe|Fu))!==0?Rc(e):Ma(e),Da(e);var s=Ha(e);e.teardown=typeof s=="function"?s:null,e.wv=Oa;var o;ds&&tc&&(e.f&he)!==0&&e.deps}finally{Ft=r,G=n}}}function p(e){var t=e.f,n=(t&ee)!==0;if(en?.add(e),L!==null&&!De){var r=G!==null&&(G.f&je)!==0;if(!r&&!Qe?.includes(e)){var s=L.deps;if((L.f&ms)!==0)e.rv<Un&&(e.rv=Un,le===null&&s!==null&&s[_e]===e?_e++:le===null?le=[e]:le.includes(e)||le.push(e));else{(L.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[L]:o.includes(L)||o.push(L)}}}if(Lt){if(at.has(e))return at.get(e);if(n){var a=e,i=a.v;return((a.f&Q)===0&&a.reactions!==null||Xa(a))&&(i=Ns(a)),at.set(a,i),i}}else n&&(!ge?.has(e)||z?.is_fork&&!Ln())&&(a=e,_n(a)&&Ra(a),Ft&&Ln()&&(a.f&Te)===0&&za(a));if(ge?.has(e))return ge.get(e);if((e.f&it)!==0)throw e.v;return e.v}function za(e){if(e.deps!==null){e.f^=Te;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ee)!==0&&(t.f&Te)===0&&za(t)}}function Xa(e){if(e.v===re)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(at.has(t)||(t.f&ee)!==0&&Xa(t))return!0;return!1}function Fe(e){var t=De;try{return De=!0,e()}finally{De=t}}const Ic=-7169;function J(e,t){e.f=e.f&Ic|t}function ke(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ze in e)xs(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ze in n&&xs(n)}}}function xs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{xs(e[r],t)}catch{}const n=Is(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ha(n);for(let s in r){const o=r[s].get;if(o)try{o.call(e)}catch{}}}}}const Cc=["touchstart","touchmove"];function Bc(e){return Cc.includes(e)}const Dc=new Set,No=new Set;function Mc(e,t,n,r={}){function s(o){if(r.capture||Dn.call(t,o),!o.cancelBubble)return mn(()=>n?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Mt(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function sn(e,t,n,r,s){var o={capture:r,passive:s},a=Mc(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&yr(()=>{t.removeEventListener(e,a,o)})}let ko=null;function Dn(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;ko=e;var a=0,i=ko===e&&e.__root;if(i){var l=s.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;l<=u&&(a=l)}if(o=s[a]||e.target,o!==t){gu(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=L,h=G;fe(null),Ne(null);try{for(var c,d=[];o!==null;){var m=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+r];_!=null&&(!o.disabled||e.target===o)&&_.call(o,e)}catch(v){c?d.push(v):c=v}if(e.cancelBubble||m===t||m===null)break;o=m}if(c){for(let v of d)queueMicrotask(()=>{throw v});throw c}}finally{e.__root=t,delete e.currentTarget,fe(f),Ne(h)}}}function Nc(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function $a(e,t){var n=G;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function te(e,t){var n=(t&ju)!==0,r,s=!e.startsWith("<!>");return()=>{r===void 0&&(r=Nc(s?e:"<!>"+e),r=ks(r));var o=n||Fa?document.importNode(r,!0):r.cloneNode(!0);return $a(o,o),o}}function ae(){var e=document.createDocumentFragment(),t=document.createComment(""),n=lt();return e.append(t,n),$a(t,n),e}function U(e,t){e!==null&&e.before(t)}let bs=!0;function Je(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function kc(e,t){return Lc(e,t)}const Wt=new Map;function Lc(e,{target:t,anchor:n,props:r={},events:s,context:o,intro:a=!0}){vc();var i=new Set,l=h=>{for(var c=0;c<h.length;c++){var d=h[c];if(!i.has(d)){i.add(d);var m=Bc(d);t.addEventListener(d,Dn,{passive:m});var _=Wt.get(d);_===void 0?(document.addEventListener(d,Dn,{passive:m}),Wt.set(d,1)):Wt.set(d,_+1)}}};l(vr(Dc)),No.add(l);var u=void 0,f=gc(()=>{var h=n??t.appendChild(lt());return lc(h,{pending:()=>{}},c=>{if(o){pe({});var d=$;d.c=o}s&&(r.$$events=s),bs=a,u=e(c,r)||{},bs=!0,o&&xe()}),()=>{for(var c of i){t.removeEventListener(c,Dn);var d=Wt.get(c);--d===0?(document.removeEventListener(c,Dn),Wt.delete(c)):Wt.set(c,d)}No.delete(l),h!==n&&h.parentNode?.removeChild(h)}});return Uc.set(u,f),u}let Uc=new WeakMap;class qa{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#o=()=>{var t=z;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Us(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===t)break;const i=this.#r.get(a);i&&(de(i.effect),this.#r.delete(a))}for(const[o,a]of this.#t){if(o===n||this.#n.has(o))continue;const i=()=>{if(Array.from(this.#e.values()).includes(o)){var u=document.createDocumentFragment();Ua(a,u),u.append(lt()),this.#r.set(o,{effect:a,fragment:u})}else de(a);this.#n.delete(o),this.#t.delete(o)};this.#l||!r?(this.#n.add(o),At(a,i,!1)):i()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(de(s.effect),this.#r.delete(r))};ensure(t,n){var r=z,s=Ia();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var o=document.createDocumentFragment(),a=lt();o.append(a),this.#r.set(t,{effect:ye(()=>n(a)),fragment:o})}else this.#t.set(t,ye(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[i,l]of this.#t)i===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[i,l]of this.#r)i===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#o),r.ondiscard(this.#s)}else this.#o()}}function se(e,t,n=!1){var r=new qa(e),s=n?ft:0;function o(a,i){r.ensure(a,i)}Sr(()=>{var a=!1;t((i,l=!0)=>{a=!0,o(l,i)}),a||o(!1,null)},s)}function Oc(e,t,n){for(var r=[],s=t.length,o,a=t.length,i=0;i<s;i++){let h=t[i];At(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var c=e.outrogroups;Es(vr(o.done)),c.delete(o),c.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=r.length===0&&n!==null;if(l){var u=n,f=u.parentNode;pc(f),f.append(u),e.items.clear()}Es(t,!l)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Es(e,t=!0){for(var n=0;n<e.length;n++)de(e[n],t)}var Lo;function ys(e,t,n,r,s,o=null){var a=e,i=new Map,l=(t&pa)!==0;if(l){var u=e;a=u.appendChild(lt())}var f=null,h=st(()=>{var x=n();return _r(x)?x:x==null?[]:vr(x)}),c,d=!0;function m(){v.fallback=f,Gc(v,c,a,t,r),f!==null&&(c.length===0?(f.f&We)===0?Us(f):(f.f^=We,Mn(f,null,a)):At(f,()=>{f=null}))}var _=Sr(()=>{c=p(h);for(var x=c.length,y=new Set,E=z,S=Ia(),b=0;b<x;b+=1){var T=c[b],F=r(T,b),I=d?null:i.get(F);I?(I.v&&Bt(I.v,T),I.i&&Bt(I.i,b),S&&E.skipped_effects.delete(I.e)):(I=Vc(i,d?a:Lo??=lt(),T,F,b,s,t,n),d||(I.e.f|=We),i.set(F,I)),y.add(F)}if(x===0&&o&&!f&&(d?f=ye(()=>o(a)):(f=ye(()=>o(Lo??=lt())),f.f|=We)),!d)if(S){for(const[g,A]of i)y.has(g)||E.skipped_effects.add(A.e);E.oncommit(m),E.ondiscard(()=>{})}else m();p(h)}),v={effect:_,items:i,outrogroups:null,fallback:f};d=!1}function Gc(e,t,n,r,s){var o=(r&Hu)!==0,a=t.length,i=e.items,l=e.effect.first,u,f=null,h,c=[],d=[],m,_,v,x;if(o)for(x=0;x<a;x+=1)m=t[x],_=s(m,x),v=i.get(_).e,(v.f&We)===0&&(v.nodes?.a?.measure(),(h??=new Set).add(v));for(x=0;x<a;x+=1){if(m=t[x],_=s(m,x),v=i.get(_).e,e.outrogroups!==null)for(const A of e.outrogroups)A.pending.delete(v),A.done.delete(v);if((v.f&We)!==0)if(v.f^=We,v===l)Mn(v,null,n);else{var y=f?f.next:l;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),nt(e,f,v),nt(e,v,y),Mn(v,y,n),f=v,c=[],d=[],l=f.next;continue}if((v.f&ve)!==0&&(Us(v),o&&(v.nodes?.a?.unfix(),(h??=new Set).delete(v))),v!==l){if(u!==void 0&&u.has(v)){if(c.length<d.length){var E=d[0],S;f=E.prev;var b=c[0],T=c[c.length-1];for(S=0;S<c.length;S+=1)Mn(c[S],E,n);for(S=0;S<d.length;S+=1)u.delete(d[S]);nt(e,b.prev,T.next),nt(e,f,b),nt(e,T,E),l=E,f=T,x-=1,c=[],d=[]}else u.delete(v),Mn(v,l,n),nt(e,v.prev,v.next),nt(e,v,f===null?e.effect.first:f.next),nt(e,f,v),f=v;continue}for(c=[],d=[];l!==null&&l!==v;)(u??=new Set).add(l),d.push(l),l=l.next;if(l===null)continue}(v.f&We)===0&&c.push(v),f=v,l=v.next}if(e.outrogroups!==null){for(const A of e.outrogroups)A.pending.size===0&&(Es(vr(A.done)),e.outrogroups?.delete(A));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||u!==void 0){var F=[];if(u!==void 0)for(v of u)(v.f&ve)===0&&F.push(v);for(;l!==null;)(l.f&ve)===0&&l!==e.fallback&&F.push(l),l=l.next;var I=F.length;if(I>0){var g=(r&pa)!==0&&a===0?n:null;if(o){for(x=0;x<I;x+=1)F[x].nodes?.a?.measure();for(x=0;x<I;x+=1)F[x].nodes?.a?.fix()}Oc(e,F,g)}}o&&Mt(()=>{if(h!==void 0)for(v of h)v.nodes?.a?.apply()})}function Vc(e,t,n,r,s,o,a,i){var l=(a&Gu)!==0?(a&zu)===0?N(n,!1,!1):Ct(n):null,u=(a&Vu)!==0?Ct(s):null;return{v:l,i:u,e:ye(()=>(o(t,l??n,u??s,i),()=>{e.delete(r)}))}}function Mn(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,o=t&&(t.f&We)===0?t.nodes.start:n;r!==null;){var a=zn(r);if(o.before(r),r===s)return;r=a}}function nt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Et(e,t,n){var r=new qa(e);Sr(()=>{var s=t()??null;r.ensure(s,s&&(o=>n(o,s)))},ft)}const Hc=()=>performance.now(),Ke={tick:e=>requestAnimationFrame(e),now:()=>Hc(),tasks:new Set};function Ya(){const e=Ke.now();Ke.tasks.forEach(t=>{t.c(e)||(Ke.tasks.delete(t),t.f())}),Ke.tasks.size!==0&&Ke.tick(Ya)}function zc(e){let t;return Ke.tasks.size===0&&Ke.tick(Ya),{promise:new Promise(n=>{Ke.tasks.add(t={c:e,f:n})}),abort(){Ke.tasks.delete(t)}}}function Kn(e,t){mn(()=>{e.dispatchEvent(new CustomEvent(t))})}function Xc(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Uo(e){const t={},n=e.split(";");for(const r of n){const[s,o]=r.split(":");if(!s||o===void 0)break;const a=Xc(s.trim());t[a]=o.trim()}return t}const $c=e=>e;function qc(e,t,n,r){var s=(e&Wu)!==0,o="both",a,i=t.inert,l=t.style.overflow,u,f;function h(){return mn(()=>a??=n()(t,r?.()??{},{direction:o}))}var c={is_global:s,in(){t.inert=i,Kn(t,"introstart"),u=gs(t,h(),f,1,()=>{Kn(t,"introend"),u?.abort(),u=a=void 0,t.style.overflow=l})},out(v){t.inert=!0,Kn(t,"outrostart"),f=gs(t,h(),u,0,()=>{Kn(t,"outroend"),v?.()})},stop:()=>{u?.abort(),f?.abort()}},d=G;if((d.nodes.t??=[]).push(c),bs){var m=s;if(!m){for(var _=d.parent;_&&(_.f&ft)!==0;)for(;(_=_.parent)&&(_.f&Oe)===0;);m=!_||(_.f&br)!==0}m&&Ls(()=>{Fe(()=>c.in())})}}function gs(e,t,n,r,s){var o=r===1;if(Tu(t)){var a,i=!1;return Mt(()=>{if(!i){var v=t({direction:o?"in":"out"});a=gs(e,v,n,r,s)}}),{abort:()=>{i=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(n?.deactivate(),!t?.duration)return s(),{abort:Pn,deactivate:Pn,reset:Pn,t:()=>r};const{delay:l=0,css:u,tick:f,easing:h=$c}=t;var c=[];if(o&&n===void 0&&(f&&f(0,1),u)){var d=Uo(u(0,1));c.push(d,d)}var m=()=>1-r,_=e.animate(c,{duration:l,fill:"forwards"});return _.onfinish=()=>{_.cancel();var v=n?.t()??1-r;n?.abort();var x=r-v,y=t.duration*Math.abs(x),E=[];if(y>0){var S=!1;if(u)for(var b=Math.ceil(y/16.666666666666668),T=0;T<=b;T+=1){var F=v+x*h(T/b),I=Uo(u(F,1-F));E.push(I),S||=I.overflow==="hidden"}S&&(e.style.overflow="hidden"),m=()=>{var g=_.currentTime;return v+x*h(g/y)},f&&zc(()=>{if(_.playState!=="running")return!1;var g=m();return f(g,1-g),!0})}_=e.animate(E,{duration:y,fill:"forwards"}),_.onfinish=()=>{m=()=>r,f?.(r,1-r),s()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=Pn)},deactivate:()=>{s=Pn},reset:()=>{r===0&&f?.(1,0)},t:()=>m()}}const Oo=[...` 	
\r\fÂ \v\uFEFF`];function Yc(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var o=s.length,a=0;(a=r.indexOf(s,a))>=0;){var i=a+o;(a===0||Oo.includes(r[a-1]))&&(i===r.length||Oo.includes(r[i]))?r=(a===0?"":r.substring(0,a))+r.substring(i+1):a=i}}return r===""?null:r}function Ss(e,t,n,r,s,o){var a=e.__className;if(a!==n||a===void 0){var i=Yc(n,r,o);i==null?e.removeAttribute("class"):e.className=i,e.__className=n}else if(o&&s!==o)for(var l in o){var u=!!o[l];(s==null||u!==!!s[l])&&e.classList.toggle(l,u)}return o}function Ka(e,t,n=!1){if(e.multiple){if(t==null)return;if(!_r(t))return Qu();for(var r of e.options)r.selected=t.includes(kn(r));return}for(r of e.options){var s=kn(r);if(_c(s,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Kc(e){var t=new MutationObserver(()=>{Ka(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),yr(()=>{t.disconnect()})}function Go(e,t,n=t){var r=new WeakSet,s=!0;bc(e,"change",o=>{var a=o?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(a),kn);else{var l=e.querySelector(a)??e.querySelector("option:not([disabled])");i=l&&kn(l)}n(i),z!==null&&r.add(z)}),Ls(()=>{var o=t();if(e===document.activeElement){var a=tr??z;if(r.has(a))return}if(Ka(e,o,s),s&&o===void 0){var i=e.querySelector(":checked");i!==null&&(o=kn(i),n(o))}e.__value=o,s=!1}),Kc(e)}function kn(e){return"__value"in e?e.__value:e.value}const Wc=Symbol("is custom element"),jc=Symbol("is html");function Zc(e,t){var n=Os(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Qc(e,t){var n=Os(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function nr(e,t,n,r){var s=Os(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[Pu]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Jc(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Os(e){return e.__attributes??={[Wc]:e.nodeName.includes("-"),[jc]:e.namespaceURI===Zu}}var Vo=new Map;function Jc(e){var t=e.getAttribute("is")||e.nodeName,n=Vo.get(t);if(n)return n;Vo.set(t,n=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=ha(s);for(var a in r)r[a].set&&n.push(a);s=Is(s)}return n}function ef(e,t,n){var r=Tt(e,t);r&&r.set&&(e[t]=n,yr(()=>{e[t]=null}))}function Ho(e,t){return e===t||e?.[Ze]===t}function os(e={},t,n,r){return Ls(()=>{var s,o;return gr(()=>{s=o,o=[],Fe(()=>{e!==n(...o)&&(t(e,...o),s&&Ho(n(...s),e)&&t(null,...s))})}),()=>{Mt(()=>{o&&Ho(n(...o),e)&&t(null,...o)})}}),e}function Ve(e=!1){const t=$,n=t.l.u;if(!n)return;let r=()=>ke(t.s);if(e){let s=0,o={};const a=Er(()=>{let i=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],i=!0);return i&&s++,s});r=()=>p(a)}n.b.length&&yc(()=>{zo(t,r),hs(n.b)}),ps(()=>{const s=Fe(()=>n.m.map(Au));return()=>{for(const o of s)typeof o=="function"&&o()}}),n.a.length&&ps(()=>{zo(t,r),hs(n.a)})}function zo(e,t){if(e.l.s)for(const n of e.l.s)p(n);t()}let Wn=!1;function tf(e){var t=Wn;try{return Wn=!1,[e(),Wn]}finally{Wn=t}}function Y(e,t,n,r){var s=!hn||(n&$u)!==0,o=(n&Yu)!==0,a=(n&Ku)!==0,i=r,l=!0,u=()=>(l&&(l=!1,i=a?Fe(r):r),i),f;if(o){var h=Ze in e||wu in e;f=Tt(e,t)?.set??(h&&t in e?E=>e[t]=E:void 0)}var c,d=!1;o?[c,d]=tf(()=>e[t]):c=e[t],c===void 0&&r!==void 0&&(c=u(),f&&(s&&Nu(),f(c)));var m;if(s?m=()=>{var E=e[t];return E===void 0?u():(l=!0,E)}:m=()=>{var E=e[t];return E!==void 0&&(i=void 0),E===void 0?i:E},s&&(n&qu)===0)return m;if(f){var _=e.$$legacy;return(function(E,S){return arguments.length>0?((!s||!S||_||d)&&f(S?m():E),E):m()})}var v=!1,x=((n&Xu)!==0?Er:st)(()=>(v=!1,m()));o&&p(x);var y=G;return(function(E,S){if(arguments.length>0){const b=S?p(x):s&&o?rn(E):E;return R(x,b),v=!0,i!==void 0&&(i=b),E}return Lt&&v||(y.f&je)!==0?x.v:p(x)})}function Wa(e){$===null&&Ds(),hn&&$.l!==null?sf($).m.push(e):ps(()=>{const t=Fe(e);if(typeof t=="function")return t})}function nf(e){$===null&&Ds(),Wa(()=>()=>Fe(e))}function rf(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Gs(){const e=$;return e===null&&Ds(),(t,n,r)=>{const s=e.s.$$events?.[t];if(s){const o=_r(s)?s.slice():[s],a=rf(t,n,r);for(const i of o)i.call(e.x,a);return!a.defaultPrevented}return!0}}function sf(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const of="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(of);nc();let Vs=Float32Array;function Hs(e,t,n){const r=new Vs(3);return e&&(r[0]=e),t&&(r[1]=t),n&&(r[2]=n),r}function af(e,t,n){return n=n||new Vs(3),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function lf(e,t,n){return n=n||new Vs(3),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}let ja=Float32Array;function uf(e){return e=e||new ja(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cf(e,t){t=t||new ja(16);const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],u=e[7],f=e[8],h=e[9],c=e[10],d=e[11],m=e[12],_=e[13],v=e[14],x=e[15],y=c*x,E=v*d,S=l*x,b=v*u,T=l*d,F=c*u,I=s*x,g=v*o,A=s*d,B=c*o,K=s*u,Z=l*o,me=f*_,be=m*h,Pe=a*_,Xe=m*i,$e=a*h,qe=f*i,pt=n*_,Ut=m*r,Ot=n*h,Gt=f*r,xt=n*i,bt=a*r,En=y*i+b*h+T*_-(E*i+S*h+F*_),yn=E*r+I*h+B*_-(y*r+g*h+A*_),Vt=S*r+g*i+K*_-(b*r+I*i+Z*_),qn=F*r+A*i+Z*h-(T*r+B*i+K*h),j=1/(n*En+a*yn+f*Vt+m*qn);return t[0]=j*En,t[1]=j*yn,t[2]=j*Vt,t[3]=j*qn,t[4]=j*(E*a+S*f+F*m-(y*a+b*f+T*m)),t[5]=j*(y*n+g*f+A*m-(E*n+I*f+B*m)),t[6]=j*(b*n+I*a+Z*m-(S*n+g*a+K*m)),t[7]=j*(T*n+B*a+K*f-(F*n+A*a+Z*f)),t[8]=j*(me*u+Xe*d+$e*x-(be*u+Pe*d+qe*x)),t[9]=j*(be*o+pt*d+Gt*x-(me*o+Ut*d+Ot*x)),t[10]=j*(Pe*o+Ut*u+xt*x-(Xe*o+pt*u+bt*x)),t[11]=j*(qe*o+Ot*u+bt*d-($e*o+Gt*u+xt*d)),t[12]=j*(Pe*c+qe*v+be*l-($e*v+me*l+Xe*c)),t[13]=j*(Ot*v+me*s+Ut*c-(pt*c+Gt*v+be*s)),t[14]=j*(pt*l+bt*v+Xe*s-(xt*v+Pe*s+Ut*l)),t[15]=j*(xt*c+$e*s+Gt*l-(Ot*l+bt*c+qe*s)),t}function ff(e,t,n){n=n||Hs();const r=t[0],s=t[1],o=t[2],a=r*e[3]+s*e[7]+o*e[11]+e[15];return n[0]=(r*e[0]+s*e[4]+o*e[8]+e[12])/a,n[1]=(r*e[1]+s*e[5]+o*e[9]+e[13])/a,n[2]=(r*e[2]+s*e[6]+o*e[10]+e[14])/a,n}function df(e,t,n){n=n||Hs();const r=t[0],s=t[1],o=t[2];return n[0]=r*e[0]+s*e[4]+o*e[8],n[1]=r*e[1]+s*e[5]+o*e[9],n[2]=r*e[2]+s*e[6]+o*e[10],n}const zs=5120,On=5121,Xs=5122,$s=5123,qs=5124,Ys=5125,Ks=5126,hf=32819,mf=32820,_f=33635,vf=5131,pf=33640,xf=35899,bf=35902,Ef=36269,yf=34042,Za={};{const e=Za;e[zs]=Int8Array,e[On]=Uint8Array,e[Xs]=Int16Array,e[$s]=Uint16Array,e[qs]=Int32Array,e[Ys]=Uint32Array,e[Ks]=Float32Array,e[hf]=Uint16Array,e[mf]=Uint16Array,e[_f]=Uint16Array,e[vf]=Uint16Array,e[pf]=Uint32Array,e[xf]=Uint32Array,e[bf]=Uint32Array,e[Ef]=Uint32Array,e[yf]=Uint32Array}function Rr(e){if(e instanceof Int8Array)return zs;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return On;if(e instanceof Int16Array)return Xs;if(e instanceof Uint16Array)return $s;if(e instanceof Int32Array)return qs;if(e instanceof Uint32Array)return Ys;if(e instanceof Float32Array)return Ks;throw new Error("unsupported typed array type")}function Qa(e){if(e===Int8Array)return zs;if(e===Uint8Array||e===Uint8ClampedArray)return On;if(e===Int16Array)return Xs;if(e===Uint16Array)return $s;if(e===Int32Array)return qs;if(e===Uint32Array)return Ys;if(e===Float32Array)return Ks;throw new Error("unsupported typed array type")}function Ja(e){const t=Za[e];if(!t)throw new Error("unknown gl type");return t}const Gn=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function gf(e,t,n){e.forEach(function(r){const s=t[r];s!==void 0&&(n[r]=s)})}function el(...e){console.error(...e)}const Xo=new Map;function Tr(e,t){if(!e||typeof e!="object")return!1;let n=Xo.get(t);n||(n=new WeakMap,Xo.set(t,n));let r=n.get(e);if(r===void 0){const s=Object.prototype.toString.call(e);r=s.substring(8,s.length-1)===t,n.set(e,r)}return r}function Sf(e,t){return typeof WebGLBuffer<"u"&&Tr(t,"WebGLBuffer")}function tl(e,t){return typeof WebGLRenderbuffer<"u"&&Tr(t,"WebGLRenderbuffer")}function Ar(e,t){return typeof WebGLTexture<"u"&&Tr(t,"WebGLTexture")}function Rf(e,t){return typeof WebGLSampler<"u"&&Tr(t,"WebGLSampler")}const nl=35044,ut=34962,rl=34963,Tf=34660,Af=5120,Ff=5121,wf=5122,Pf=5123,If=5124,Cf=5125,sl=5126,ol={attribPrefix:""};function Bf(e,t,n,r,s){e.bindBuffer(t,n),e.bufferData(t,r,s||nl)}function Ws(e,t,n,r){if(Sf(e,t))return t;n=n||ut;const s=e.createBuffer();return Bf(e,n,s,t,r),s}function il(e){return e==="indices"}function Df(e){return e===Int8Array||e===Uint8Array}function js(e){return e.length?e:e.data}const Mf=/coord|texture/i,Nf=/color|colour/i;function kf(e,t){let n;if(Mf.test(e)?n=2:Nf.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function Zs(e,t,n){return e.numComponents||e.size||kf(t,n||js(e).length)}function Fr(e,t){if(Gn(e))return e;if(Gn(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?Qs(e.type):void 0;return n||(il(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function Lf(e){return typeof e=="number"?e:e?Qa(e):sl}function Qs(e){return typeof e=="number"?Ja(e):e||Float32Array}function Uf(e,t){return{buffer:t.buffer,numValues:24,type:Lf(t.type),arrayType:Qs(t.type)}}function Of(e,t){const n=t.data||t,r=Qs(t.type),s=n*r.BYTES_PER_ELEMENT,o=e.createBuffer();return e.bindBuffer(ut,o),e.bufferData(ut,s,t.drawType||nl),{buffer:o,numValues:n,type:Qa(r),arrayType:r}}function Gf(e,t,n){const r=Fr(t,n);return{arrayType:r.constructor,buffer:Ws(e,r,void 0,t.drawType),type:Rr(r),numValues:0}}function Vf(e,t){const n={};return Object.keys(t).forEach(function(r){if(!il(r)){const s=t[r],o=s.attrib||s.name||s.attribName||ol.attribPrefix+r;if(s.value){if(!Array.isArray(s.value)&&!Gn(s.value))throw new Error("array.value is not array or typedarray");n[o]={value:s.value}}else{let a;s.buffer&&s.buffer instanceof WebGLBuffer?a=Uf:typeof s=="number"||typeof s.data=="number"?a=Of:a=Gf;const{buffer:i,type:l,numValues:u,arrayType:f}=a(e,s,r),h=s.normalize!==void 0?s.normalize:Df(f),c=Zs(s,r,u);n[o]={buffer:i,numComponents:c,type:l,normalize:h,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),e.bindBuffer(ut,null),n}function Hf(e,t){return t===Af||t===Ff?1:t===wf||t===Pf?2:t===If||t===Cf||t===sl?4:0}const on=["position","positions","a_position"];function zf(e){let t,n;for(n=0;n<on.length&&(t=on[n],!(t in e));++n);n===on.length&&(t=Object.keys(e)[0]);const r=e[t],s=js(r).length;if(s===void 0)return 1;const o=Zs(r,t),a=s/o;if(s%o>0)throw new Error(`numComponents ${o} not correct for length ${s}`);return a}function Xf(e,t){let n,r;for(r=0;r<on.length&&(n=on[r],!(n in t||(n=ol.attribPrefix+n,n in t)));++r);r===on.length&&(n=Object.keys(t)[0]);const s=t[n];if(!s.buffer)return 1;e.bindBuffer(ut,s.buffer);const o=e.getBufferParameter(ut,Tf);e.bindBuffer(ut,null);const a=Hf(e,s.type),i=o/a,l=s.numComponents||s.size,u=i/l;if(u%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return u}function $f(e,t,n){const r=Vf(e,t),s=Object.assign({},n||{});s.attribs=Object.assign({},n?n.attribs:{},r);const o=t.indices;if(o){const a=Fr(o,"indices");s.indices=Ws(e,a,rl),s.numElements=a.length,s.elementType=Rr(a)}else s.numElements||(s.numElements=Xf(e,s.attribs));return s}function qf(e,t,n){const r=n==="indices"?rl:ut,s=Fr(t,n);return Ws(e,s,r)}function Yf(e,t){const n={};return Object.keys(t).forEach(function(r){n[r]=qf(e,t[r],r)}),t.indices?(n.numElements=t.indices.length,n.elementType=Rr(Fr(t.indices))):n.numElements=zf(t),n}const St=js,Kf=Zs;function al(e,t){let n=0;return e.push=function(){for(let r=0;r<arguments.length;++r){const s=arguments[r];if(s instanceof Array||Gn(s))for(let o=0;o<s.length;++o)e[n++]=s[o];else e[n++]=s}},e.reset=function(r){n=r||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function D(e,t,n){const r=n||Float32Array;return al(new r(e*t),e)}function Wf(e){return e!=="indices"}function jf(e){const t=e.indices,n={},r=t.length;function s(o){const a=e[o],i=a.numComponents,l=D(i,r,a.constructor);for(let u=0;u<r;++u){const h=t[u]*i;for(let c=0;c<i;++c)l.push(a[h+c])}n[o]=l}return Object.keys(e).filter(Wf).forEach(s),n}function Zf(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,n=t.length;for(let r=0;r<n;r+=9){const s=t[r+0],o=t[r+1],a=t[r+2],i=t[r+3],l=t[r+4],u=t[r+5],f=t[r+6],h=t[r+7],c=t[r+8];let d=s+i+f,m=o+l+h,_=a+u+c;const v=Math.sqrt(d*d+m*m+_*_);d/=v,m/=v,_/=v,t[r+0]=d,t[r+1]=m,t[r+2]=_,t[r+3]=d,t[r+4]=m,t[r+5]=_,t[r+6]=d,t[r+7]=m,t[r+8]=_}return e}function Js(e,t,n){const r=e.length,s=new Float32Array(3);for(let o=0;o<r;o+=3)n(t,[e[o],e[o+1],e[o+2]],s),e[o]=s[0],e[o+1]=s[1],e[o+2]=s[2]}function Qf(e,t,n){n=n||Hs();const r=t[0],s=t[1],o=t[2];return n[0]=r*e[0]+s*e[1]+o*e[2],n[1]=r*e[4]+s*e[5]+o*e[6],n[2]=r*e[8]+s*e[9]+o*e[10],n}function ll(e,t){return Js(e,t,df),e}function ul(e,t){return Js(e,cf(t),Qf),e}function cl(e,t){return Js(e,t,ff),e}function fl(e,t){return Object.keys(e).forEach(function(n){const r=e[n];n.indexOf("pos")>=0?cl(r,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?ll(r,t):n.indexOf("norm")>=0&&ul(r,t)}),e}function eo(e,t,n){return e=e||2,t=t||0,n=n||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,n+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function to(e,t,n,r,s){e=e||1,t=t||1,n=n||1,r=r||1,s=s||uf();const o=(n+1)*(r+1),a=D(3,o),i=D(3,o),l=D(2,o);for(let c=0;c<=r;c++)for(let d=0;d<=n;d++){const m=d/n,_=c/r;a.push(e*m-e*.5,0,t*_-t*.5),i.push(0,1,0),l.push(m,_)}const u=n+1,f=D(3,n*r*2,Uint16Array);for(let c=0;c<r;c++)for(let d=0;d<n;d++)f.push((c+0)*u+d,(c+1)*u+d,(c+0)*u+d+1),f.push((c+1)*u+d,(c+1)*u+d+1,(c+0)*u+d+1);return fl({position:a,normal:i,texcoord:l,indices:f},s)}function no(e,t,n,r,s,o,a){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,s=s||Math.PI,o=o||0,a=a||Math.PI*2;const i=s-r,l=a-o,u=(t+1)*(n+1),f=D(3,u),h=D(3,u),c=D(2,u);for(let _=0;_<=n;_++)for(let v=0;v<=t;v++){const x=v/t,y=_/n,E=l*x+o,S=i*y+r,b=Math.sin(E),T=Math.cos(E),F=Math.sin(S),I=Math.cos(S),g=T*F,A=I,B=b*F;f.push(e*g,e*A,e*B),h.push(g,A,B),c.push(1-x,y)}const d=t+1,m=D(3,t*n*2,Uint16Array);for(let _=0;_<t;_++)for(let v=0;v<n;v++)m.push((v+0)*d+_,(v+0)*d+_+1,(v+1)*d+_),m.push((v+1)*d+_,(v+0)*d+_+1,(v+1)*d+_+1);return{position:f,normal:h,texcoord:c,indices:m}}const Jf=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function ro(e){e=e||1;const t=e/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],s=[[1,0],[0,0],[0,1],[1,1]],o=24,a=D(3,o),i=D(3,o),l=D(2,o),u=D(3,12,Uint16Array);for(let f=0;f<6;++f){const h=Jf[f];for(let d=0;d<4;++d){const m=n[h[d]],_=r[f],v=s[d];a.push(m),i.push(_),l.push(v)}const c=4*f;u.push(c+0,c+1,c+2),u.push(c+0,c+2,c+3)}return{position:a,normal:i,texcoord:l,indices:u}}function wr(e,t,n,r,s,o,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(s<1)throw new Error("verticalSubdivisions must be 1 or greater");const i=o===void 0?!0:o,l=a===void 0?!0:a,u=(i?2:0)+(l?2:0),f=(r+1)*(s+1+u),h=D(3,f),c=D(3,f),d=D(2,f),m=D(3,r*(s+u/2)*2,Uint16Array),_=r+1,v=Math.atan2(e-t,n),x=Math.cos(v),y=Math.sin(v),E=i?-2:0,S=s+(l?2:0);for(let b=E;b<=S;++b){let T=b/s,F=n*T,I;b<0?(F=0,T=1,I=e):b>s?(F=n,T=1,I=t):I=e+(t-e)*(b/s),(b===-2||b===s+2)&&(I=0,T=0),F-=n/2;for(let g=0;g<_;++g){const A=Math.sin(g*Math.PI*2/r),B=Math.cos(g*Math.PI*2/r);h.push(A*I,F,B*I),b<0?c.push(0,-1,0):b>s?c.push(0,1,0):I===0?c.push(0,0,0):c.push(A*x,y,B*x),d.push(g/r,1-T)}}for(let b=0;b<s+u;++b)if(!(b===1&&i||b===s+u-2&&l))for(let T=0;T<r;++T)m.push(_*(b+0)+0+T,_*(b+0)+1+T,_*(b+1)+1+T),m.push(_*(b+0)+0+T,_*(b+1)+1+T,_*(b+1)+0+T);return{position:h,normal:c,texcoord:d,indices:m}}function $o(e,t){t=t||[];const n=[];for(let r=0;r<e.length;r+=4){const s=e[r],o=e.slice(r+1,r+4);o.push.apply(o,t);for(let a=0;a<s;++a)n.push.apply(n,o)}return n}function so(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],n=$o([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=$o([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),s=e.length/3,o={position:D(3,s),texcoord:D(2,s),normal:D(3,s),color:D(4,s,Uint8Array),indices:D(3,s/3,Uint16Array)};o.position.push(e),o.texcoord.push(t),o.normal.push(n),o.color.push(r);for(let a=0;a<s;++a)o.indices.push(a);return o}function Pr(e,t,n,r,s,o,a){if(s<=0)throw new Error("subdivisionDown must be > 0");o=o||0,a=a||1;const i=2,l=a-o,u=(s+1)*2*(2+i),f=D(3,u),h=D(3,u),c=D(2,u);function d(y,E,S){return y+(E-y)*S}function m(y,E,S,b,T,F){for(let I=0;I<=s;I++){const g=E/(i-1),A=I/s,B=(g-.5)*2,K=(o+A*l)*Math.PI,Z=Math.sin(K),me=Math.cos(K),be=d(e,y,Z),Pe=B*r,Xe=me*e,$e=Z*be;f.push(Pe,Xe,$e);const qe=af(lf([0,Z,me],S),b);h.push(qe),c.push(g*T+F,A)}}for(let y=0;y<i;y++){const E=(y/(i-1)-.5)*2;m(t,y,[1,1,1],[0,0,0],1,0),m(t,y,[0,0,0],[E,0,0],0,0),m(n,y,[1,1,1],[0,0,0],1,0),m(n,y,[0,0,0],[E,0,0],0,1)}const _=D(3,s*2*(2+i),Uint16Array);function v(y,E){for(let S=0;S<s;++S)_.push(y+S+0,y+S+1,E+S+0),_.push(y+S+1,E+S+1,E+S+0)}const x=s+1;return v(x*0,x*4),v(x*5,x*7),v(x*6,x*2),v(x*3,x*1),{position:f,normal:h,texcoord:c,indices:_}}function oo(e,t,n,r,s,o){return wr(e,e,t,n,r,s,o)}function io(e,t,n,r,s,o){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");s=s||0,o=o||Math.PI*2;const a=o-s,i=n+1,l=r+1,u=i*l,f=D(3,u),h=D(3,u),c=D(2,u),d=D(3,n*r*2,Uint16Array);for(let m=0;m<l;++m){const _=m/r,v=_*Math.PI*2,x=Math.sin(v),y=e+x*t,E=Math.cos(v),S=E*t;for(let b=0;b<i;++b){const T=b/n,F=s+T*a,I=Math.sin(F),g=Math.cos(F),A=I*y,B=g*y,K=I*x,Z=g*x;f.push(A,S,B),h.push(K,E,Z),c.push(T,1-_)}}for(let m=0;m<r;++m)for(let _=0;_<n;++_){const v=1+_,x=1+m;d.push(i*m+_,i*x+_,i*m+v),d.push(i*x+_,i*x+v,i*m+v)}return{position:f,normal:h,texcoord:c,indices:d}}function ao(e,t,n,r,s){if(t<3)throw new Error("divisions must be at least 3");n=n||1,s=s||1,r=r||0;const o=(t+1)*(n+1),a=D(3,o),i=D(3,o),l=D(2,o),u=D(3,n*t*2,Uint16Array);let f=0;const h=e-r,c=t+1;for(let d=0;d<=n;++d){const m=r+h*Math.pow(d/n,s);for(let _=0;_<=t;++_){const v=2*Math.PI*_/t,x=m*Math.cos(v),y=m*Math.sin(v);if(a.push(x,0,y),i.push(0,1,0),l.push(1-_/t,d/n),d>0&&_!==t){const E=f+(_+1),S=f+_,b=f+_-c,T=f+(_+1)-c;u.push(E,S,b),u.push(E,b,T)}}f+=t+1}return{position:a,normal:i,texcoord:l,indices:u}}function e0(e){return Math.random()*e|0}function t0(e,t){t=t||{};const n=e.position.numElements,r=D(4,n,Uint8Array),s=t.rand||function(o,a){return a<3?e0(256):255};if(e.color=r,e.indices)for(let o=0;o<n;++o)r.push(s(o,0),s(o,1),s(o,2),s(o,3));else{const o=t.vertsPerColor||3,a=n/o;for(let i=0;i<a;++i){const l=[s(i,0),s(i,1),s(i,2),s(i,3)];for(let u=0;u<o;++u)r.push(l)}}return e}function He(e){return function(t){const n=e.apply(this,Array.prototype.slice.call(arguments,1));return Yf(t,n)}}function ze(e){return function(t){const n=e.apply(null,Array.prototype.slice.call(arguments,1));return $f(t,n)}}const n0=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Rs(e,t,n,r){r=r||0;const s=e.length;for(let o=0;o<s;++o)t[n+o]=e[o]+r}function dl(e,t){const n=St(e),r=new n.constructor(t);let s=r;return n.numComponents&&n.numElements&&al(r,n.numComponents),e.data&&(s={data:r},gf(n0,e,s)),s}function r0(e){const t={};let n;for(let i=0;i<e.length;++i){const l=e[i];Object.keys(l).forEach(function(u){t[u]||(t[u]=[]),!n&&u!=="indices"&&(n=u);const f=l[u],h=Kf(f,u),d=St(f).length/h;t[u].push(d)})}function r(i){let l=0,u;for(let f=0;f<e.length;++f){const c=e[f][i],d=St(c);l+=d.length,(!u||c.data)&&(u=c)}return{length:l,spec:u}}function s(i,l,u){let f=0,h=0;for(let c=0;c<e.length;++c){const m=e[c][i],_=St(m);i==="indices"?(Rs(_,u,h,f),f+=l[c]):Rs(_,u,h),h+=_.length}}const o=t[n],a={};return Object.keys(t).forEach(function(i){const l=r(i),u=dl(l.spec,l.length);s(i,o,St(u)),a[i]=u}),a}function s0(e){const t={};return Object.keys(e).forEach(function(n){const r=e[n],s=St(r),o=dl(r,s.length);Rs(s,St(o),0),t[n]=o}),t}const o0=ze(so),i0=He(so),a0=ze(ro),l0=He(ro),u0=ze(to),c0=He(to),f0=ze(no),d0=He(no),h0=ze(wr),m0=He(wr),_0=ze(eo),v0=He(eo),hl=ze(Pr),ml=He(Pr),p0=ze(oo),x0=He(oo),b0=ze(io),E0=He(io),y0=ze(ao),g0=He(ao),S0=hl,R0=ml,T0=Pr;var A0=Object.freeze({__proto__:null,create3DFBufferInfo:o0,create3DFBuffers:i0,create3DFVertices:so,createAugmentedTypedArray:D,createCubeBufferInfo:a0,createCubeBuffers:l0,createCubeVertices:ro,createPlaneBufferInfo:u0,createPlaneBuffers:c0,createPlaneVertices:to,createSphereBufferInfo:f0,createSphereBuffers:d0,createSphereVertices:no,createTruncatedConeBufferInfo:h0,createTruncatedConeBuffers:m0,createTruncatedConeVertices:wr,createXYQuadBufferInfo:_0,createXYQuadBuffers:v0,createXYQuadVertices:eo,createCresentBufferInfo:S0,createCresentBuffers:R0,createCresentVertices:T0,createCrescentBufferInfo:hl,createCrescentBuffers:ml,createCrescentVertices:Pr,createCylinderBufferInfo:p0,createCylinderBuffers:x0,createCylinderVertices:oo,createTorusBufferInfo:b0,createTorusBuffers:E0,createTorusVertices:io,createDiscBufferInfo:y0,createDiscBuffers:g0,createDiscVertices:ao,deindexVertices:jf,flattenNormals:Zf,makeRandomVertexColors:t0,reorientDirections:ll,reorientNormals:ul,reorientPositions:cl,reorientVertices:fl,concatVertices:r0,duplicateVertices:s0});function Xn(e){return!!e.texStorage2D}const _l=(function(){const e={},t={};function n(r){const s=r.constructor.name;if(!e[s]){for(const o in r)if(typeof r[o]=="number"){const a=t[r[o]];t[r[o]]=a?`${a} | ${o}`:o}e[s]=!0}}return function(s,o){return n(s),t[o]||(typeof o=="number"?`0x${o.toString(16)}`:o)}})(),In=void 0,ht={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},fn=Gn,vl=(function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}})(),qo=6406,Ie=6407,q=6408,Yo=6409,Ko=6410,Cn=6402,Wo=34041,ur=33071,is=9728,as=9729,F0=9986,Le=3553,Ue=34067,mt=32879,dt=35866,Ir=34069,w0=34070,P0=34071,I0=34072,C0=34073,B0=34074,cr=10241,fr=10240,dr=10242,hr=10243,jo=32882,D0=33082,M0=33083,N0=33084,k0=33085,L0=34892,U0=34893,lo=3317,pl=3314,xl=32878,bl=3316,El=3315,yl=32877,rr=37443,sr=37441,or=37440,O0=33321,G0=36756,V0=33325,H0=33326,z0=33330,X0=33329,$0=33338,q0=33337,Y0=33340,K0=33339,W0=33323,j0=36757,Z0=33327,Q0=33328,J0=33336,ed=33335,td=33332,nd=33331,rd=33334,sd=33333,od=32849,id=35905,ad=36194,ld=36758,ud=35898,cd=35901,fd=34843,dd=34837,hd=36221,md=36239,_d=36215,vd=36233,pd=36209,xd=36227,bd=32856,Ed=35907,yd=36759,gd=32855,Sd=32854,Rd=32857,Td=34842,Ad=34836,Fd=36220,wd=36238,Pd=36975,Id=36214,Cd=36232,Bd=36226,Dd=36208,Md=33189,Nd=33190,kd=36012,Ld=36013,Ud=35056,rt=5120,X=5121,jn=5122,jt=5123,Zn=5124,yt=5125,ne=5126,Zo=32819,Qo=32820,Jo=33635,Se=5131,Bn=36193,ls=33640,Od=35899,Gd=35902,Vd=36269,Hd=34042,Qn=33319,Zt=33320,Jn=6403,Qt=36244,Jt=36248,gt=36249,ei=33776,ti=33777,ni=33778,ri=33779,si=35916,oi=35917,ii=35918,ai=35919,li=36196,ui=37488,ci=37489,fi=37490,di=37491,hi=37492,mi=37493,_i=37494,vi=37495,pi=37496,xi=37497,bi=35840,Ei=35841,yi=35842,gi=35843,Si=37808,Ri=37809,Ti=37810,Ai=37811,Fi=37812,wi=37813,Pi=37814,Ii=37815,Ci=37816,Bi=37817,Di=37818,Mi=37819,Ni=37820,ki=37821,Li=37840,Ui=37841,Oi=37842,Gi=37843,Vi=37844,Hi=37845,zi=37846,Xi=37847,$i=37848,qi=37849,Yi=37850,Ki=37851,Wi=37852,ji=37853,Zi=36492,Qi=36493,Ji=36494,ea=36495,ta=36283,na=36284,ra=36285,sa=36286;let us;function vn(e){if(!us){const n={};n[qo]={textureFormat:qo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[X,Se,Bn,ne]},n[Yo]={textureFormat:Yo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[X,Se,Bn,ne]},n[Ko]={textureFormat:Ko,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[X,Se,Bn,ne]},n[Ie]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[X,Se,Bn,ne,Jo]},n[q]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[X,Se,Bn,ne,Zo,Qo]},n[Cn]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[yt,jt]},n[O0]={textureFormat:Jn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[X]},n[G0]={textureFormat:Jn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[rt]},n[V0]={textureFormat:Jn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[ne,Se]},n[H0]={textureFormat:Jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[ne]},n[z0]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[X]},n[X0]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[rt]},n[td]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[jt]},n[nd]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[jn]},n[rd]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yt]},n[sd]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Zn]},n[W0]={textureFormat:Qn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[X]},n[j0]={textureFormat:Qn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[rt]},n[Z0]={textureFormat:Qn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[ne,Se]},n[Q0]={textureFormat:Qn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[ne]},n[J0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[X]},n[ed]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rt]},n[$0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[jt]},n[q0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[jn]},n[Y0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[yt]},n[K0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Zn]},n[od]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[X]},n[id]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[X]},n[ad]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[X,Jo]},n[ld]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[rt]},n[ud]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ne,Se,Od]},n[cd]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ne,Se,Gd]},n[fd]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[ne,Se]},n[dd]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ne]},n[hd]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[X]},n[md]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[rt]},n[_d]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[jt]},n[vd]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[jn]},n[pd]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yt]},n[xd]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Zn]},n[bd]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[X]},n[Ed]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[X]},n[yd]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[rt]},n[gd]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[X,Qo,ls]},n[Sd]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[X,Zo]},n[Rd]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ls]},n[Td]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[ne,Se]},n[Ad]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[ne]},n[Fd]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[X]},n[wd]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rt]},n[Pd]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ls]},n[Id]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[jt]},n[Cd]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[jn]},n[Bd]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Zn]},n[Dd]={textureFormat:gt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[yt]},n[Md]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[jt,yt]},n[Nd]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yt]},n[kd]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ne]},n[Ud]={textureFormat:Wo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Hd]},n[Ld]={textureFormat:Wo,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vd]},Object.keys(n).forEach(function(o){const a=n[o];a.bytesPerElementMap={},a.bytesPerElement.forEach(function(i,l){const u=a.type[l];a.bytesPerElementMap[u]=i})});const r={bytes:8,width:4,height:4},s={bytes:16,width:4,height:4};n[ei]={textureFormat:ei,colorRenderable:!1,textureFilterable:!0,block:r},n[ti]={textureFormat:ti,colorRenderable:!1,textureFilterable:!0,block:r},n[ni]={textureFormat:ni,colorRenderable:!1,textureFilterable:!0,block:s},n[ri]={textureFormat:ri,colorRenderable:!1,textureFilterable:!0,block:s},n[si]={textureFormat:si,colorRenderable:!1,textureFilterable:!0,block:r},n[oi]={textureFormat:oi,colorRenderable:!1,textureFilterable:!0,block:r},n[ii]={textureFormat:ii,colorRenderable:!1,textureFilterable:!0,block:s},n[ai]={textureFormat:ai,colorRenderable:!1,textureFilterable:!0,block:s},n[li]={textureFormat:li,colorRenderable:!1,textureFilterable:!0,block:r},n[ui]={textureFormat:ui,colorRenderable:!1,textureFilterable:!0,block:r},n[ci]={textureFormat:ci,colorRenderable:!1,textureFilterable:!0,block:r},n[fi]={textureFormat:fi,colorRenderable:!1,textureFilterable:!0,block:s},n[di]={textureFormat:di,colorRenderable:!1,textureFilterable:!0,block:s},n[hi]={textureFormat:hi,colorRenderable:!1,textureFilterable:!0,block:r},n[mi]={textureFormat:mi,colorRenderable:!1,textureFilterable:!0,block:r},n[_i]={textureFormat:_i,colorRenderable:!1,textureFilterable:!0,block:r},n[vi]={textureFormat:vi,colorRenderable:!1,textureFilterable:!0,block:r},n[pi]={textureFormat:pi,colorRenderable:!1,textureFilterable:!0,block:s},n[xi]={textureFormat:xi,colorRenderable:!1,textureFilterable:!0,block:s},n[bi]={textureFormat:bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},n[Ei]={textureFormat:Ei,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},n[yi]={textureFormat:yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},n[gi]={textureFormat:gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},n[Si]={textureFormat:Si,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},n[Ri]={textureFormat:Ri,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},n[Ti]={textureFormat:Ti,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},n[Ai]={textureFormat:Ai,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},n[Fi]={textureFormat:Fi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},n[wi]={textureFormat:wi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},n[Pi]={textureFormat:Pi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},n[Ii]={textureFormat:Ii,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},n[Ci]={textureFormat:Ci,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},n[Bi]={textureFormat:Bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},n[Di]={textureFormat:Di,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},n[Mi]={textureFormat:Mi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},n[Ni]={textureFormat:Ni,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},n[ki]={textureFormat:ki,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},n[Li]={textureFormat:Li,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},n[Ui]={textureFormat:Ui,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},n[Oi]={textureFormat:Oi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},n[Gi]={textureFormat:Gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},n[Vi]={textureFormat:Vi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},n[Hi]={textureFormat:Hi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},n[zi]={textureFormat:zi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},n[Xi]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},n[$i]={textureFormat:$i,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},n[qi]={textureFormat:qi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},n[Yi]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},n[Ki]={textureFormat:Ki,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},n[Wi]={textureFormat:Wi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},n[ji]={textureFormat:ji,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},n[Zi]={textureFormat:Zi,colorRenderable:!1,textureFilterable:!0,block:s},n[Qi]={textureFormat:Qi,colorRenderable:!1,textureFilterable:!0,block:s},n[Ji]={textureFormat:Ji,colorRenderable:!1,textureFilterable:!0,block:s},n[ea]={textureFormat:ea,colorRenderable:!1,textureFilterable:!0,block:s},n[ta]={textureFormat:ta,colorRenderable:!1,textureFilterable:!0,block:r},n[na]={textureFormat:na,colorRenderable:!1,textureFilterable:!0,block:r},n[ra]={textureFormat:ra,colorRenderable:!1,textureFilterable:!0,block:r},n[sa]={textureFormat:sa,colorRenderable:!1,textureFilterable:!0,block:r},us=n}const t=us[e];if(!t)throw new Error("unknown internal format");return t}function gl(e,t){const r=vn(e).bytesPerElementMap[t];if(r===void 0)throw new Error("type not supported for internal format");return r}function pn(e){const t=vn(e);if(!t)throw new Error("unknown internal format");return{format:t.textureFormat,type:t.type?.[0]??X}}function Sl(e){return!!vn(e).block}function zd(e,t){const n=vn(e);return n.block?{blockWidth:n.block.width,blockHeight:n.block.height,bytesPerBlock:n.block.bytes}:{blockWidth:1,blockHeight:1,bytesPerBlock:gl(e,t)}}function oa(e){return(e&e-1)===0}function Xd(e,t,n,r){if(!Xn(e))return oa(t)&&oa(n);const s=vn(r);return s.colorRenderable&&s.textureFilterable}function cs(e){return vn(e).textureFilterable}function Rl(e,t,n){return fn(t)?Rr(t):n||X}function er(e,t,n,r,s){if(s%1!==0)throw new Error("can't guess dimensions");if(!n&&!r){const o=Math.sqrt(s/(t===Ue?6:1));o%1===0?(n=o,r=o):(n=s,r=1)}else if(r){if(!n&&(n=s/r,n%1))throw new Error("can't guess dimensions")}else if(r=s/n,r%1)throw new Error("can't guess dimensions");return{width:n,height:r}}function ot(e,t,n){let r,s,o;t.colorspaceConversion!==void 0&&(r=e.getParameter(rr),e.pixelStorei(rr,t.colorspaceConversion)),t.premultiplyAlpha!==void 0&&(s=e.getParameter(sr),e.pixelStorei(sr,t.premultiplyAlpha)),t.flipY!==void 0&&(o=e.getParameter(or),e.pixelStorei(or,t.flipY)),n(),r!==void 0&&e.pixelStorei(rr,r),s!==void 0&&e.pixelStorei(sr,s),o!==void 0&&e.pixelStorei(or,o)}function fs(e,t,n,r){const s=t[n];return{[n]:s===void 0?e.getParameter(r):s}}function uo(e,t){return{...t,...fs(e,t,"flipY",or),...fs(e,t,"premultiplyAlpha",sr),...fs(e,t,"colorspaceConversion",rr)}}function Tl(e){e.pixelStorei(lo,4),Xn(e)&&(e.pixelStorei(pl,0),e.pixelStorei(xl,0),e.pixelStorei(bl,0),e.pixelStorei(El,0),e.pixelStorei(yl,0))}function $d(e,t,n,r){r.minMag&&(n.call(e,t,cr,r.minMag),n.call(e,t,fr,r.minMag)),r.min&&n.call(e,t,cr,r.min),r.mag&&n.call(e,t,fr,r.mag),r.wrap&&(n.call(e,t,dr,r.wrap),n.call(e,t,hr,r.wrap),(t===mt||Rf(e,t))&&n.call(e,t,jo,r.wrap)),r.wrapR&&n.call(e,t,jo,r.wrapR),r.wrapS&&n.call(e,t,dr,r.wrapS),r.wrapT&&n.call(e,t,hr,r.wrapT),r.minLod!==void 0&&n.call(e,t,D0,r.minLod),r.maxLod!==void 0&&n.call(e,t,M0,r.maxLod),r.baseLevel!==void 0&&n.call(e,t,N0,r.baseLevel),r.maxLevel!==void 0&&n.call(e,t,k0,r.maxLevel),r.compareFunc!==void 0&&n.call(e,t,U0,r.compareFunc),r.compareMode!==void 0&&n.call(e,t,L0,r.compareMode)}function Al(e,t,n){const r=n.target||Le;e.bindTexture(r,t),$d(e,r,e.texParameteri,n)}function qd(e){return e=e||ht.textureColor,fn(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function Fl(e,t,{options:n,width:r,height:s,internalFormat:o,lastMipLevelUploaded:a}){n=n||ht.textureOptions,o=o||q;const i=n.target||Le;if(r=r||n.width,s=s||n.height,e.bindTexture(i,t),a>1){const l=Math.max(1,r>>a),u=Math.max(1,s>>a),f=l===1&&u===1,h=cs(o)?as:is,c=cs(o)?f?F0:as:is;e.texParameteri(i,fr,h),e.texParameteri(i,cr,c)}else if(Xd(e,r,s,o))e.generateMipmap(i);else{const l=cs(o)?as:is;e.texParameteri(i,cr,l),e.texParameteri(i,fr,l),e.texParameteri(i,dr,ur),e.texParameteri(i,hr,ur)}}function ia(e,t,n,r,s,o){Fl(e,t,{options:n,width:r,height:s,internalFormat:o})}function Vn(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function Ts(e,t){return t=t||{},t.cubeFaceOrder||[Ir,w0,P0,I0,C0,B0]}function As(e,t){const r=Ts(e,t).map(function(s,o){return{face:s,ndx:o}});return r.sort(function(s,o){return s.face-o.face}),r}function wl(e,t,n,r){r=r||ht.textureOptions;const s=r.target||Le,o=r.level||0;let a=n.width,i=n.height;const l=r.internalFormat||r.format||q,u=pn(l),f=r.format||u.format,h=r.type||u.type;if(e.bindTexture(s,t),s===Ue){const c=n.width,d=n.height;let m,_;if(c/6===d)m=d,_=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===c)m=c,_=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3===d/2)m=c/3,_=[0,0,1,0,2,0,0,1,1,1,2,1];else if(c/2===d/3)m=c/2,_=[0,0,1,0,0,1,1,1,0,2,1,2];else throw new Error(`can't figure out cube map from element: ${n.src?n.src:n.nodeName}`);const v=vl();v?(v.canvas.width=m,v.canvas.height=m,a=m,i=m,ot(e,r,()=>{As(e,r).forEach(function(x){const y=_[x.ndx*2+0]*m,E=_[x.ndx*2+1]*m;v.drawImage(n,y,E,m,m,0,0,m,m),e.texImage2D(x.face,o,l,f,h,v.canvas)}),v.canvas.width=1,v.canvas.height=1})):typeof createImageBitmap<"u"&&(a=m,i=m,As(e,r).forEach(function(x){const y=_[x.ndx*2+0]*m,E=_[x.ndx*2+1]*m;e.texImage2D(x.face,o,l,m,m,0,f,h,null),createImageBitmap(n,y,E,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(S){ot(e,r,()=>{e.bindTexture(s,t),e.texImage2D(x.face,o,l,f,h,S),Vn(r)&&ia(e,t,r,a,i,l)})})}))}else s===mt||s===dt?ot(e,r,()=>{const c=Math.min(n.width,n.height),d=Math.max(n.width,n.height),m=d/c;if(m%1!==0)throw new Error("can not compute 3D dimensions of element");const _=n.width===d?1:0,v=n.height===d?1:0;e.pixelStorei(lo,1),e.pixelStorei(pl,n.width),e.pixelStorei(xl,0),e.pixelStorei(yl,0),e.texImage3D(s,o,l,c,c,c,0,f,h,null);for(let x=0;x<m;++x){const y=x*c*_,E=x*c*v;e.pixelStorei(bl,y),e.pixelStorei(El,E),e.texSubImage3D(s,o,0,0,x,c,c,1,f,h,n)}Tl(e)}):ot(e,r,()=>{e.texImage2D(s,o,l,f,h,n)});Vn(r)&&ia(e,t,r,a,i,l),Al(e,t,r)}function $n(){}function Yd(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function Kd(e,t){return t===void 0&&!Yd(e)?"anonymous":t}function Wd(e,t,n){n=n||$n;let r;if(t=t!==void 0?t:ht.crossOrigin,t=Kd(e,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const s=function(){r.removeEventListener("error",o),r.removeEventListener("load",a),r=null},o=function(){const l="couldn't load image: "+e;el(l),n(l,r),s()},a=function(){n(null,r),s()};return r.addEventListener("error",o),r.addEventListener("load",a),r.src=e,r}else if(typeof ImageBitmap<"u"){let s,o;const a=function(){n(s,o)},i={};t&&(i.mode="cors"),fetch(e,i).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){o=l,setTimeout(a)}).catch(function(l){s=l,setTimeout(a)}),r=null}return r}function Pl(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function co(e,t,n){return Pl(e)?(setTimeout(function(){n(null,e)}),e):Wd(e,t,n)}function fo(e,t,n){n=n||ht.textureOptions;const r=n.target||Le;if(e.bindTexture(r,t),n.color===!1)return;const s=qd(n.color);if(r===Ue)for(let o=0;o<6;++o)e.texImage2D(Ir+o,0,q,1,1,0,q,X,s);else r===mt||r===dt?e.texImage3D(r,0,q,1,1,1,0,q,X,s):e.texImage2D(r,0,q,1,1,0,q,X,s)}function jd(e,t,n,r){return r=r||$n,n=n||ht.textureOptions,fo(e,t,n),n=uo(e,n),co(n.src,n.crossOrigin,function(o,a){o?r(o,t,a):(wl(e,t,a,n),r(null,t,a))})}function Zd(e,t,n,r){r=r||$n;const s=n.src;if(s.length!==6)throw new Error("there must be 6 urls for a cubemap");const o=n.level||0,a=n.internalFormat||n.format||q,i=pn(a),l=n.format||i.format,u=n.type||X,f=n.target||Le;if(f!==Ue)throw new Error("target must be TEXTURE_CUBE_MAP");fo(e,t,n),n=uo(e,n);let h=6;const c=[],d=Ts(e,n);let m;function _(v){return function(x,y){--h,x?c.push(x):y.width!==y.height?c.push("cubemap face img is not a square: "+y.src):ot(e,n,()=>{e.bindTexture(f,t),h===5?Ts().forEach(function(E){e.texImage2D(E,o,a,l,u,y)}):e.texImage2D(v,o,a,l,u,y),Vn(n)&&e.generateMipmap(f)}),h===0&&r(c.length?c:void 0,t,m)}}m=s.map(function(v,x){return co(v,n.crossOrigin,_(d[x]))})}function Qd(e,t,n,r){r=r||$n;const s=n.src,o=n.internalFormat||n.format||q,a=pn(o),i=n.format||a.format,l=n.type||X,u=n.target||dt;if(u!==mt&&u!==dt)throw new Error("target must be TEXTURE_3D or TEXTURE_2D_ARRAY");fo(e,t,n),n=uo(e,n);let f=s.length;const h=[];let c;const d=n.level||0;let m=n.width,_=n.height;const v=s.length;let x=!0;function y(E){return function(S,b){--f,S?h.push(S):ot(e,n,()=>{if(e.bindTexture(u,t),x){x=!1,m=n.width||b.width,_=n.height||b.height,e.texImage3D(u,d,o,m,_,v,0,i,l,null);for(let T=0;T<v;++T)e.texSubImage3D(u,d,0,0,T,m,_,1,i,l,b)}else{let T=b,F;(b.width!==m||b.height!==_)&&(F=vl(),T=F.canvas,F.canvas.width=m,F.canvas.height=_,F.drawImage(b,0,0,m,_)),e.texSubImage3D(u,d,0,0,E,m,_,1,i,l,T),F&&T===F.canvas&&(F.canvas.width=0,F.canvas.height=0)}Vn(n)&&e.generateMipmap(u)}),f===0&&r(h.length?h:void 0,t,c)}}c=s.map(function(E,S){return co(E,n.crossOrigin,y(S))})}function Jd(e,t,n,r){r=r||ht.textureOptions;const s=r.target||Le;e.bindTexture(s,t);const o=r.level||0,a=r.internalFormat||r.format||q,i=pn(a),l=r.format||i.format,u=r.type||Rl(e,n,i.type);if(fn(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const _=Ja(u);n=new _(n)}const{width:f,height:h,depth:c}=eh(s,n,r,a,l,u),d=Sl(a);Tl(e),e.pixelStorei(lo,r.unpackAlignment||1);let m=0;return ot(e,r,()=>{let _=0;const{blockWidth:v,blockHeight:x,bytesPerBlock:y}=zd(a,u);for(;_<n.byteLength;){const E=Math.max(1,f>>m),S=Math.max(1,h>>m),b=s===Le?Math.max(1,c>>m):c,T=Math.ceil(E/v),F=Math.ceil(S/x),I=s===Ue?6:1,g=T*F*y*b*I;if(_+g>n.byteLength)throw new Error("src size does not match number of mip levels");const A=n.subarray(_/n.BYTES_PER_ELEMENT,(_+g)/n.BYTES_PER_ELEMENT),B=o+m;if(s===Ue){const K=A.length/6;As(e,r).forEach(Z=>{const me=K*Z.ndx,be=A.subarray(me,me+K);d?e.compressedTexImage2D(Z.face,B,a,E,S,0,be):e.texImage2D(Z.face,B,a,E,S,0,l,u,be)})}else s===mt||s===dt?e.texImage3D(s,B,a,E,S,b,0,l,u,A):d?e.compressedTexImage2D(s,B,a,E,S,0,A):e.texImage2D(s,B,a,E,S,0,l,u,A);if(++m,_+=g,E===1&&S===1&&b===1&&_!==n.byteLength)throw new Error("src size has more data than can fit in mip levels")}}),{width:f,height:h,depth:c,type:u,lastMipLevelUploaded:o+m-1}}function eh(e,t,n,r,s,o){let a=n.width,i=n.height,l=n.depth;const u=Sl(r);if(u){if(!a||!i)throw new Error("compressed texture needs to set width and height!");l=l||1}else{const f=gl(r,o),h=t.byteLength/f;if(h%1)throw new Error(`length wrong size for format: ${_l(In,s)}`);if(u&&(!a||!i))throw new Error("compressed texture needs to set width and height!");let c;if(e===mt||e===dt)if(!a&&!i&&!l){const d=Math.cbrt(h);if(d%1!==0)throw new Error(`can't guess cube size of array of numElements: ${h}`);a=d,i=d,l=d}else a&&(!i||!l)?(c=er(In,e,i,l,h/a),i=c.width,l=c.height):i&&(!a||!l)?(c=er(In,e,a,l,h/i),a=c.width,l=c.height):(c=er(In,e,a,i,h/l),a=c.width,i=c.height);else c=er(In,e,a,i,h),a=c.width,i=c.height}return{width:a,height:i,depth:l}}function th(e,t,n){const r=n.target||Le;e.bindTexture(r,t);const s=n.level||0,o=n.internalFormat||n.format||q,a=pn(o),i=n.format||a.format,l=n.type||a.type;ot(e,n,()=>{if(r===Ue)for(let u=0;u<6;++u)e.texImage2D(Ir+u,s,o,n.width,n.height,0,i,l,null);else r===mt||r===dt?e.texImage3D(r,s,o,n.width,n.height,n.depth,0,i,l,null):e.texImage2D(r,s,o,n.width,n.height,0,i,l,null)})}function Il(e,t,n){n=n||$n,t=t||ht.textureOptions;const r=e.createTexture(),s=t.target||Le;let o=t.width||1,a=t.height||1,i=0;const l=t.internalFormat||q;e.bindTexture(s,r),s===Ue&&(e.texParameteri(s,dr,ur),e.texParameteri(s,hr,ur));let u=t.src;if(u)if(typeof u=="function"&&(u=u(e,t)),typeof u=="string")jd(e,r,t,n);else if(fn(u)||Array.isArray(u)&&(typeof u[0]=="number"||Array.isArray(u[0])||fn(u[0]))){const f=Jd(e,r,u,t);o=f.width,a=f.height,i=f.lastMipLevelUploaded}else Array.isArray(u)&&(typeof u[0]=="string"||Pl(u[0]))?s===Ue?Zd(e,r,t,n):Qd(e,r,t,n):(wl(e,r,u,t),o=u.width,a=u.height);else th(e,r,t);return Vn(t)&&Fl(e,r,{options:t,width:o,height:a,internalFormat:l,lastMipLevelUploaded:i}),Al(e,r,t),r}function Cl(e,t,n,r,s,o){r=r||n.width,s=s||n.height,o=o||n.depth;const a=n.target||Le;e.bindTexture(a,t);const i=n.level||0,l=n.internalFormat||n.format||q,u=pn(l),f=n.format||u.format;let h;const c=n.src;if(c&&(fn(c)||Array.isArray(c)&&typeof c[0]=="number")?h=n.type||Rl(e,c,u.type):h=n.type||u.type,a===Ue)for(let d=0;d<6;++d)e.texImage2D(Ir+d,i,l,r,s,0,f,h,null);else a===mt||a===dt?e.texImage3D(a,i,l,r,s,o,0,f,h,null):e.texImage2D(a,i,l,r,s,0,f,h,null)}const ho=el;function Bl(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const mr=33984,Cr=34962,nh=34963,rh=35713,sh=35714,oh=35632,ih=35633,ah=35981,Dl=35718,lh=35721,uh=35971,ch=35382,fh=35396,dh=35398,hh=35392,mh=35395,Br=5126,Ml=35664,Nl=35665,kl=35666,mo=5124,Ll=35667,Ul=35668,Ol=35669,Gl=35670,Vl=35671,Hl=35672,zl=35673,Xl=35674,$l=35675,ql=35676,_h=35678,vh=35680,ph=35679,xh=35682,bh=35685,Eh=35686,yh=35687,gh=35688,Sh=35689,Rh=35690,Th=36289,Ah=36292,Fh=36293,_o=5125,Yl=36294,Kl=36295,Wl=36296,wh=36298,Ph=36299,Ih=36300,Ch=36303,Bh=36306,Dh=36307,Mh=36308,Nh=36311,Dr=3553,Mr=34067,vo=32879,Nr=35866,C={};function jl(e,t){return C[t].bindPoint}function kh(e,t){return function(n){e.uniform1f(t,n)}}function Lh(e,t){return function(n){e.uniform1fv(t,n)}}function Uh(e,t){return function(n){e.uniform2fv(t,n)}}function Oh(e,t){return function(n){e.uniform3fv(t,n)}}function Gh(e,t){return function(n){e.uniform4fv(t,n)}}function Zl(e,t){return function(n){e.uniform1i(t,n)}}function Ql(e,t){return function(n){e.uniform1iv(t,n)}}function Jl(e,t){return function(n){e.uniform2iv(t,n)}}function eu(e,t){return function(n){e.uniform3iv(t,n)}}function tu(e,t){return function(n){e.uniform4iv(t,n)}}function Vh(e,t){return function(n){e.uniform1ui(t,n)}}function Hh(e,t){return function(n){e.uniform1uiv(t,n)}}function zh(e,t){return function(n){e.uniform2uiv(t,n)}}function Xh(e,t){return function(n){e.uniform3uiv(t,n)}}function $h(e,t){return function(n){e.uniform4uiv(t,n)}}function qh(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Yh(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Kh(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Wh(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function jh(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Zh(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function Qh(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Jh(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function em(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function ue(e,t,n,r){const s=jl(e,t);return Xn(e)?function(o){let a,i;!o||Ar(e,o)?(a=o,i=null):(a=o.texture,i=o.sampler),e.uniform1i(r,n),e.activeTexture(mr+n),e.bindTexture(s,a),e.bindSampler(n,i)}:function(o){e.uniform1i(r,n),e.activeTexture(mr+n),e.bindTexture(s,o)}}function ce(e,t,n,r,s){const o=jl(e,t),a=new Int32Array(s);for(let i=0;i<s;++i)a[i]=n+i;return Xn(e)?function(i){e.uniform1iv(r,a),i.forEach(function(l,u){e.activeTexture(mr+a[u]);let f,h;!l||Ar(e,l)?(f=l,h=null):(f=l.texture,h=l.sampler),e.bindSampler(n,h),e.bindTexture(o,f)})}:function(i){e.uniform1iv(r,a),i.forEach(function(l,u){e.activeTexture(mr+a[u]),e.bindTexture(o,l)})}}C[Br]={Type:Float32Array,size:4,setter:kh,arraySetter:Lh};C[Ml]={Type:Float32Array,size:8,setter:Uh,cols:2};C[Nl]={Type:Float32Array,size:12,setter:Oh,cols:3};C[kl]={Type:Float32Array,size:16,setter:Gh,cols:4};C[mo]={Type:Int32Array,size:4,setter:Zl,arraySetter:Ql};C[Ll]={Type:Int32Array,size:8,setter:Jl,cols:2};C[Ul]={Type:Int32Array,size:12,setter:eu,cols:3};C[Ol]={Type:Int32Array,size:16,setter:tu,cols:4};C[_o]={Type:Uint32Array,size:4,setter:Vh,arraySetter:Hh};C[Yl]={Type:Uint32Array,size:8,setter:zh,cols:2};C[Kl]={Type:Uint32Array,size:12,setter:Xh,cols:3};C[Wl]={Type:Uint32Array,size:16,setter:$h,cols:4};C[Gl]={Type:Uint32Array,size:4,setter:Zl,arraySetter:Ql};C[Vl]={Type:Uint32Array,size:8,setter:Jl,cols:2};C[Hl]={Type:Uint32Array,size:12,setter:eu,cols:3};C[zl]={Type:Uint32Array,size:16,setter:tu,cols:4};C[Xl]={Type:Float32Array,size:32,setter:qh,rows:2,cols:2};C[$l]={Type:Float32Array,size:48,setter:Yh,rows:3,cols:3};C[ql]={Type:Float32Array,size:64,setter:Kh,rows:4,cols:4};C[bh]={Type:Float32Array,size:32,setter:Wh,rows:2,cols:3};C[Eh]={Type:Float32Array,size:32,setter:Zh,rows:2,cols:4};C[yh]={Type:Float32Array,size:48,setter:jh,rows:3,cols:2};C[gh]={Type:Float32Array,size:48,setter:Jh,rows:3,cols:4};C[Sh]={Type:Float32Array,size:64,setter:Qh,rows:4,cols:2};C[Rh]={Type:Float32Array,size:64,setter:em,rows:4,cols:3};C[_h]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dr};C[vh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mr};C[ph]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:vo};C[xh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dr};C[Th]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nr};C[Ah]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nr};C[Fh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mr};C[wh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dr};C[Ph]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:vo};C[Ih]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mr};C[Ch]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nr};C[Bh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Dr};C[Dh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:vo};C[Mh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Mr};C[Nh]={Type:null,size:0,setter:ue,arraySetter:ce,bindPoint:Nr};function kr(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Cr,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||Br,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function _t(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Cr,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||mo,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Lr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Cr,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||_o,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function po(e,t,n){const r=n.size,s=n.count;return function(o){e.bindBuffer(Cr,o.buffer);const a=o.size||o.numComponents||r,i=a/s,l=o.type||Br,f=C[l].size*a,h=o.normalize||!1,c=o.offset||0,d=f/s;for(let m=0;m<s;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,i,l,h,f,c+d*m),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+m,o.divisor||0)}}const W={};W[Br]={size:4,setter:kr};W[Ml]={size:8,setter:kr};W[Nl]={size:12,setter:kr};W[kl]={size:16,setter:kr};W[mo]={size:4,setter:_t};W[Ll]={size:8,setter:_t};W[Ul]={size:12,setter:_t};W[Ol]={size:16,setter:_t};W[_o]={size:4,setter:Lr};W[Yl]={size:8,setter:Lr};W[Kl]={size:12,setter:Lr};W[Wl]={size:16,setter:Lr};W[Gl]={size:4,setter:_t};W[Vl]={size:8,setter:_t};W[Hl]={size:12,setter:_t};W[zl]={size:16,setter:_t};W[Xl]={size:4,setter:po,count:2};W[$l]={size:9,setter:po,count:3};W[ql]={size:16,setter:po,count:4};const tm=/ERROR:\s*\d+:(\d+)/gi;function nm(e,t="",n=0){const r=[...t.matchAll(tm)],s=new Map(r.map((o,a)=>{const i=parseInt(o[1]),l=r[a+1],u=l?l.index:t.length,f=t.substring(o.index,u);return[i-1,f]}));return e.split(`
`).map((o,a)=>{const i=s.get(a);return`${a+1+n}: ${o}${i?`

^^^ ${i}`:""}`}).join(`
`)}const aa=/^[ \t]*\n/;function nu(e){let t=0;return aa.test(e)&&(t=1,e=e.replace(aa,"")),{lineOffset:t,shaderSource:e}}function rm(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function sm(e,t,n,r){if(r=r||ho,!e.getShaderParameter(n,rh)){const o=e.getShaderInfoLog(n),{lineOffset:a,shaderSource:i}=nu(e.getShaderSource(n)),l=`${nm(i,o,a)}
Error compiling ${_l(e,t)}: ${o}`;return r(l),l}return""}function xo(e,t,n){let r,s,o;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const u=e;n=u.errorCallback,e=u.attribLocations,r=u.transformFeedbackVaryings,s=u.transformFeedbackMode,o=u.callback}const a=n||ho,i=[],l={errorCallback(u,...f){i.push(u),a(u,...f)},transformFeedbackVaryings:r,transformFeedbackMode:s,callback:o,errors:i};{let u={};Array.isArray(e)?e.forEach(function(f,h){u[f]=t?t[h]:h}):u=e||{},l.attribLocations=u}return l}const om=["VERTEX_SHADER","FRAGMENT_SHADER"];function im(e,t){if(t.indexOf("frag")>=0)return oh;if(t.indexOf("vert")>=0)return ih}function am(e,t,n){const r=e.getAttachedShaders(t);for(const s of r)n.has(s)||e.deleteShader(s);e.deleteProgram(t)}const lm=(e=0)=>new Promise(t=>setTimeout(t,e));function um(e,t,n){const r=e.createProgram(),{attribLocations:s,transformFeedbackVaryings:o,transformFeedbackMode:a}=xo(n);for(let i=0;i<t.length;++i){let l=t[i];if(typeof l=="string"){const u=Bl(l),f=u?u.text:l;let h=e[om[i]];u&&u.type&&(h=im(e,u.type)||h),l=e.createShader(h),e.shaderSource(l,nu(f).shaderSource),e.compileShader(l)}e.attachShader(r,l)}Object.entries(s).forEach(([i,l])=>e.bindAttribLocation(r,l,i));{let i=o;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(r,i,a||ah))}return e.linkProgram(r),r}function cm(e,t,n,r,s){const o=xo(n,r,s),a=new Set(t),i=um(e,t,o);function l(u,f){const h=dm(u,f,o.errorCallback);return h&&am(u,f,a),h}if(o.callback){fm(e,i).then(()=>{const u=l(e,i);o.callback(u,u?void 0:i)});return}return l(e,i)?void 0:i}async function fm(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),r=n?(o,a)=>o.getProgramParameter(a,n.COMPLETION_STATUS_KHR):()=>!0;let s=0;do await lm(s),s=1e3/60;while(!r(e,t))}function dm(e,t,n){if(n=n||ho,!e.getProgramParameter(t,sh)){const s=e.getProgramInfoLog(t);n(`Error in program linking: ${s}`);const a=e.getAttachedShaders(t).map(i=>sm(e,e.getShaderParameter(i,e.SHADER_TYPE),i,n));return`${s}
${a.filter(i=>i).join(`
`)}`}}function hm(e,t,n,r,s){return cm(e,t,n,r,s)}function ru(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const mm=/(\.|\[|]|\w+)/g,_m=e=>e>="0"&&e<="9";function vm(e,t,n,r){const s=e.split(mm).filter(i=>i!=="");let o=0,a="";for(;;){const i=s[o++];a+=i;const l=_m(i[0]),u=l?parseInt(i):i;if(l&&(a+=s[o++]),o===s.length){n[u]=t;break}else{const h=s[o++],c=h==="[",d=n[u]||(c?[]:{});n[u]=d,n=d,r[a]=r[a]||(function(m){return function(_){su(m,_)}})(d),a+=h}}}function pm(e,t){let n=0;function r(i,l,u){const f=l.name.endsWith("[0]"),h=l.type,c=C[h];if(!c)throw new Error(`unknown type: 0x${h.toString(16)}`);let d;if(c.bindPoint){const m=n;n+=l.size,f?d=c.arraySetter(e,h,m,u,l.size):d=c.setter(e,h,m,u,l.size)}else c.arraySetter&&f?d=c.arraySetter(e,u):d=c.setter(e,u);return d.location=u,d}const s={},o={},a=e.getProgramParameter(t,Dl);for(let i=0;i<a;++i){const l=e.getActiveUniform(t,i);if(ru(l))continue;let u=l.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const f=e.getUniformLocation(t,l.name);if(f){const h=r(t,l,f);s[u]=h,vm(u,h,o,s)}}return s}function xm(e,t){const n={},r=e.getProgramParameter(t,uh);for(let s=0;s<r;++s){const o=e.getTransformFeedbackVarying(t,s);n[o.name]={index:s,type:o.type,size:o.size}}return n}function bm(e,t){const n=e.getProgramParameter(t,Dl),r=[],s=[];for(let i=0;i<n;++i){s.push(i),r.push({});const l=e.getActiveUniform(t,i);r[i].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){const l=i[0],u=i[1];e.getActiveUniforms(t,s,e[l]).forEach(function(f,h){r[h][u]=f})});const o={},a=e.getProgramParameter(t,ch);for(let i=0;i<a;++i){const l=e.getActiveUniformBlockName(t,i),u={index:e.getUniformBlockIndex(t,l),usedByVertexShader:e.getActiveUniformBlockParameter(t,i,fh),usedByFragmentShader:e.getActiveUniformBlockParameter(t,i,dh),size:e.getActiveUniformBlockParameter(t,i,hh),uniformIndices:e.getActiveUniformBlockParameter(t,i,mh)};u.used=u.usedByVertexShader||u.usedByFragmentShader,o[l]=u}return{blockSpecs:o,uniformData:r}}function su(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):su(e[n],t[n])}}function ou(e,...t){const n=e.uniformSetters||e,r=t.length;for(let s=0;s<r;++s){const o=t[s];if(Array.isArray(o)){const a=o.length;for(let i=0;i<a;++i)ou(n,o[i])}else for(const a in o){const i=n[a];i&&i(o[a])}}}function Em(e,t){const n={},r=e.getProgramParameter(t,lh);for(let s=0;s<r;++s){const o=e.getActiveAttrib(t,s);if(ru(o))continue;const a=e.getAttribLocation(t,o.name),i=W[o.type],l=i.setter(e,a,i);l.location=a,n[o.name]=l}return n}function ym(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function gm(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(ym(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(nh,n.indices))}function la(e,t){const n=pm(e,t),r=Em(e,t),s={program:t,uniformSetters:n,attribSetters:r,uniformLocations:Object.fromEntries(Object.entries(n).map(([o,a])=>[o,a.location])),attribLocations:Object.fromEntries(Object.entries(r).map(([o,a])=>[o,a.location]))};return Xn(e)&&(s.uniformBlockSpec=bm(e,t),s.transformFeedbackInfo=xm(e,t)),s}const Sm=/\s|{|}|;/;function Rm(e,t,n,r,s){const o=xo(n,r,s),a=[];if(t=t.map(function(u){if(!Sm.test(u)){const f=Bl(u);if(f)u=f.text;else{const h=`no element with id: ${u}`;o.errorCallback(h),a.push(h)}}return u}),a.length)return rm(o,"");const i=o.callback;i&&(o.callback=(u,f)=>{i(u,u?void 0:la(e,f))});const l=hm(e,t,o);return l?la(e,l):null}const Tm=4,ua=5123;function Am(e,t,n,r,s,o){n=n===void 0?Tm:n;const a=t.indices,i=t.elementType,l=r===void 0?t.numElements:r;s=s===void 0?0:s,i||a?o!==void 0?e.drawElementsInstanced(n,l,i===void 0?ua:t.elementType,s,o):e.drawElements(n,l,i===void 0?ua:t.elementType,s):o!==void 0?e.drawArraysInstanced(n,s,l,o):e.drawArrays(n,s,l)}const iu=36160,Rt=36161,Fm=3553,wm=5121,Pm=6402,Im=6408,Cm=33190,Bm=36012,Dm=35056,Mm=36013,Nm=32854,km=32855,Lm=36194,au=33189,lu=6401,uu=36168,bo=34041,Fs=36064,Ur=36096,cu=36128,Eo=33306,ws=33071,Ps=9729,fu=[{format:Im,type:wm,min:Ps,wrap:ws},{format:bo}],we={};we[bo]=Eo;we[lu]=cu;we[uu]=cu;we[Pm]=Ur;we[au]=Ur;we[Cm]=Ur;we[Bm]=Ur;we[Dm]=Eo;we[Mm]=Eo;function Um(e,t){return we[e]||we[t]}const vt={};vt[Nm]=!0;vt[km]=!0;vt[Lm]=!0;vt[bo]=!0;vt[au]=!0;vt[lu]=!0;vt[uu]=!0;function Om(e){return vt[e]}const Gm=32;function Vm(e){return e>=Fs&&e<Fs+Gm}function Hm(e,t,n,r){const s=iu,o=e.createFramebuffer();e.bindFramebuffer(s,o),n=n||e.drawingBufferWidth,r=r||e.drawingBufferHeight,t=t||fu;const a=[],i={framebuffer:o,attachments:[],width:n,height:r};return t.forEach(function(l,u){let f=l.attachment;const h=l.samples,c=l.format;let d=l.attachmentPoint||Um(c,l.internalFormat);if(d||(d=Fs+u),Vm(d)&&a.push(d),!f)if(h!==void 0||Om(c))f=e.createRenderbuffer(),e.bindRenderbuffer(Rt,f),h>1?e.renderbufferStorageMultisample(Rt,h,c,n,r):e.renderbufferStorage(Rt,c,n,r);else{const m=Object.assign({},l);m.width=n,m.height=r,m.auto===void 0&&(m.auto=!1,m.min=m.min||m.minMag||Ps,m.mag=m.mag||m.minMag||Ps,m.wrapS=m.wrapS||m.wrap||ws,m.wrapT=m.wrapT||m.wrap||ws),f=Il(e,m)}if(tl(e,f))e.framebufferRenderbuffer(s,d,Rt,f);else if(Ar(e,f))l.layer!==void 0?e.framebufferTextureLayer(s,d,f,l.level||0,l.layer):e.framebufferTexture2D(s,d,l.target||Fm,f,l.level||0);else throw new Error("unknown attachment type");i.attachments.push(f)}),e.drawBuffers&&e.drawBuffers(a),i}function zm(e,t,n,r,s){r=r||e.drawingBufferWidth,s=s||e.drawingBufferHeight,t.width=r,t.height=s,n=n||fu,n.forEach(function(o,a){const i=t.attachments[a],l=o.format,u=o.samples;if(u!==void 0||tl(e,i))e.bindRenderbuffer(Rt,i),u>1?e.renderbufferStorageMultisample(Rt,u,l,r,s):e.renderbufferStorage(Rt,l,r,s);else if(Ar(e,i))Cl(e,i,o,r,s);else throw new Error("unknown attachment type")})}function ca(e,t,n){n=n||iu,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}class oe{constructor(t,n,r,s){this.gl=t,this.internalFormat=n,this.format=r,this.texture=Il(t,{width:t.canvas.width,height:t.canvas.height,internalFormat:n,format:r,type:t.UNSIGNED_BYTE,minMag:s,wrap:t.CLAMP_TO_EDGE}),this.framebufferInfo=Hm(t,[{attachment:this.texture}],t.canvas.width,t.canvas.height)}framebufferInfo;texture;get isRGBA8(){return this.internalFormat===this.gl.RGBA8&&this.format===this.gl.RGBA}get isR8(){return this.internalFormat===this.gl.R8&&this.format===this.gl.RED}static createRGBA8(t,n=t.LINEAR){return new oe(t,t.RGBA8,t.RGBA,n)}static createRGB8(t,n=t.LINEAR){return new oe(t,t.RGB8,t.RGB,n)}static createR8(t,n=t.LINEAR){return new oe(t,t.R8,t.RED,n)}resize(t,n){Cl(this.gl,this.texture,{width:t,height:n}),zm(this.gl,this.framebufferInfo,[{attachment:this.texture}],t,n)}}class Xm{constructor(t){this.canvas=t;const n=t.getContext("webgl2");if(!n)throw new Error("WebGL2 not available for pipeline");this.gl=n,this.bitmapRenderTarget=oe.createRGBA8(n)}passChain=[];bitmapRenderTarget;gl;addPass(t){this.passChain.push(t)}applyBitmap(t,n){this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n)}resize(t,n){this.canvas.width=t,this.canvas.height=n,this.bitmapRenderTarget.resize(t,n)}postprocess(t){}async render(t){(this.canvas.width!==t.width||this.canvas.height!==t.height)&&this.resize(t.width,t.height),this.applyBitmap(this.bitmapRenderTarget.texture,t);const n=this.passChain.filter(a=>a.enabled);if(n.length===0)throw new Error("No passes in pipeline");let r=this.bitmapRenderTarget;for(let a=0;a<n.length-1;a++)r=n[a].apply(r);const o=n[n.length-1].applyToScreen(r)??r;return this.postprocess(o)}}const $m=`#version 300 es

in vec2 position;
in vec2 texcoord;

out vec2 v_uv;

void main() {
  v_uv = texcoord;
  gl_Position = vec4(position, 0.0, 1.0);
}`;class xn{constructor(t,n){this.gl=t,this.settings=n,this.quadBufferInfo=A0.createXYQuadBufferInfo(t)}get enabled(){return this.settings.enabled}set enabled(t){this.settings.enabled=t}quadBufferInfo;apply(t){return this.applyInternal(t,!1)}applyToScreen(t){return this.applyInternal(t,!0)}executeProgram(t,n,r,s=!1){this.settings.input=n.texture,t.uniformSetters.u_texelSize&&this.settings.setTextelSize(n.framebufferInfo.width,n.framebufferInfo.height),r&&!s&&(r.framebufferInfo.width!==this.gl.canvas.width||r.framebufferInfo.height!==this.gl.canvas.height)&&r.resize(this.gl.canvas.width,this.gl.canvas.height);const o=r?r.framebufferInfo.width:this.gl.canvas.width,a=r?r.framebufferInfo.height:this.gl.canvas.height;r?ca(this.gl,r.framebufferInfo):ca(this.gl,null),this.gl.useProgram(t.program),this.gl.viewport(0,0,o,a),gm(this.gl,t,this.quadBufferInfo),ou(t,this.settings.uniforms),Am(this.gl,this.quadBufferInfo)}createProgramInfo(t){return Rm(this.gl,[$m,t])}}const qm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;        // R8 luma input
uniform vec2      u_texelSize;    // 1 / texture resolution

uniform float u_sigmaSpatial;     // spatial Gaussian sigma
uniform float u_sigmaRange;       // range (luma) Gaussian sigma
uniform int   u_kernelRadius;     // must be <= MAX_KERNEL_RADIUS

out vec4 outColor;

const int MAX_KERNEL_RADIUS = 5;

void main() {

    vec2 uv = v_uv;

    // Center pixel (luma)
    float centerLuma = texture(u_input, uv).r;

    float weightedSum = 0.0;
    float weightTotal = 0.0;

    // Precompute inverse variances
    float invSpatialVar = 1.0 / (2.0 * u_sigmaSpatial * u_sigmaSpatial);
    float invRangeVar   = 1.0 / (2.0 * u_sigmaRange   * u_sigmaRange);

    for (int ky = -MAX_KERNEL_RADIUS; ky <= MAX_KERNEL_RADIUS; ++ky) {
        for (int kx = -MAX_KERNEL_RADIUS; kx <= MAX_KERNEL_RADIUS; ++kx) {

            // Branchless kernel mask
            float maskX = step(float(abs(kx)), float(u_kernelRadius));
            float maskY = step(float(abs(ky)), float(u_kernelRadius));
            float kernelMask = maskX * maskY;

            vec2 offsetTexel =
                vec2(float(kx), float(ky)) * u_texelSize;

            float neighborLuma =
                texture(u_input, uv + offsetTexel).r;

            float spatialDist2 =
                float(kx * kx + ky * ky);

            float rangeDist2 =
                (neighborLuma - centerLuma) *
                (neighborLuma - centerLuma);

            float weightSpatial =
                exp(-spatialDist2 * invSpatialVar);

            float weightRange =
                exp(-rangeDist2 * invRangeVar);

            float kernelWeight =
                weightSpatial * weightRange * kernelMask;

            weightedSum += neighborLuma * kernelWeight;
            weightTotal += kernelWeight;
        }
    }

    float filteredLuma = weightedSum / weightTotal;

    outColor = vec4(filteredLuma,
                    filteredLuma,
                    filteredLuma,
                    1.0);
}
`;class Ym extends xn{bilateralProgramInfo;outputRenderTarget;constructor(t,n){super(t,n),this.bilateralProgramInfo=this.createProgramInfo(qm),this.outputRenderTarget=oe.createR8(t)}applyInternal(t,n){if(!t.isR8)throw new Error("BilateralPass only supports R8 render targets");return this.executeProgram(this.bilateralProgramInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}class bn{_enabled=!0;get enabled(){return this._enabled}set enabled(t){this._enabled=t}get input(){return this.uniforms.u_input}set input(t){this.uniforms.u_input=t}get textelSize(){return this.uniforms.u_texelSize}setTextelSize(t,n){this.uniforms.u_texelSize=[1/t,1/n]}uniforms={}}class Km extends bn{get sigmaSpatial(){return this.uniforms.u_sigmaSpatial}set sigmaSpatial(t){this.uniforms.u_sigmaSpatial=t}get sigmaRange(){return this.uniforms.u_sigmaRange}set sigmaRange(t){this.uniforms.u_sigmaRange=t}get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}}const Wm=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;

out vec4 outColor;

void main() {
    vec3 color = texture(u_input, v_uv).rgb;

    // Rec.709 luma
    float luma = dot(color, vec3(
        0.2126,  // R
        0.7152,  // G
        0.0722   // B
    ));

    outColor = vec4(luma, luma, luma, 1.0);
}
`;class jm extends xn{lum709ProgramInfo;outputRenderTarget;constructor(t){super(t,new bn),this.lum709ProgramInfo=this.createProgramInfo(Wm),this.outputRenderTarget=oe.createR8(t)}applyInternal(t,n){if(!t.isRGBA8)throw new Error("Rec709LumPass only supports RGBA8 render targets");return this.executeProgram(this.lum709ProgramInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}const Zm=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;
uniform int u_flipX;
uniform int u_flipY;

out vec4 outColor;

void main() {
    vec2 uv = v_uv;
    if (u_flipX == 1) uv.x = 1.0 - uv.x;
    if (u_flipY == 1) uv.y = 1.0 - uv.y;
    outColor = texture(u_input, uv);
}
`;class Qm extends xn{programInfo;outputRenderTarget;constructor(t,n){super(t,n),this.programInfo=this.createProgramInfo(Zm),this.outputRenderTarget=oe.createR8(t)}applyInternal(t,n){if(!t.isR8)throw new Error("OrientationPass expects R8 render targets");return this.executeProgram(this.programInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}class Jm extends bn{get flipX(){return!!this.uniforms.u_flipX}set flipX(t){this.uniforms.u_flipX=t?1:0}get flipY(){return!!this.uniforms.u_flipY}set flipY(t){this.uniforms.u_flipY=t?1:0}}const e_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2      u_texelSize;

out vec4 outColor;

const float sobelDerivative[5] = float[5](
    -2.0, -1.0, 0.0, 1.0, 2.0
);

const float sobelSmoothing[5] = float[5](
     1.0,  4.0, 6.0, 4.0, 1.0
);

const float SOBEL_DIRECTION_NORMALIZATION = 48.0;

void main()
{
    float gradientX = 0.0;
    float gradientY = 0.0;

    for (int offsetY = 0; offsetY < 5; offsetY++)
    {
        for (int offsetX = 0; offsetX < 5; offsetX++)
        {
            vec2 sampleOffset =
                vec2(float(offsetX - 2), float(offsetY - 2)) * u_texelSize;

            float sampleLuma =
                texture(u_input, v_uv + sampleOffset).r;

            gradientX +=
                sampleLuma *
                sobelDerivative[offsetX] *
                sobelSmoothing[offsetY];

            gradientY +=
                sampleLuma *
                sobelSmoothing[offsetX] *
                sobelDerivative[offsetY];
        }
    }

    // Normalize to [-1, +1]
    float gxNorm = gradientX / SOBEL_DIRECTION_NORMALIZATION;
    float gyNorm = gradientY / SOBEL_DIRECTION_NORMALIZATION;

    // Map to [0, 65535]
    float gxU16 = (gxNorm * 0.5 + 0.5) * 65535.0;
    float gyU16 = (gyNorm * 0.5 + 0.5) * 65535.0;

    // Split into bytes
    float gxHigh = floor(gxU16 / 256.0);
    float gxLow  = mod(gxU16, 256.0);

    float gyHigh = floor(gyU16 / 256.0);
    float gyLow  = mod(gyU16, 256.0);

    // Store as normalized bytes
    outColor = vec4(
        gxHigh / 255.0,
        gxLow  / 255.0,
        gyHigh / 255.0,
        gyLow  / 255.0
    );
}
`,t_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;      // Input luma texture (luma in .r)
uniform vec2      u_texelSize;  // 1.0 / texture resolution

uniform float u_sigmaSmall;
uniform float u_sigmaLarge;

out vec4 outColor;

/*
    Hard cap to keep footprint bounded.
*/
const float MAX_SIGMA_LARGE = 3.0;
const int   GAUSSIAN_RADIUS = 9;

void main()
{
    float sigmaSmall = u_sigmaSmall;
    float sigmaLarge = min(u_sigmaLarge, MAX_SIGMA_LARGE);

    float invTwoSigmaSmallSq =
        1.0 / (2.0 * sigmaSmall * sigmaSmall);

    float invTwoSigmaLargeSq =
        1.0 / (2.0 * sigmaLarge * sigmaLarge);

    float blurSmall = 0.0;
    float blurLarge = 0.0;

    float weightSumSmall = 0.0;
    float weightSumLarge = 0.0;

    for (int y = -GAUSSIAN_RADIUS; y <= GAUSSIAN_RADIUS; y++)
    {
        for (int x = -GAUSSIAN_RADIUS; x <= GAUSSIAN_RADIUS; x++)
        {
            vec2 offset =
                vec2(float(x), float(y)) * u_texelSize;

            float luma =
                texture(u_input, v_uv + offset).r;

            float distSq =
                float(x * x + y * y);

            float weightSmall =
                exp(-distSq * invTwoSigmaSmallSq);

            float weightLarge =
                exp(-distSq * invTwoSigmaLargeSq);

            blurSmall += luma * weightSmall;
            blurLarge += luma * weightLarge;

            weightSumSmall += weightSmall;
            weightSumLarge += weightLarge;
        }
    }

    blurSmall /= weightSumSmall;
    blurLarge /= weightSumLarge;

    // Difference of Gaussians
    float dog = blurSmall - blurLarge;

    /*
        dog â [-1, +1] by construction.
        Map to signed 32-bit range.
    */
    float dogSigned32 =
        clamp(dog, -1.0, 1.0) * 2147483647.0;

    // Convert to unsigned for packing
    float dogUnsigned32 =
        dogSigned32 + 2147483648.0;

    // Split into 4 bytes (big-endian)
    float byteR = floor(dogUnsigned32 / 16777216.0);          // >> 24
    float byteG = floor(mod(dogUnsigned32 / 65536.0, 256.0)); // >> 16
    float byteB = floor(mod(dogUnsigned32 / 256.0, 256.0));   // >> 8
    float byteA = floor(mod(dogUnsigned32, 256.0));           // >> 0

    outColor = vec4(
        byteR / 255.0,
        byteG / 255.0,
        byteB / 255.0,
        byteA / 255.0
    );
}
`;function n_(e){const t=e-1;return t*t*t+1}function fa(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function r_(e,{delay:t=0,duration:n=400,easing:r=n_,x:s=0,y:o=0,opacity:a=0}={}){const i=getComputedStyle(e),l=+i.opacity,u=i.transform==="none"?"":i.transform,f=l*(1-a),[h,c]=fa(s),[d,m]=fa(o);return{delay:t,duration:n,easing:r,css:(_,v)=>`
			transform: ${u} translate(${(1-_)*h}${c}, ${(1-_)*d}${m});
			opacity: ${l-f*v}`}}class s_ extends xn{constructor(t,n){super(t,n),this.sobelPassSettings=n,this.sobelGradientsProgramInfo=this.createProgramInfo(e_),this.sobelGradientsRenderTarget=oe.createRGBA8(t),this.dogProgramInfo=this.createProgramInfo(t_),this.dogRenderTarget=oe.createRGBA8(t)}sobelGradientsProgramInfo;sobelGradientsRenderTarget;dogProgramInfo;dogRenderTarget;applyInternal(t,n){if(!t.isR8)throw new Error("SobelPass expects R8 or RGBA8 render targets");return this.executeProgram(this.sobelGradientsProgramInfo,t,n?null:this.sobelGradientsRenderTarget),this.dogRenderTarget}}class o_ extends bn{get sigmaSmall(){return this.uniforms.u_sigmaSmall}set sigmaSmall(t){this.uniforms.u_sigmaSmall=t}get sigmaLarge(){return this.uniforms.u_sigmaLarge}set sigmaLarge(t){this.uniforms.u_sigmaLarge=t}}const i_=`#version 300 es
precision highp float;

in vec2 v_uv;

/*
  u_input is always bound by the pipeline
  and represents the CURRENT frame.
*/
uniform sampler2D u_input;

uniform sampler2D u_frame1;
uniform sampler2D u_frame2;
uniform sampler2D u_frame3;
uniform sampler2D u_frame4;

out vec4 outColor;

/*
  Exact median of 5 values.
  Deterministic, branchless.
*/
float median5(
    float v0,
    float v1,
    float v2,
    float v3,
    float v4
) {
    float a = min(v0, v1);
    float b = max(v0, v1);
    float c = min(v2, v3);
    float d = max(v2, v3);

    float e = max(a, c);
    float f = min(b, d);

    float g = min(e, f);
    float h = max(e, f);

    return max(min(h, v4), g);
}

void main() {
    float value0 = texture(u_input,  v_uv).r;
    float value1 = texture(u_frame1, v_uv).r;
    float value2 = texture(u_frame2, v_uv).r;
    float value3 = texture(u_frame3, v_uv).r;
    float value4 = texture(u_frame4, v_uv).r;

    float medianValue =
        median5(value0, value1, value2, value3, value4);

    outColor = vec4(medianValue, medianValue, medianValue, 1.0);
}
`;class a_ extends xn{programInfo;outputRenderTarget;history=[];historyWriteIndex=0;historyInitialized=!1;constructor(t,n){super(t,n),this.programInfo=this.createProgramInfo(i_),this.outputRenderTarget=oe.createR8(t),this.history=[oe.createR8(t),oe.createR8(t),oe.createR8(t),oe.createR8(t)]}ensureHistorySized(t,n){for(const r of this.history)(r.framebufferInfo.width!==t||r.framebufferInfo.height!==n)&&r.resize(t,n)}copyToHistory(t){const n=this.gl,r=this.history[this.historyWriteIndex];n.bindFramebuffer(n.READ_FRAMEBUFFER,t.framebufferInfo.framebuffer),n.bindTexture(n.TEXTURE_2D,r.texture),n.copyTexSubImage2D(n.TEXTURE_2D,0,0,0,0,0,t.framebufferInfo.width,t.framebufferInfo.height),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),this.historyWriteIndex=(this.historyWriteIndex+1)%this.history.length}seedHistory(t){for(let n=0;n<this.history.length;n++)this.historyWriteIndex=n,this.copyToHistory(t);this.historyInitialized=!0}applyInternal(t,n){if(!t.isR8)throw new Error("TemporalPass expects R8 or RGBA8 render targets");return this.ensureHistorySized(t.framebufferInfo.width,t.framebufferInfo.height),(this.outputRenderTarget.framebufferInfo.width!==t.framebufferInfo.width||this.outputRenderTarget.framebufferInfo.height!==t.framebufferInfo.height)&&this.outputRenderTarget.resize(t.framebufferInfo.width,t.framebufferInfo.height),this.historyInitialized||this.seedHistory(t),this.settings.uniforms.u_frame1=this.history[0].texture,this.settings.uniforms.u_frame2=this.history[1].texture,this.settings.uniforms.u_frame3=this.history[2].texture,this.settings.uniforms.u_frame4=this.history[3].texture,this.executeProgram(this.programInfo,t,n?null:this.outputRenderTarget),this.copyToHistory(t),this.outputRenderTarget}}class l_ extends bn{}const u_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2 u_corners[4];
uniform float u_thickness;

out vec4 outColor;

float segmentDistance(vec2 p, vec2 a, vec2 b) {
    vec2 ab = b - a;
    float t = clamp(dot(p - a, ab) / dot(ab, ab), 0.0, 1.0);
    vec2 closest = a + t * ab;
    return length(p - closest);
}

void main() {
    vec4 base = texture(u_input, v_uv);

    vec2 p = v_uv;
    float d0 = segmentDistance(p, u_corners[0], u_corners[1]);
    float d1 = segmentDistance(p, u_corners[1], u_corners[2]);
    float d2 = segmentDistance(p, u_corners[2], u_corners[3]);
    float d3 = segmentDistance(p, u_corners[3], u_corners[0]);

    float minDist = min(min(d0, d1), min(d2, d3));

    float edge = step(u_thickness, minDist);
    float mask = 1.0 - edge;

    outColor = mix(base, vec4(1.0, 1.0, 1.0, 1.0), mask);
}
`;class c_ extends xn{boxProgramInfo;outputRenderTarget;pixelBuffer=null;pixelChannels=0;lastBox=null;constructor(t,n){super(t,n),this.boxProgramInfo=this.createProgramInfo(u_),this.outputRenderTarget=oe.createRGBA8(t)}ensurePixelBuffer(t,n,r){const s=t*n*r;(!this.pixelBuffer||this.pixelBuffer.length!==s)&&(this.pixelBuffer=new Uint8Array(s)),this.pixelChannels=r}readPixelsToBuffer(t){const n=t.framebufferInfo.width,r=t.framebufferInfo.height,s=t.isR8,o=s?this.gl.RED:this.gl.RGBA,a=s?1:4;return this.ensurePixelBuffer(n,r,a),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t.framebufferInfo.framebuffer),this.gl.readPixels(0,0,n,r,o,this.gl.UNSIGNED_BYTE,this.pixelBuffer),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),{width:n,height:r}}sampleMax3x3(t,n,r,s){if(!this.pixelBuffer)return 0;const o=Math.round(t),a=Math.round(n);let i=0;for(let l=-1;l<=1;l++)for(let u=-1;u<=1;u++){const f=Math.max(0,Math.min(r-1,o+u)),h=Math.max(0,Math.min(s-1,a+l)),d=((s-1-h)*r+f)*this.pixelChannels,m=this.pixelBuffer[d]/255;m>i&&(i=m)}return i}findRayHits(t,n,r,s,o){const a=(t-1)*.5,i=(n-1)*.5,l=[];for(let u=0;u<s;u++){const f=u/s*Math.PI*2,h=Math.cos(f),c=Math.sin(f),d=h>0?(t-1-a)/h:h<0?-a/h:1/0,m=c>0?(n-1-i)/c:c<0?-i/c:1/0,_=Math.min(d,m);if(isFinite(_))for(let v=_;v>=0;v-=o){const x=a+h*v,y=i+c*v;if(this.sampleMax3x3(x,y,t,n)>=r){l.push({x:x/(t-1),y:y/(n-1)});break}}}return l}computeOBBCorners(t,n){if(t.length<4)return[{x:.5-.25,y:.5-.25},{x:.5+.25,y:.5-.25},{x:.5+.25,y:.5+.25},{x:.5-.25,y:.5+.25}];let r=0,s=0;for(const g of t)r+=g.x,s+=g.y;r/=t.length,s/=t.length;let o=0,a=0,i=0;for(const g of t){const A=g.x-r,B=g.y-s;o+=A*A,a+=A*B,i+=B*B}const l=o+i,u=o*i-a*a,f=Math.sqrt(Math.max(0,l*l-4*u)),h=(l+f)*.5;let c=a,d=h-o;const m=Math.hypot(c,d)||1;c/=m,d/=m;const _=-d,v=c,x=[],y=[];for(const g of t){const A=g.x-r,B=g.y-s;x.push(A*c+B*d),y.push(A*_+B*v)}x.sort((g,A)=>g-A),y.sort((g,A)=>g-A);const E=Math.floor(x.length*Math.min(Math.max(n,0),.45)),S=x[E],b=x[x.length-1-E],T=y[E],F=y[y.length-1-E],I=[{x:r+S*c+T*_,y:s+S*d+T*v},{x:r+b*c+T*_,y:s+b*d+T*v},{x:r+b*c+F*_,y:s+b*d+F*v},{x:r+S*c+F*_,y:s+S*d+F*v}];for(const g of I)g.x=Math.max(0,Math.min(1,g.x)),g.y=Math.max(0,Math.min(1,g.y));return I}applyInternal(t,n){const r=this.settings,{width:s,height:o}=this.readPixelsToBuffer(t),a=this.findRayHits(s,o,r.threshold,Math.max(32,r.rayCount),r.step),i=this.computeOBBCorners(a,r.trimFraction);return this.lastBox={corners:i},this.settings.uniforms.u_corners=[i[0].x,1-i[0].y,i[1].x,1-i[1].y,i[2].x,1-i[2].y,i[3].x,1-i[3].y],this.settings.uniforms.u_thickness=1.5/Math.max(s,o),this.settings.uniforms.u_input=t.texture,this.executeProgram(this.boxProgramInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}class f_ extends bn{_threshold=.2;_rayCount=64;_step=.5;_trimFraction=.12;_angleThreshold=0;_distanceThreshold=0;get threshold(){return this._threshold}set threshold(t){this._threshold=t}get rayCount(){return this._rayCount}set rayCount(t){this._rayCount=t}get step(){return this._step}set step(t){this._step=t}get trimFraction(){return this._trimFraction}set trimFraction(t){this._trimFraction=t}get angleThreshold(){return this._angleThreshold}set angleThreshold(t){this._angleThreshold=t}get distanceThreshold(){return this._distanceThreshold}set distanceThreshold(t){this._distanceThreshold=t}}class da extends Xm{passes;passMap;rayBoxPass;constructor(t){super(t);const n=new jm(this.gl),r=new Jm;r.flipX=!1,r.flipY=!1;const s=new Qm(this.gl,r),o=new l_;o.enabled=!0;const a=new a_(this.gl,o),i=new Km;i.kernelRadius=2,i.sigmaSpatial=2,i.sigmaRange=.1;const l=new Ym(this.gl,i),u=new o_;u.sigmaSmall=1.4,u.sigmaLarge=2.8;const f=new s_(this.gl,u),h=new f_;h.threshold=.12,h.rayCount=64,h.step=.5,h.trimFraction=.12,this.rayBoxPass=new c_(this.gl,h),this.passes=[{id:"rec709-luma",label:"Rec709 Luma",required:!0,pass:n},{id:"orientation",label:"Orientation",required:!1,pass:s},{id:"temporal",label:"Temporal Median",required:!1,pass:a},{id:"bilateral",label:"Bilateral",required:!1,pass:l},{id:"sobel",label:"Structure",required:!1,pass:f},{id:"ray-box",label:"Ray Box",required:!1,pass:this.rayBoxPass}],this.passMap=new Map(this.passes.map(c=>[c.id,c]));for(const c of this.passes)this.addPass(c.pass)}getPass(t){return this.passMap.get(t)?.pass}postprocess(){return{box:this.rayBoxPass.lastBox}}}class an{constructor(t){this.mediaStreamTrack=t,this.imageCapture=new ImageCapture(t)}static _imageCaptureContexts=new Map;static _initialized=!1;static get imageCaptureContexts(){if(!an._initialized)throw new Error("ImageCaptureContext not initialized. Call ImageCaptureContext.initialize() first.");return an._imageCaptureContexts}imageCapture;static async initialize(){await this.refreshVideoTracks(),this._initialized=!0}static async refreshVideoTracks(){await navigator.mediaDevices.getUserMedia({video:!0});const n=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),r=new Set;for(const s of n){const a=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:s.deviceId}}})).getVideoTracks()[0];r.add(a.id),this._imageCaptureContexts.has(a.id)||this._imageCaptureContexts.set(a.id,new an(a))}for(const[s]of this._imageCaptureContexts)r.has(s)||this._imageCaptureContexts.delete(s)}}var d_=te('<button type="button" role="tab"> </button>'),h_=te('<div class="passBar" role="tablist" aria-label="Pipeline passes"></div>');function m_(e,t){pe(t,!1);let n=Y(t,"passes",24,()=>[]),r=Y(t,"selectedPassId",8);const s=Gs();Ve();var o=h_();ys(o,5,n,a=>a.id,(a,i)=>{var l=d_();let u;var f=O(l);Re(()=>{u=Ss(l,1,"passButton",null,u,{passButtonActive:r()===p(i).id}),nr(l,"aria-selected",(ke(r()),p(i),Fe(()=>r()===p(i).id))),Je(f,(p(i),Fe(()=>p(i).label)))}),sn("click",l,()=>s("select",{passId:p(i).id})),U(a,l)}),U(e,o),xe()}var __=te('<label class="setting"><div class="settingLabel"> </div> <div class="settingControl sliderControl svelte-2wv2v5"><div class="sliderShell svelte-2wv2v5"><div class="sliderTrack svelte-2wv2v5"><input class="sliderInput svelte-2wv2v5" type="range"/></div> <div class="settingValue svelte-2wv2v5"> </div></div></div></label>');function Me(e,t){pe(t,!1);let n=Y(t,"label",8),r=Y(t,"min",8),s=Y(t,"max",8),o=Y(t,"step",8),a=Y(t,"value",8);const i=Gs();Ve();var l=__(),u=O(l),f=O(u),h=V(u,2),c=O(h),d=O(c),m=O(d),_=V(d,2),v=O(_);Re(()=>{Je(f,n()),nr(m,"min",r()),nr(m,"max",s()),nr(m,"step",o()),Zc(m,a()),Je(v,a())}),sn("input",m,x=>i("input",{value:Number(x.currentTarget.value)})),U(e,l),xe()}var v_=te('<label class="setting toggleSetting"><div class="settingLabel"> </div> <div class="settingControl"><input type="checkbox"/></div></label>');function ct(e,t){pe(t,!1);let n=Y(t,"label",8),r=Y(t,"checked",8);const s=Gs();Ve();var o=v_(),a=O(o),i=O(a),l=V(a,2),u=O(l);Re(()=>{Je(i,n()),Qc(u,r())}),sn("change",u,f=>s("change",{checked:f.currentTarget.checked})),U(e,o),xe()}var p_=te('<div class="settings"><!> <!> <!> <!></div>');function x_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1);const s=5,o=2,a=.5,i=s/3;let l=N(n().enabled),u=N(n().kernelRadius),f=N(n().sigmaSpatial),h=N(n().sigmaRange);function c(g,A,B){return Math.max(A,Math.min(B,g))}function d(g){return Math.ceil(3*g)}function m(g){return g/3}function _(g){R(l,g),n(n().enabled=g,!0)}function v(g){const A=c(Math.round(g),o,s),B=m(A),K=Math.min(n().sigmaSpatial,B);R(u,A),R(f,K),n(n().kernelRadius=A,!0),n(n().sigmaSpatial=K,!0)}function x(g){const A=c(g,a,i),B=d(A),K=c(B,o,s);R(f,A),R(u,K),n(n().sigmaSpatial=A,!0),n(n().kernelRadius=K,!0)}function y(g){R(h,g),n(n().sigmaRange=g,!0)}Nt(()=>ke(n()),()=>{n()&&(R(l,n().enabled),R(u,n().kernelRadius),R(f,n().sigmaSpatial),R(h,n().sigmaRange))}),kt(),Ve();var E=p_(),S=O(E);{var b=g=>{ct(g,{label:"Enabled",get checked(){return p(l)},$$events:{change:A=>_(A.detail.checked)}})};se(S,g=>{r()||g(b)})}var T=V(S,2);Me(T,{label:"Kernel Radius",min:o,max:s,step:1,get value(){return p(u)},$$events:{input:g=>v(g.detail.value)}});var F=V(T,2);Me(F,{label:"Sigma Spatial",min:a,max:i,step:.1,get value(){return p(f)},$$events:{input:g=>x(g.detail.value)}});var I=V(F,2);Me(I,{label:"Sigma Range",min:.01,max:.5,step:.01,get value(){return p(h)},$$events:{input:g=>y(g.detail.value)}}),U(e,E),xe()}var b_=te('<div class="settings"><div class="settingsEmpty">Rec709 is required and has no settings.</div></div>');function E_(e){var t=b_();U(e,t)}var y_=te('<div class="settings"><!> <!> <!></div>');function g_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),s=N(n().enabled),o=N(n().sigmaSmall),a=N(n().sigmaLarge);function i(_){R(s,_),n(n().enabled=_,!0)}function l(_){R(o,_),n(n().sigmaSmall=_,!0)}function u(_){R(a,_),n(n().sigmaLarge=_,!0)}Nt(()=>ke(n()),()=>{n()&&(R(s,n().enabled),R(o,n().sigmaSmall),R(a,n().sigmaLarge))}),kt(),Ve();var f=y_(),h=O(f);{var c=_=>{ct(_,{label:"Enabled",get checked(){return p(s)},$$events:{change:v=>i(v.detail.checked)}})};se(h,_=>{r()||_(c)})}var d=V(h,2);Me(d,{label:"Sigma Small",min:1,max:1.8,step:.05,get value(){return p(o)},$$events:{input:_=>l(_.detail.value)}});var m=V(d,2);Me(m,{label:"Sigma Large",min:2,max:3,step:.05,get value(){return p(a)},$$events:{input:_=>u(_.detail.value)}}),U(e,f),xe()}var S_=te('<div class="settings"><!> <!></div>');function R_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),s=N(n().enabled),o=N(n().threshold);function a(c){R(s,c),n(n().enabled=c,!0)}function i(c){R(o,c),n(n().threshold=c,!0)}Nt(()=>ke(n()),()=>{n()&&(R(s,n().enabled),R(o,n().threshold))}),kt(),Ve();var l=S_(),u=O(l);{var f=c=>{ct(c,{label:"Enabled",get checked(){return p(s)},$$events:{change:d=>a(d.detail.checked)}})};se(u,c=>{r()||c(f)})}var h=V(u,2);Me(h,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(o)},$$events:{input:c=>i(c.detail.value)}}),U(e,l),xe()}var T_=te('<div class="settings"><!> <div class="settingsEmpty">Uses last 4 frames (median). No tunable parameters.</div></div>');function A_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),s=N(n().enabled);function o(u){R(s,u),n(n().enabled=u,!0)}Nt(()=>ke(n()),()=>{n()&&R(s,n().enabled)}),kt(),Ve();var a=T_(),i=O(a);{var l=u=>{ct(u,{label:"Enabled",get checked(){return p(s)},$$events:{change:f=>o(f.detail.checked)}})};se(i,u=>{r()||u(l)})}U(e,a),xe()}var F_=te('<div class="settings"><!> <!> <!> <!> <!></div>');function w_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),s=N(n().enabled),o=N(n().threshold),a=N(n().rayCount),i=N(n().step),l=N(n().trimFraction);function u(b){R(s,b),n(n().enabled=b,!0)}function f(b){R(o,b),n(n().threshold=b,!0)}function h(b){R(a,b),n(n().rayCount=b,!0)}function c(b){R(i,b),n(n().step=b,!0)}function d(b){R(l,b),n(n().trimFraction=b,!0)}Nt(()=>ke(n()),()=>{n()&&(R(s,n().enabled),R(o,n().threshold),R(a,n().rayCount),R(i,n().step),R(l,n().trimFraction))}),kt(),Ve();var m=F_(),_=O(m);{var v=b=>{ct(b,{label:"Enabled",get checked(){return p(s)},$$events:{change:T=>u(T.detail.checked)}})};se(_,b=>{r()||b(v)})}var x=V(_,2);Me(x,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(o)},$$events:{input:b=>f(b.detail.value)}});var y=V(x,2);Me(y,{label:"Ray Count",min:32,max:256,step:8,get value(){return p(a)},$$events:{input:b=>h(Math.round(b.detail.value))}});var E=V(y,2);Me(E,{label:"Step (px)",min:.25,max:5,step:.25,get value(){return p(i)},$$events:{input:b=>c(b.detail.value)}});var S=V(E,2);Me(S,{label:"Trim Fraction",min:0,max:.4,step:.01,get value(){return p(l)},$$events:{input:b=>d(b.detail.value)}}),U(e,m),xe()}var P_=te('<div class="settings"><!> <!> <!></div>');function I_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),s=N(n().enabled),o=N(n().flipX),a=N(n().flipY);function i(_){R(s,_),n(n().enabled=_,!0)}function l(_){R(o,_),n(n().flipX=_,!0)}function u(_){R(a,_),n(n().flipY=_,!0)}Nt(()=>ke(n()),()=>{n()&&(R(s,n().enabled),R(o,n().flipX),R(a,n().flipY))}),kt(),Ve();var f=P_(),h=O(f);{var c=_=>{ct(_,{label:"Enabled",get checked(){return p(s)},$$events:{change:v=>i(v.detail.checked)}})};se(h,_=>{r()||_(c)})}var d=V(h,2);ct(d,{label:"Flip X",get checked(){return p(o)},$$events:{change:_=>l(_.detail.checked)}});var m=V(d,2);ct(m,{label:"Flip Y",get checked(){return p(a)},$$events:{change:_=>u(_.detail.checked)}}),U(e,f),xe()}var C_=te('<div class="fpsBadge svelte-1dp3x29" aria-label="Frames per second"> </div>');function B_(e,t){pe(t,!1);let n=N(0),r=0,s=performance.now();function o(){const u=performance.now();r+=1;const f=u-s;f>=500&&(R(n,Math.round(r*1e3/f)),r=0,s=u)}var a={measure:o},i=C_(),l=O(i);return Re(()=>Je(l,`${p(n)??""} fps`)),U(e,i),ef(t,"measure",o),xe(a)}var D_=te('<div class="toast svelte-1fk2ial" role="status"> </div>');function M_(e,t){pe(t,!1);let n=Y(t,"message",8,""),r=Y(t,"open",12,!1),s=Y(t,"duration",8,2e3),o=N(null);Nt(()=>(ke(r()),p(o),ke(s())),()=>{r()&&(p(o)&&clearTimeout(p(o)),R(o,setTimeout(()=>r(!1),s())))}),kt();var a=ae(),i=ie(a);{var l=u=>{var f=D_(),h=O(f);Re(()=>Je(h,n())),qc(3,f,()=>r_,()=>({y:10,duration:150})),U(u,f)};se(i,u=>{r()&&u(l)})}U(e,a),xe()}const N_={"rec709-luma":{enabled:!0},orientation:{enabled:!0,flipX:!0,flipY:!1},temporal:{enabled:!0},bilateral:{enabled:!0,kernelRadius:2,sigmaSpatial:2,sigmaRange:.1},sobel:{enabled:!0,sigmaSmall:1.4,sigmaLarge:2.8},"ray-box":{enabled:!1}},k_={passes:N_},L_={"rec709-luma":{enabled:!0},orientation:{enabled:!0,flipX:!0,flipY:!1},temporal:{enabled:!0},bilateral:{enabled:!0,kernelRadius:2,sigmaSpatial:2,sigmaRange:.1},sobel:{enabled:!0,sigmaSmall:1.4,sigmaLarge:2.8},"ray-box":{enabled:!1}},U_={passes:L_};var O_=te("<option> </option>"),G_=te("<option> </option>"),V_=te('<div class="errorBanner svelte-1n46o8q" role="alert"> </div>'),H_=te('<main class="app svelte-1n46o8q"><section class="controls svelte-1n46o8q"><div class="controlRow svelte-1n46o8q"><div class="sideSwitcher svelte-1n46o8q" role="group" aria-label="Side selector"><button type="button">Front</button> <button type="button">Rear</button></div> <!> <button class="exportButton svelte-1n46o8q" type="button">Export</button></div> <!></section> <section class="views svelte-1n46o8q"><div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Front</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div> <div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Rear</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div></section> <!> <!> <!></main>');function z_(e,t){pe(t,!1);const n={"rec709-luma":E_,bilateral:x_,sobel:g_,"magnatude-gate":R_,temporal:A_,"ray-box":w_,orientation:I_};let r=N(""),s=new Map,o=N([]),a=N(""),i=N(""),l=N("front"),u=N(null),f=N(null),h=N(null),c=N(null),d=N([]),m=N(null),_=!1,v=!1,x=N(null),y=N(!1),E=N("");function S(){R(o,Array.from(s.entries()).map(([w,P])=>({id:w,label:`${P.mediaStreamTrack.label||"Camera"} (${w})`})))}async function b(){await an.initialize(),s=an.imageCaptureContexts,S(),!p(a)&&p(o)[0]&&R(a,p(o)[0].id),!p(i)&&p(o)[1]&&R(i,p(o)[1].id),!p(i)&&p(o)[0]&&R(i,p(o)[0].id)}function T(w,P){const M=P?.getPass(w);return M?M.settings:null}function F(w,P){const M=P?.passes??{};for(const H of w.passes){const k=M[H.id];if(k){typeof k.enabled=="boolean"&&(H.pass.enabled=k.enabled);for(const[Ht,Gr]of Object.entries(k))Ht!=="enabled"&&Ht in H.pass.settings&&(H.pass.settings[Ht]=Gr)}}}function I(w){const P={};for(const M of w.passes){const H={enabled:M.pass.enabled},k=M.pass.settings;switch(M.id){case"bilateral":H.kernelRadius=k.kernelRadius,H.sigmaSpatial=k.sigmaSpatial,H.sigmaRange=k.sigmaRange;break;case"sobel":H.kernelRadius=k.kernelRadius,H.directionBias=k.directionBias,H.edgeGain=k.edgeGain,H.minEdge=k.minEdge;break;case"magnatude-gate":H.threshold=k.threshold;break;case"temporal":break;case"orientation":H.flipX=k.flipX,H.flipY=k.flipY;break;case"ray-box":H.threshold=k.threshold,H.rayCount=k.rayCount,H.step=k.step,H.trimFraction=k.trimFraction;break}P[M.id]=H}return{passes:P}}async function g(w){const P=p(w==="front"?h:c);if(!P)return;const M=JSON.stringify(I(P),null,2);await navigator.clipboard.writeText(M),R(E,`Exported ${w} settings to clipboard`),R(y,!0)}async function A(w,P){if(!w||!P)return;const M=s.get(P);if(!M)return;const H=await M.imageCapture.grabFrame();try{await w.render(H)}finally{H.close()}}async function B(){if(_){if(v){p(x)?.measure(),requestAnimationFrame(()=>{B()});return}v=!0;try{p(x)?.measure(),await A(p(h),p(a)),await A(p(c),p(i)),R(m,null)}catch(w){R(m,w instanceof Error?w.message:String(w))}finally{v=!1,requestAnimationFrame(()=>{B()})}}}Wa(async()=>{try{if(await b(),!p(u)||!p(f)){R(m,"Canvas not available for one or both views.");return}R(h,new da(p(u))),R(c,new da(p(f))),p(h)&&F(p(h),k_),p(c)&&F(p(c),U_),R(d,p(h).passes),R(r,p(d)[0]?.id??""),_=!0,B()}catch(w){R(m,w instanceof Error?w.message:String(w))}}),nf(()=>{_=!1}),Ve();var K=H_(),Z=O(K),me=O(Z),be=O(me),Pe=O(be);let Xe;var $e=V(Pe,2);let qe;var pt=V(be,2);{let w=st(()=>p(d).map(P=>({id:P.id,label:P.label})));m_(pt,{get passes(){return p(w)},get selectedPassId(){return p(r)},$$events:{select:P=>R(r,P.detail.passId)}})}var Ut=V(pt,2),Ot=V(me,2);{var Gt=w=>{const P=st(()=>p(d).find(gn=>gn.id===p(r))),M=st(()=>p(P)?n[p(P).id]:null),H=st(()=>p(l)==="front"?p(h):p(c)),k=st(()=>p(P)?T(p(P).id,p(H)):null);var Ht=ae(),Gr=ie(Ht);{var pu=gn=>{var To=ae(),xu=ie(To);{var bu=zt=>{var Sn=ae(),Vr=ie(Sn);Et(Vr,()=>p(M),(Hr,zr)=>{zr(Hr,{get required(){return p(P).required},get settings(){return p(k)}})}),U(zt,Sn)},Eu=zt=>{var Sn=ae(),Vr=ie(Sn);{var Hr=Xt=>{var Rn=ae(),Xr=ie(Rn);Et(Xr,()=>p(M),($r,qr)=>{qr($r,{get required(){return p(P).required},get settings(){return p(k)}})}),U(Xt,Rn)},zr=Xt=>{var Rn=ae(),Xr=ie(Rn);{var $r=$t=>{var Tn=ae(),Yr=ie(Tn);Et(Yr,()=>p(M),(Kr,Wr)=>{Wr(Kr,{get required(){return p(P).required},get settings(){return p(k)}})}),U($t,Tn)},qr=$t=>{var Tn=ae(),Yr=ie(Tn);{var Kr=qt=>{var An=ae(),jr=ie(An);Et(jr,()=>p(M),(Zr,Qr)=>{Qr(Zr,{get required(){return p(P).required},get settings(){return p(k)}})}),U(qt,An)},Wr=qt=>{var An=ae(),jr=ie(An);{var Zr=Yt=>{var Fn=ae(),Jr=ie(Fn);Et(Jr,()=>p(M),(es,ts)=>{ts(es,{get required(){return p(P).required},get settings(){return p(k)}})}),U(Yt,Fn)},Qr=Yt=>{var Fn=ae(),Jr=ie(Fn);{var es=Kt=>{var wn=ae(),ns=ie(wn);Et(ns,()=>p(M),(rs,ss)=>{ss(rs,{get required(){return p(P).required},get settings(){return p(k)}})}),U(Kt,wn)},ts=Kt=>{var wn=ae(),ns=ie(wn);Et(ns,()=>p(M),(rs,ss)=>{ss(rs,{get required(){return p(P).required}})}),U(Kt,wn)};se(Jr,Kt=>{p(P).id==="ray-box"?Kt(es):Kt(ts,!1)},!0)}U(Yt,Fn)};se(jr,Yt=>{p(P).id==="temporal"?Yt(Zr):Yt(Qr,!1)},!0)}U(qt,An)};se(Yr,qt=>{p(P).id==="magnatude-gate"?qt(Kr):qt(Wr,!1)},!0)}U($t,Tn)};se(Xr,$t=>{p(P).id==="orientation"?$t($r):$t(qr,!1)},!0)}U(Xt,Rn)};se(Vr,Xt=>{p(P).id==="sobel"?Xt(Hr):Xt(zr,!1)},!0)}U(zt,Sn)};se(xu,zt=>{p(P).id==="bilateral"?zt(bu):zt(Eu,!1)})}U(gn,To)};se(Gr,gn=>{p(P)&&p(M)&&p(k)&&gn(pu)})}U(w,Ht)};se(Ot,w=>{p(r)&&w(Gt)})}var xt=V(Z,2),bt=O(xt),En=O(bt),yn=V(O(En),2);Re(()=>{p(a),Bo(()=>{p(o)})});var Vt=O(yn);Vt.value=Vt.__value="";var qn=V(Vt);ys(qn,1,()=>p(o),w=>w.id,(w,P)=>{var M=O_(),H=O(M),k={};Re(()=>{Je(H,p(P).id),k!==(k=p(P).id)&&(M.value=(M.__value=p(P).id)??"")}),U(w,M)});var j=V(En,2);os(j,w=>R(u,w),()=>p(u));var du=V(bt,2),yo=O(du),go=V(O(yo),2);Re(()=>{p(i),Bo(()=>{p(o)})});var Or=O(go);Or.value=Or.__value="";var hu=V(Or);ys(hu,1,()=>p(o),w=>w.id,(w,P)=>{var M=G_(),H=O(M),k={};Re(()=>{Je(H,p(P).id),k!==(k=p(P).id)&&(M.value=(M.__value=p(P).id)??"")}),U(w,M)});var mu=V(yo,2);os(mu,w=>R(f,w),()=>p(f));var So=V(xt,2);{var _u=w=>{var P=V_(),M=O(P);Re(()=>Je(M,p(m))),U(w,P)};se(So,w=>{p(m)&&w(_u)})}var Ro=V(So,2);os(B_(Ro,{$$legacy:!0}),w=>R(x,w),()=>p(x));var vu=V(Ro,2);M_(vu,{get message(){return p(E)},get open(){return p(y)},set open(w){R(y,w)},$$legacy:!0}),Re(()=>{Xe=Ss(Pe,1,"svelte-1n46o8q",null,Xe,{sideActive:p(l)==="front"}),qe=Ss($e,1,"svelte-1n46o8q",null,qe,{sideActive:p(l)==="rear"})}),sn("click",Pe,()=>R(l,"front")),sn("click",$e,()=>R(l,"rear")),sn("click",Ut,()=>g(p(l))),Go(yn,()=>p(a),w=>R(a,w)),Go(go,()=>p(i),w=>R(i,w)),U(e,K),xe()}kc(z_,{target:document.getElementById("app")});
